<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hexo|王祖亮</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="android 安卓">
<meta property="og:type" content="website">
<meta property="og:title" content="Hexo|王祖亮">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo|王祖亮">
<meta property="og:description" content="android 安卓">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo|王祖亮">
<meta name="twitter:description" content="android 安卓">
  
    <link rel="alternative" href="/atom.xml" title="Hexo|王祖亮" type="application/atom+xml">
  
  
    <link rel="icon" href="/32.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/img/touxiang.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">王祖亮</a></h1>
		</hgroup>

		
		<p class="header-subtitle">一只码畜</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/ZuLiangWang" title="github">github</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						
					</div>
				</section>
				
				
				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">Hust Cser / Android Coder      zuliangwang@hustunique.com  329851721@qq.com</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">王祖亮</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="/img/touxiang.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">王祖亮</h1>
			</hgroup>
			
			<p class="header-subtitle">一只码畜</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/ZuLiangWang" title="github">github</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-一个Xposed插件的诞生" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/11/27/一个Xposed插件的诞生/" class="article-date">
  	<time datetime="2016-11-27T07:29:26.000Z" itemprop="datePublished">2016-11-27</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>title:&#x4E00;&#x4E2A;Xposed&#x63D2;&#x4EF6;&#x7684;&#x8BDE;&#x751F;<br>date:<img src="/2016/11/27/&#x4E00;&#x4E2A;Xposed&#x63D2;&#x4EF6;&#x7684;&#x8BDE;&#x751F;/result.png" alt="result"> 2016-11-27 14:49:20</p>
<h1 id="&#x4E00;&#x4E2A;Xposed&#x63D2;&#x4EF6;&#x7684;&#x8BDE;&#x751F;">&#x4E00;&#x4E2A;Xposed&#x63D2;&#x4EF6;&#x7684;&#x8BDE;&#x751F;</h1><hr>
<p>&#x672C;&#x7BC7;&#x8BB0;&#x8F7D;&#x6211;&#x642D;&#x5EFA;Xposed&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x5230;&#x7B2C;&#x4E00;&#x4E2A;Xposed&#x63D2;&#x4EF6;&#x7684;&#x8FC7;&#x7A0B;&#x3002;</p>
<p>1.&#x5728;&#x624B;&#x673A;&#x4E0A;&#x5B89;&#x88C5;Xposed&#x3002;</p>
<p>&#x5B89;&#x88C5;Xposed&#x662F;&#x4E2A;&#x975E;&#x5E38;&#x9EBB;&#x70E6;&#x7684;&#x4E8B;&#x60C5;&#xFF0C;&#x6211;&#x7684;&#x6D4B;&#x8BD5;&#x673A;&#x662F;&#x7EA2;&#x7C73;2 miUI7&#x7A33;&#x5B9A;&#x7248;&#xFF0C;&#x6211;&#x672C;&#x6765;&#x60F3;&#x5728;&#x8FD9;&#x53F0;&#x6D4B;&#x8BD5;&#x673A;&#x4E0A;&#x5B89;&#x88C5;Xposed&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x53F0;&#x624B;&#x673A;&#x6CA1;&#x6709;root&#x4E5F;&#x6CA1;&#x6709;&#x5408;&#x9002;&#x7684;rom&#xFF0C;&#x5982;&#x679C;&#x8981;&#x88C5;&#x5728;&#x8FD9;&#x53F0;&#x624B;&#x673A;&#x4E0A;&#x53EF;&#x80FD;&#x8981;&#x6D6A;&#x8D39;&#x5927;&#x91CF;&#x7684;&#x65F6;&#x95F4;&#x53BB;&#x5237;&#x673A;&#xFF0C;&#x6700;&#x540E;&#x6211;&#x9009;&#x62E9;&#x653E;&#x5F03;&#x5728;&#x5B9E;&#x673A;&#x4E0A;&#x5B89;&#x88C5;&#xFF0C;&#x8F6C;&#x800C;&#x5728;Genymotion&#x4E0B;&#x7684;&#x865A;&#x62DF;&#x673A;&#x4E0A;&#x5B89;&#x88C5;&#x3002;</p>
<p>&#x6211;&#x865A;&#x62DF;&#x673A;&#x914D;&#x7F6E;&#xFF1A;</p>
<p>Google Nexus 6 - 5.0.0 API 21</p>
<p>Genymotion&#x4E0A;&#x7684;&#x865A;&#x62DF;&#x673A;&#x81EA;&#x5E26;root&#x6388;&#x6743;&#x7BA1;&#x7406;&#xFF0C;&#x6211;&#x5728;root&#x6743;&#x9650;&#x4E0B;&#x5B89;&#x88C5;&#x3002;</p>
<p>Xposed&#x6709;&#x4E24;&#x4E2A;&#x90E8;&#x5206;&#xFF1A;</p>
<p>&#xFF08;1&#xFF09;XposedInstall&#x2014;&#x4E00;&#x4E2A;apk&#x5E94;&#x7528;&#xFF0C;&#x8FD9;&#x4E2A;&#x4E1C;&#x897F;&#x662F;&#x8D1F;&#x8D23;&#x4E0E;&#x7528;&#x6237;&#x4EA4;&#x4E92;&#x548C;&#x7BA1;&#x7406;Xposed&#x63D2;&#x4EF6;&#x7684;Android&#x5E94;&#x7528;&#xFF0C;&#x8FD9;&#x4E2A;&#x4E1C;&#x897F;&#x5B89;&#x88C5;&#x8D77;&#x6765;&#x662F;&#x5F88;&#x5BB9;&#x6613;&#x7684;&#xFF0C;&#x4F7F;&#x7528;Genymotion&#x53EA;&#x9700;&#x8981;&#x628A;apk&#x62D6;&#x5165;&#x865A;&#x62DF;&#x673A;&#x7A97;&#x53E3;&#x5C31;&#x80FD;&#x81EA;&#x884C;&#x8BC6;&#x522B;&#x3002;</p>
<p>&#xFF08;2&#xFF09;Xposed SDK&#x2014;&#x5B9E;&#x73B0;root&#x7684;&#x5E95;&#x5C42;&#x5E93;&#xFF0C;&#x8FD9;&#x4E2A;&#x4E1C;&#x897F;&#x662F;&#x4E00;&#x4E2A;zip&#x6587;&#x4EF6;&#xFF0C;&#x9700;&#x8981;&#x4EE5;Recovery&#x7684;&#x65B9;&#x5F0F;&#x5237;&#x4E0A;&#x624B;&#x673A;&#xFF0C;&#x4E14;&#x5B98;&#x65B9;&#x5BF9;Recovery&#x7684;&#x5DE5;&#x5177;&#x6709;&#x660E;&#x786E;&#x7684;&#x8981;&#x6C42;&#xFF0C;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;&#x6E90;&#x751F;&#x7684;&#x5DE5;&#x5177;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x4F60;&#x5F97;&#x5148;&#x5237;&#x4E0A;&#x8981;&#x6C42;&#x7684;Recovery&#x5DE5;&#x5177;&#xFF0C;&#x975E;&#x5E38;&#x7684;&#x9EBB;&#x70E6;&#x3002;&#x5E78;&#x8FD0;&#x7684;&#x662F;Genymotion&#x4E0B;&#x6709;&#x5F88;&#x7B80;&#x5355;&#x7684;&#x5DE5;&#x5177;&#x5728;&#x865A;&#x62DF;&#x673A;&#x73AF;&#x5883;&#x4E0B;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x5FEB;&#x901F;&#x5237;&#x673A;&#xFF0C;<a href="https://github.com/rovo89/GenyFlash" target="_blank" rel="external">GenyFlash</a>&#xFF0C;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x5DE5;&#x5177;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x50CF;&#x5B89;&#x88C5;apk&#x4E00;&#x6837;&#x5237;&#x673A;&#xFF0C;&#x5F88;&#x65B9;&#x4FBF;&#x7684;&#x5C31;&#x80FD;&#x88C5;&#x4E0A;SDK&#x3002;</p>
<p>2.&#x5728;Mac&#x4E0B;&#x914D;&#x7F6E;Xposed&#x63D2;&#x4EF6;&#x5F00;&#x53D1;&#x73AF;&#x5883;</p>
<p>&#x6211;&#x8D77;&#x521D;&#x4EE5;&#x4E3A;&#x5F00;&#x53D1;Xposed&#x7684;&#x63D2;&#x4EF6;&#x4F1A;&#x975E;&#x5E38;&#x7684;&#x9EBB;&#x70E6;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x53EF;&#x80FD;&#x4E0D;&#x662F;&#x6807;&#x51C6;&#x7684;Android&#x5DE5;&#x7A0B;&#xFF0C;&#x4E0D;&#x80FD;&#x901A;&#x8FC7;Android Studio&#x8FD9;&#x6837;IDE&#x7684;&#x7F16;&#x8BD1;&#x3002;&#x540E;&#x6765;&#x8BD5;&#x4E86;&#x4E00;&#x4E0B;&#xFF0C;&#x5176;&#x5B9E;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5F00;&#x53D1;Xposed&#x63D2;&#x4EF6;&#x5C31;&#x548C;&#x4E00;&#x822C;&#x7684;App&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x4E24;&#x6837;&#xFF0C;&#x5B83;&#x53EA;&#x8981;&#x6C42;&#x4F60;mainfest&#x548C;&#x4E00;&#x4E9B;&#x6587;&#x4EF6;&#x91CC;&#x591A;&#x52A0;&#x5C11;&#x8BB8;&#x8BC6;&#x522B;&#x7684;&#x6807;&#x8BB0;&#x3002;</p>
<p>Xposed&#x63D2;&#x4EF6;&#x672C;&#x8EAB;&#x5C31;&#x662F;&#x4E00;&#x4E2A;Android App&#xFF0C;&#x6211;&#x4EEC;&#x4E4B;&#x524D;&#x5B89;&#x88C5;&#x7684;XposedInstall&#x5C31;&#x4E13;&#x95E8;&#x7BA1;&#x7406;&#x8FD9;&#x6279;App&#xFF0C;&#x5728;&#x7F16;&#x5199;&#x63D2;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x628A;App&#x672C;&#x8EAB;&#x7684;&#x542F;&#x52A8;icon&#x8BBE;&#x7F6E;&#x4E3A;&#x4E0D;&#x663E;&#x793A;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x53EA;&#x80FD;&#x5728;XposedInstall&#x91CC;&#x627E;&#x5230;&#x5B83;&#x3002;</p>
<p>Xposed&#x7684;&#x5F00;&#x53D1;&#x548C;&#x666E;&#x901A;&#x7684;App&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x6DFB;&#x52A0;Xposed&#x63D2;&#x4EF6;&#x9700;&#x8981;&#x7684;&#x4F9D;&#x8D56;&#x5C31;&#x884C;&#x4E86;&#x3002;</p>
<p>&#x6211;&#x5728;Mac&#x4E0B;&#x7684;Android Studio&#x4E2D;&#x7F16;&#x5199;Xposed&#x63D2;&#x4EF6;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4F7F;&#x7528;Gradle&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>app/build.gradle</p>
<p><code>provided &apos;de.robv.android.xposed:api:82&apos;</code></p>
<p>&#x8FD9;&#x4E2A;&#x4E1C;&#x897F;&#x597D;&#x50CF;&#x662F;&#x4F1A;&#x5F15;&#x7528;&#x672C;&#x673A;&#x4E0A;&#x5B89;&#x88C5;&#x7684;sdk&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x73B0;&#x5728;&#x4E5F;&#x641E;&#x4E0D;&#x592A;&#x6E05;&#x695A;&#xFF0C;&#x76EE;&#x524D;&#x5148;&#x8BB0;&#x4F4F;&#x5B83;&#x662F;&#x6211;&#x4EEC;&#x9879;&#x76EE;&#x9700;&#x8981;&#x7684;&#x4F9D;&#x8D56;&#x5C31;&#x591F;&#x4E86;&#x3002;</p>
<p>3.Xposed Hello World</p>
<p>&#x4E0B;&#x9762;&#x5F00;&#x59CB;&#x7B2C;&#x4E00;&#x4E2A;Xposed&#x63D2;&#x4EF6;&#x7684;&#x7F16;&#x5199;&#xFF1A;</p>
<p>&#x4E3A;&#x4E86;&#x66F4;&#x76F4;&#x89C2;&#x7684;&#x770B;&#x5230;Xposed&#x7684;&#x4F5C;&#x7528;&#xFF0C;&#x6211;&#x4EEC;&#x8DF3;&#x8FC7;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x63D0;&#x4F9B;&#x7684;&#x6700;&#x7B80;&#x5355;&#x7684;simple&#xFF0C;&#x76F4;&#x63A5;&#x7F16;&#x5199;&#x7B2C;&#x4E00;&#x4E2A;Hook&#x63D2;&#x4EF6;&#x3002;</p>
<p>&#x9996;&#x5148;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x5DE5;&#x7A0B;&#xFF0C;&#x5B83;&#x5C06;&#x88AB;Xposed&#x52AB;&#x6301;&#x5E76;&#x4FEE;&#x6539;&#x3002;</p>
<p>&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x5DE5;&#x7A0B;&#x7684;&#x5185;&#x5BB9;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x6211;&#x53EA;&#x8D34;Acitivity&#x91CC;&#x9762;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zuliangwang.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.support.v7.app.<span class="type">AppCompatActivity</span>;</span><br><span class="line"><span class="keyword">import</span> android.os.<span class="type">Bundle</span>;</span><br><span class="line"><span class="keyword">import</span> android.view.<span class="type">View</span>;</span><br><span class="line"><span class="keyword">import</span> android.widget.<span class="type">Button</span>;</span><br><span class="line"><span class="keyword">import</span> android.widget.<span class="type">TextView</span>;</span><br><span class="line"></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">AppCompatActivity</span> {</span></span><br><span class="line"></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void onCreate(<span class="type">Bundle</span> savedInstanceState) {</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(<span class="type">R</span>.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> <span class="type">TextView</span> textView = (<span class="type">TextView</span>) findViewById(<span class="type">R</span>.id.test_text);</span><br><span class="line">        <span class="type">Button</span> button = (<span class="type">Button</span>) findViewById(<span class="type">R</span>.id.test_button);</span><br><span class="line"></span><br><span class="line">        button.setOnClickListener(<span class="keyword">new</span> <span class="type">View</span>.<span class="type">OnClickListener</span>() {</span><br><span class="line">            <span class="annotation">@Override</span></span><br><span class="line">            public void onClick(<span class="type">View</span> v) {</span><br><span class="line">                textView.setText(<span class="string">&quot;GG&quot;</span>);</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x4E00;&#x4E2A;TextView&#x548C;&#x4E00;&#x4E2A;Button&#xFF0C;&#x5F53;&#x70B9;&#x51FB;Button&#xFF0C;TextView&#x7684;&#x5185;&#x5BB9;&#x5C06;&#x88AB;&#x4FEE;&#x6539;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x7684;&#x76EE;&#x7684;&#x5C31;&#x662F;&#x52AB;&#x6301;&#x8FD9;&#x4E2A;TextView&#x7684;setText&#x65B9;&#x6CD5;&#xFF0C;&#x4FEE;&#x6539;&#x4F20;&#x5165;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x6700;&#x540E;&#x7684;text&#x5C06;&#x4E0D;&#x662F;&#x201C;GG&#x201D;</p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;Xposed&#x63D2;&#x4EF6;&#x5DE5;&#x7A0B;&#x3002;</p>
<p>&#x9996;&#x5148;&#x4FEE;&#x6539;AndroidMainfest&#x7684;&#x5185;&#x5BB9;&#xFF1A;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">manifest</span> <span class="attribute">package</span>=<span class="value">&quot;com.zuliangwang.firstxposed&quot;</span></span><br><span class="line">          <span class="attribute">xmlns:android</span>=<span class="value">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">application</span></span><br><span class="line">        <span class="attribute">android:allowBackup</span>=<span class="value">&quot;true&quot;</span></span><br><span class="line">        <span class="attribute">android:icon</span>=<span class="value">&quot;@mipmap/ic_launcher&quot;</span></span><br><span class="line">        <span class="attribute">android:label</span>=<span class="value">&quot;@string/app_name&quot;</span></span><br><span class="line">        <span class="attribute">android:supportsRtl</span>=<span class="value">&quot;true&quot;</span></span><br><span class="line">        <span class="attribute">android:theme</span>=<span class="value">&quot;@style/AppTheme&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- &#x662F;&#x5426;&#x662F;xposed&#x6A21;&#x5757;&#xFF0C;xposed&#x6839;&#x636E;&#x8FD9;&#x4E2A;&#x6765;&#x5224;&#x65AD;&#x662F;&#x5426;&#x662F;&#x6A21;&#x5757; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">meta-data</span></span><br><span class="line">            <span class="attribute">android:name</span>=<span class="value">&quot;xposedmodule&quot;</span></span><br><span class="line">            <span class="attribute">android:value</span>=<span class="value">&quot;true&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- &#x6A21;&#x5757;&#x63CF;&#x8FF0;&#xFF0C;&#x663E;&#x793A;&#x5728;xposed&#x6A21;&#x5757;&#x5217;&#x8868;&#x90A3;&#x91CC;&#x7B2C;&#x4E8C;&#x884C; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">meta-data</span></span><br><span class="line">            <span class="attribute">android:name</span>=<span class="value">&quot;xposeddescription&quot;</span></span><br><span class="line">            <span class="attribute">android:value</span>=<span class="value">&quot;&#x6D4B;&#x8BD5;Xposed&#x6A21;&#x5757;&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- &#x6700;&#x4F4E;xposed&#x7248;&#x672C;&#x53F7;(lib&#x6587;&#x4EF6;&#x540D;&#x53EF;&#x77E5;) --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">meta-data</span></span><br><span class="line">            <span class="attribute">android:name</span>=<span class="value">&quot;xposedminversion&quot;</span></span><br><span class="line">            <span class="attribute">android:value</span>=<span class="value">&quot;30&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="title">activity</span> <span class="attribute">android:name</span>=<span class="value">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">intent-filter</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">action</span> <span class="attribute">android:name</span>=<span class="value">&quot;android.intent.action.MAIN&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="title">category</span> <span class="attribute">android:name</span>=<span class="value">&quot;android.intent.category.LAUNCHER&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="title">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">activity</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">application</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x4E2A;&#x73A9;&#x610F;&#x662F;&#x7ED9;XposedInstall&#x63D0;&#x4F9B;&#x7684;&#x672C;&#x63D2;&#x4EF6;&#x7684;&#x63CF;&#x8FF0;&#x3002;</p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x5728;main&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x521B;&#x5EFA;assets&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x5728;&#x91CC;&#x9762;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x6587;&#x672C;&#x6587;&#x4EF6;xposed_init&#xFF0C;&#x8FD9;&#x4E2A;&#x540D;&#x5B57;&#x662F;&#x6709;&#x8981;&#x6C42;&#x7684;&#x3002;</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">com<span class="class">.zuliangwang</span><span class="class">.firstxposed</span><span class="class">.DIAO</span></span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x91CC;&#x53EA;&#x6709;&#x4E00;&#x884C;&#x4EE3;&#x7801;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x7C7B;&#x7684;&#x540D;&#x5B57;&#xFF0C;&#x5B83;&#x544A;&#x8BC9;xposed&#x6211;&#x4EEC;&#x8FD9;&#x4E2A;&#x63D2;&#x4EF6;&#x7684;&#x6267;&#x884C;&#x5165;&#x53E3;&#x3002;</p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x5728;&#x8FD9;&#x4E2A;&#x7C7B;&#x91CC;&#x7F16;&#x5199;&#x5177;&#x4F53;&#x7684;&#x903B;&#x8F91;&#xFF1A;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zuliangwang.firstxposed;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> de.robv.android.xposed.IXposedHookLoadPackage;</span><br><span class="line"><span class="keyword">import</span> de.robv.android.xposed.XC_MethodHook;</span><br><span class="line"><span class="keyword">import</span> de.robv.android.xposed.XposedBridge;</span><br><span class="line"><span class="keyword">import</span> de.robv.android.xposed.XposedHelpers;</span><br><span class="line"><span class="keyword">import</span> de.robv.android.xposed.callbacks.XC_LoadPackage;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * Created by zuliangwang on 16/11/27.</span><br><span class="line"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DIAO</span> <span class="keyword">implements</span> <span class="title">IXposedHookLoadPackage</span> </span>{</span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleLoadPackage</span><span class="params">(XC_LoadPackage.LoadPackageParam loadPackageParam)</span> <span class="keyword">throws</span> Throwable </span>{</span><br><span class="line">        XposedBridge.log(<span class="string">&quot;begin&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (loadPackageParam.packageName.equals(<span class="string">&quot;com.zuliangwang.test&quot;</span>)){</span><br><span class="line">            XposedBridge.log(<span class="string">&quot;hint&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            XposedHelpers.findAndHookMethod(TextView.class, <span class="string">&quot;setText&quot;</span>, CharSequence.class,</span><br><span class="line">                    <span class="keyword">new</span> XC_MethodHook() {</span><br><span class="line">                        <span class="annotation">@Override</span></span><br><span class="line">                        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">beforeHookedMethod</span><span class="params">(MethodHookParam param)</span> <span class="keyword">throws</span> Throwable </span>{</span><br><span class="line">                            XposedBridge.log(<span class="string">&quot;before&quot;</span>);</span><br><span class="line">                            param.args[<span class="number">0</span>] = <span class="string">&quot;&#x4FEE;&#x6539;&#x4E86;&quot;</span>;</span><br><span class="line">                        }</span><br><span class="line"></span><br><span class="line">                        <span class="annotation">@Override</span></span><br><span class="line">                        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">afterHookedMethod</span><span class="params">(MethodHookParam param)</span> <span class="keyword">throws</span> Throwable </span>{</span><br><span class="line">                            XposedBridge.log(<span class="string">&quot;after&quot;</span>);</span><br><span class="line">                        }</span><br><span class="line">                    });</span><br><span class="line"></span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x901A;&#x8FC7;Xposed&#x63D0;&#x4F9B;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x53E6;&#x4E00;&#x4E2A;Android App&#x7684;&#x65B9;&#x6CD5;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x73B0;&#x5728;&#x7F16;&#x8BD1;&#x8FD9;&#x4E2A;&#x5DE5;&#x7A0B;&#xFF0C;&#x4F60;&#x4F1A;&#x5728;XposedInstall&#x91CC;&#x770B;&#x5230;&#x8FD9;&#x4E2A;&#x65B0;&#x7684;&#x63D2;&#x4EF6;&#x3002;&#x70B9;&#x51FB;&#x8FD0;&#x884C;&#x7B2C;&#x4E00;&#x4E2A;Test&#x5DE5;&#x7A0B;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x8FD9;&#x4E2A;App&#x7684;&#x903B;&#x8F91;&#x88AB;&#x6211;&#x4EEC;&#x5199;&#x7684;&#x63D2;&#x4EF6;&#x7ED9;&#x52AB;&#x6301;&#x4E86;&#xFF01;</p>
<p>&#x7B2C;&#x4E00;&#x4E2A;&#x63D2;&#x4EF6;&#x5230;&#x6B64;&#x5B8C;&#x6210;&#x3002;</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-Android动画总结" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/11/25/Android动画总结/" class="article-date">
  	<time datetime="2016-11-25T06:45:32.000Z" itemprop="datePublished">2016-11-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/25/Android动画总结/">Android动画总结</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Android&#x7684;&#x52A8;&#x753B;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x4E09;&#x7C7B;&#xFF1A;</p>
<p>&#xFF08;1&#xFF09;View Animation&#xFF1A;&#x6700;&#x65E9;&#x7684;Android&#x52A8;&#x753B;&#x5B9E;&#x73B0;&#xFF0C;&#x8FD9;&#x79CD;&#x52A8;&#x753B;&#x53EA;&#x80FD;&#x8BBE;&#x7F6E;&#x7ED9;view&#x4F7F;&#x7528;&#x3002;</p>
<p>&#xFF08;2&#xFF09;Drawable Animation&#xFF1A;&#x5B9E;&#x73B0;&#x7C7B;&#x4F3C;&#x5E7B;&#x706F;&#x7247;&#x653E;&#x6620;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x4E00;&#x5F20;&#x5F20;&#x5207;&#x6362;Drawable&#x3002;</p>
<p>&#xFF08;3&#xFF09;Property Animation&#xFF1A;&#x6700;&#x540E;&#x51FA;&#x73B0;&#x7684;&#x52A8;&#x753B;&#x5B9E;&#x73B0;&#xFF0C;&#x5C5E;&#x6027;&#x52A8;&#x753B;&#xFF0C;&#x5728;Android3.0&#x4EE5;&#x540E;&#x624D;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#xFF0C;&#x8FD9;&#x79CD;&#x52A8;&#x753B;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x7ED9;&#x4EFB;&#x4F55;Object&#x4F7F;&#x7528;&#xFF0C;&#x4E14;&#x53EF;&#x4EE5;&#x6269;&#x5C55;&#xFF0C;&#x652F;&#x6301;&#x5B9E;&#x73B0;&#x4EFB;&#x4F55;&#x6548;&#x679C;&#x7684;&#x52A8;&#x753B;&#x3002;</p>
<p>&#x8BA9;&#x6211;&#x4EEC;&#x4E00;&#x4E2A;&#x4E00;&#x4E2A;&#x6765;&#x770B;</p>
<p>&#xFF08;1&#xFF09;View Animation</p>
<p>Animation&#x7684;&#x65E2;&#x53EF;&#x4EE5;&#x4EE5;xml&#x7684;&#x5F62;&#x5F0F;&#x4F7F;&#x7528;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Java&#x4EE3;&#x7801;&#x7684;&#x65B9;&#x5F0F;&#x3002;</p>
<p>&#x73B0;&#x5728;&#x5148;&#x8BA9;&#x6211;&#x5199;&#x4E00;&#x4E2A;&#x6700;&#x7B80;&#x5355;&#x7684;&#x900F;&#x660E;&#x52A8;&#x753B;&#x7684;&#x4F7F;&#x7528;demo&#xFF1A;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">set</span></span><br><span class="line">    <span class="attribute">android:duration</span>=<span class="value">&quot;200&quot;</span></span><br><span class="line">    <span class="attribute">xmlns:android</span>=<span class="value">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">alpha</span> <span class="attribute">android:fromAlpha</span>=<span class="value">&quot;0&quot;</span></span><br><span class="line">    <span class="attribute">android:toAlpha</span>=<span class="value">&quot;1&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="title">set</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>&#x4EE5;xml&#x7684;&#x5F62;&#x5F0F;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x52A8;&#x753B;&#x96C6;&#x5408;&#xFF0C;&#x8FD9;&#x4E2A;&#x96C6;&#x5408;&#x91CC;&#x76EE;&#x524D;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x900F;&#x660E;&#x6E10;&#x53D8;&#x7684;&#x52A8;&#x753B;&#x3002;</p>
<p>&#x6CE8;&#x610F;&#xFF0C;AnimationSet&#x662F;Animation&#x7684;&#x5B50;&#x7C7B;&#xFF0C;&#x5B83;&#x4E5F;&#x662F;&#x4E00;&#x79CD;&#x52A8;&#x753B;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x548C;&#x5B83;&#x7684;&#x540D;&#x5B57;&#x4E00;&#x6837;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x52A8;&#x753B;&#x7684;&#x96C6;&#x5408;&#xFF0C;&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;&#x7C7B;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x628A;&#x591A;&#x79CD;&#x7B80;&#x5355;&#x7684;&#x52A8;&#x753B;&#x7EC4;&#x5408;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x66F4;&#x4E3A;&#x590D;&#x6742;&#x7684;&#x52A8;&#x753B;&#xFF0C;&#x6211;&#x6F14;&#x793A;&#x7684;demo&#x91CC;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x6E10;&#x53D8;&#x52A8;&#x753B;&#x3002;</p>
<p>xml&#x91CC;&#x7684;&#x8FD9;&#x51E0;&#x4E2A;&#x5C5E;&#x6027;&#x503C;&#x90FD;&#x5F88;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#xFF0C;duration&#x5C31;&#x662F;&#x52A8;&#x753B;&#x7684;&#x603B;&#x65F6;&#x95F4;&#xFF0C;fromAlpha&#x548C;toAlpha&#x662F;&#x8D77;&#x59CB;&#x900F;&#x660E;&#x5EA6;&#x548C;&#x76EE;&#x6807;&#x900F;&#x660E;&#x5EA6;&#xFF0C;&#x8FD9;&#x4E2A;&#x52A8;&#x753B;&#x4F1A;&#x8BA9;&#x4E00;&#x4E2A;view&#x5728;200ms&#x7684;&#x65F6;&#x95F4;&#x5185;&#x7531;&#x900F;&#x660E;&#x53D8;&#x4E3A;&#x4E0D;&#x900F;&#x660E;&#x3002;</p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x5728;Activity&#x4E2D;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;Animation:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zuliangwang.learnanimation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.support.v7.app.<span class="type">AppCompatActivity</span>;</span><br><span class="line"><span class="keyword">import</span> android.os.<span class="type">Bundle</span>;</span><br><span class="line"><span class="keyword">import</span> android.view.<span class="type">View</span>;</span><br><span class="line"><span class="keyword">import</span> android.view.animation.<span class="type">Animation</span>;</span><br><span class="line"><span class="keyword">import</span> android.view.animation.<span class="type">AnimationSet</span>;</span><br><span class="line"><span class="keyword">import</span> android.view.animation.<span class="type">AnimationUtils</span>;</span><br><span class="line"><span class="keyword">import</span> android.widget.<span class="type">Button</span>;</span><br><span class="line"><span class="keyword">import</span> android.widget.<span class="type">TextView</span>;</span><br><span class="line"></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">AppCompatActivity</span> {</span></span><br><span class="line"></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void onCreate(<span class="type">Bundle</span> savedInstanceState) {</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(<span class="type">R</span>.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> <span class="type">TextView</span> textView = (<span class="type">TextView</span>) findViewById(<span class="type">R</span>.id.test_text);</span><br><span class="line">        <span class="type">Button</span> button = (<span class="type">Button</span>) findViewById(<span class="type">R</span>.id.test_button);</span><br><span class="line">        <span class="keyword">final</span> <span class="type">Animation</span> animation = <span class="type">AnimationUtils</span>.loadAnimation(getBaseContext(),<span class="type">R</span>.anim.test_anim);</span><br><span class="line"></span><br><span class="line">        button.setOnClickListener(<span class="keyword">new</span> <span class="type">View</span>.<span class="type">OnClickListener</span>() {</span><br><span class="line">            <span class="annotation">@Override</span></span><br><span class="line">            public void onClick(<span class="type">View</span> v) {</span><br><span class="line">                textView.startAnimation(animation);</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x4EE3;&#x7801;&#x5185;&#x5BB9;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x70B9;&#x51FB;Button&#x5C31;&#x53EF;&#x4EE5;&#x8BA9;&#x52A8;&#x753B;&#x4F5C;&#x7528;&#x4E8E;textview&#x3002;</p>
<p>&#x6709;&#x4E00;&#x70B9;&#x4E00;&#x5B9A;&#x8981;&#x8BB0;&#x4F4F;&#xFF0C;View Animation&#x4E0D;&#x80FD;&#x4F7F;view&#x7684;&#x5B9E;&#x9645;&#x4F4D;&#x7F6E;&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x5982;&#x679C;&#x4F60;&#x4F7F;&#x7528;&#x4E86;&#x5E73;&#x79FB;&#x52A8;&#x753B;&#xFF0C;&#x6700;&#x540E;&#x4F60;&#x770B;&#x5230;&#x7684;view&#x4F4D;&#x7F6E;&#x70B9;&#x51FB;&#x662F;&#x65E0;&#x6548;&#x7684;&#xFF0C;&#x8FD9;&#x662F;&#x4F60;&#x70B9;&#x51FB;&#x539F;&#x6765;&#x7684;&#x4F4D;&#x7F6E;&#x624D;&#x80FD;&#x89E6;&#x53D1;&#x89E6;&#x6478;&#x7684;&#x65F6;&#x95F4;&#x3002;</p>
<p>View Animation&#x7684;&#x7B80;&#x5355;&#x4F7F;&#x7528;&#x5230;&#x8FD9;&#x91CC;&#x7ED3;&#x675F;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x7B2C;&#x4E8C;&#x4E2A;&#x52A8;&#x753B;&#xFF0C;Drawable Animation&#x3002;</p>
<p>&#xFF08;2&#xFF09;Drawable Animation</p>
<p>&#x6211;&#x67E5;&#x4E86;&#x4E00;&#x4E9B;&#x4E1C;&#x897F;&#xFF0C;&#x53D1;&#x73B0;&#x8FD9;&#x4E2A;&#x52A8;&#x753B;&#x7528;&#x7684;&#x662F;&#x6BD4;&#x8F83;&#x5C11;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x573A;&#x666F;&#x975E;&#x5E38;&#x5355;&#x4E00;&#xFF0C;&#x5B83;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x5B9E;&#x73B0;&#x4E00;&#x4E9B;&#x4EE3;&#x7801;&#x96BE;&#x4EE5;&#x76F4;&#x63A5;&#x5B9E;&#x73B0;&#x7684;&#x9010;&#x5E27;&#x52A8;&#x753B;&#xFF0C;&#x4F8B;&#x5982;&#x4EAC;&#x4E1C;app&#x4E0A;&#x7684;&#x5954;&#x8DD1;&#x7684;&#x5FEB;&#x9012;&#x5458;&#x7684;&#x52A8;&#x753B;&#x3002;</p>
<p>&#x5B98;&#x7F51;&#x4E0A;&#x7ED9;&#x4E86;&#x660E;&#x786E;&#x7684;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4E5F;&#x5199;&#x4E86;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;demo&#xFF1A;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">animation-list</span></span><br><span class="line">    <span class="attribute">android:oneshot</span>=<span class="value">&quot;false&quot;</span> <span class="attribute">xmlns:android</span>=<span class="value">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">item</span> <span class="attribute">android:drawable</span>=<span class="value">&quot;@drawable/jiang1&quot;</span> <span class="attribute">android:duration</span>=<span class="value">&quot;200&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">item</span> <span class="attribute">android:drawable</span>=<span class="value">&quot;@drawable/jiang2&quot;</span> <span class="attribute">android:duration</span>=<span class="value">&quot;200&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">item</span> <span class="attribute">android:drawable</span>=<span class="value">&quot;@drawable/jiang3&quot;</span> <span class="attribute">android:duration</span>=<span class="value">&quot;200&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">animation-list</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>&#x8FD8;&#x662F;&#x4F7F;&#x7528;xml&#x7684;&#x5F62;&#x5F0F;&#x4F7F;&#x7528;&#xFF0C;Drawable Animation&#x7684;xml&#x6587;&#x4EF6;&#x662F;&#x653E;&#x5728;drawable&#x6587;&#x4EF6;&#x5939;&#x800C;&#x4E0D;&#x662F;anim&#xFF0C;&#x8FD9;&#x70B9;&#x8981;&#x6CE8;&#x610F;&#x4E00;&#x4E0B;&#x3002;</p>
<p>&#x52A8;&#x753B;&#x7684;&#x6548;&#x679C;&#x662F;&#x4ECE;&#x7B2C;&#x4E00;&#x5F20;&#x56FE;&#x7247;&#x5F00;&#x59CB;&#xFF0C;&#x4E00;&#x76F4;&#x64AD;&#x653E;&#x5230;&#x6700;&#x540E;&#x4E00;&#x5F20;&#x56FE;&#x7247;&#x3002;&#x5982;&#x679C;onshot&#x8BBE;&#x7F6E;&#x4E3A;false&#xFF0C;&#x5219;&#x4F1A;&#x5FAA;&#x73AF;&#x4E0D;&#x505C;&#x64AD;&#x653E;&#xFF0C;&#x5982;&#x679C;&#x4E3A;true&#xFF0C;&#x90A3;&#x4E48;&#x4E00;&#x6B21;&#x4E4B;&#x540E;&#x5C31;&#x4F1A;&#x505C;&#x6B62;&#x3002;</p>
<p>&#x5728;Activity&#x91CC;&#x7684;&#x4F7F;&#x7528;&#xFF1A;</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zuliangwang.learnanimation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.graphics.drawable.<span class="type">AnimationDrawable</span>;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.app.<span class="type">AppCompatActivity</span>;</span><br><span class="line"><span class="keyword">import</span> android.os.<span class="type">Bundle</span>;</span><br><span class="line"><span class="keyword">import</span> android.view.<span class="type">View</span>;</span><br><span class="line"><span class="keyword">import</span> android.view.animation.<span class="type">Animation</span>;</span><br><span class="line"><span class="keyword">import</span> android.view.animation.<span class="type">AnimationSet</span>;</span><br><span class="line"><span class="keyword">import</span> android.view.animation.<span class="type">AnimationUtils</span>;</span><br><span class="line"><span class="keyword">import</span> android.widget.<span class="type">Button</span>;</span><br><span class="line"><span class="keyword">import</span> android.widget.<span class="type">ImageView</span>;</span><br><span class="line"><span class="keyword">import</span> android.widget.<span class="type">TextView</span>;</span><br><span class="line"></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">AppCompatActivity</span> {</span></span><br><span class="line"></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void onCreate(<span class="type">Bundle</span> savedInstanceState) {</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(<span class="type">R</span>.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> <span class="type">TextView</span> textView = (<span class="type">TextView</span>) findViewById(<span class="type">R</span>.id.test_text);</span><br><span class="line">        <span class="type">ImageView</span> imageView = (<span class="type">ImageView</span>) findViewById(<span class="type">R</span>.id.test_image);</span><br><span class="line">        <span class="type">Button</span> button = (<span class="type">Button</span>) findViewById(<span class="type">R</span>.id.test_button);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> <span class="type">Animation</span> animation = <span class="type">AnimationUtils</span>.loadAnimation(getBaseContext(),<span class="type">R</span>.anim.test_anim);</span><br><span class="line">        <span class="keyword">final</span> <span class="type">AnimationDrawable</span> animationDrawable = (<span class="type">AnimationDrawable</span>) imageView.getBackground();</span><br><span class="line"></span><br><span class="line">        button.setOnClickListener(<span class="keyword">new</span> <span class="type">View</span>.<span class="type">OnClickListener</span>() {</span><br><span class="line">            <span class="annotation">@Override</span></span><br><span class="line">            public void onClick(<span class="type">View</span> v) {</span><br><span class="line">                textView.startAnimation(animation);</span><br><span class="line">                animationDrawable.start();</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>Drawable Animation&#x5230;&#x8FD9;&#x91CC;&#x7ED3;&#x675F;&#x3002;&#x6700;&#x540E;&#x662F;&#x6700;&#x590D;&#x6742;&#x7684;&#x5C5E;&#x6027;&#x52A8;&#x753B;&#x3002;</p>
<p>&#xFF08;3&#xFF09;Property Animation</p>
<p>&#x4F7F;&#x7528;&#x5C5E;&#x6027;&#x52A8;&#x753B;&#x524D;&#x9700;&#x8981;&#x5148;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;&#x63D2;&#x503C;&#x5668;&#xFF08;Interpolator&#xFF09;&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x56E0;&#x4E3A;&#x63D2;&#x503C;&#x5668;&#x662F;&#x4F7F;&#x7528;&#x5C5E;&#x6027;&#x52A8;&#x753B;&#x7684;&#x6838;&#x5FC3;&#x3002;</p>
<p>&#x63D2;&#x503C;&#x5668;&#xFF0C;&#x7B80;&#x5355;&#x7684;&#x6765;&#x8BF4;&#x5C31;&#x8BF4;&#x4E00;&#x4E2A;&#x6570;&#x503C;&#x63A7;&#x5236;&#x5668;&#xFF0C;&#x5B83;&#x6839;&#x636E;&#x8F93;&#x5165;&#x7684;&#x503C;&#x548C;&#x9884;&#x8BBE;&#x7684;&#x8BA1;&#x7B97;&#x65B9;&#x6CD5;&#x63A7;&#x5236;&#x8F93;&#x51FA;&#x503C;&#xFF0C;&#x8FD9;&#x4E2A;&#x8F93;&#x51FA;&#x503C;&#x6700;&#x540E;&#x4EA4;&#x7ED9;&#x5C5E;&#x6027;&#x52A8;&#x753B;&#xFF0C;&#x4ECE;&#x800C;&#x63A7;&#x5236;&#x5C5E;&#x6027;&#x52A8;&#x753B;&#x7684;&#x53D8;&#x5316;&#x901F;&#x7387;&#x3002;&#x8F93;&#x5165;&#x503C;&#x53EF;&#x4EE5;&#x662F;&#x4EFB;&#x4F55;&#x503C;&#xFF0C;&#x6700;&#x540E;&#x6539;&#x53D8;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x67D0;&#x4E2A;filed&#x3002;</p>
<p>&#x63D2;&#x503C;&#x5668;&#x672C;&#x8EAB;&#x4E0D;&#x53C2;&#x4E0E;&#x5173;&#x4E8E;UI&#x7684;&#x4EFB;&#x4F55;&#x884C;&#x4E3A;&#xFF0C;&#x5B83;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x8BA1;&#x7B97;&#x5DE5;&#x5177;&#xFF0C;&#x771F;&#x6B63;&#x53BB;&#x5B9E;&#x73B0;&#x52A8;&#x753B;&#x7684;&#x8FD8;&#x662F;Property Animation&#x3002;</p>
<blockquote>
<p>The property animation system is a robust framework that allows you to animate almost anything. You can define an animation to change any object property over time, regardless of whether it draws to the screen or not. A property animation changes a property&#x2019;s (a field in an object) value over a specified length of time. To animate something, you specify the object property that you want to animate, such as an object&#x2019;s position on the screen, how long you want to animate it for, and what values you want to animate between.</p>
</blockquote>
<p>&#x4EE5;&#x4E0A;&#x8BF4;&#x660E;&#x6765;&#x81EA;Google&#x7684;&#x5B98;&#x65B9;&#x6587;&#x6863;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x4E0D;&#x7BA1;&#x662F;&#x4E0D;&#x662F;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x5C4F;&#x5E55;&#x4E0A;&#x770B;&#x5230;&#x7684;&#x5C5E;&#x6027;&#xFF08;&#x4F4D;&#x7F6E;&#x3001;&#x957F;&#x5EA6;&#x7B49;&#xFF09;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5C5E;&#x6027;&#x52A8;&#x753B;&#x6765;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#xFF0C;&#x8FD9;&#x4E2A;&#x884C;&#x4E3A;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x901A;&#x8FC7;&#x63D2;&#x503C;&#x5668;&#x6765;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x901A;&#x5E38;&#x6765;&#x8BF4;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x5C5E;&#x6027;&#x52A8;&#x753B;&#x7684;&#x76EE;&#x6807;&#x5C31;&#x662F;&#x6765;&#x4FEE;&#x6539;&#x4F4D;&#x7F6E;&#x3001;&#x957F;&#x5EA6;&#x7B49;&#x5C5E;&#x6027;&#xFF0C;&#x4ECE;&#x800C;&#x5B9E;&#x73B0;&#x52A8;&#x753B;&#x7684;&#x6548;&#x679C;&#x3002;</p>
<p>&#x7531;&#x4E8E;&#x5C5E;&#x6027;&#x52A8;&#x753B;&#x672C;&#x8EAB;&#x975E;&#x5E38;&#x590D;&#x6742;&#xFF0C;&#x4F7F;&#x7528;&#x8D77;&#x6765;&#x4E5F;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;&#xFF0C;&#x4F46;&#x662F;&#x76F8;&#x6BD4;View Animation&#x5B83;&#x80FD;&#x5B9E;&#x73B0;&#x66F4;&#x591A;&#x66F4;&#x597D;&#x7684;&#x52A8;&#x753B;&#x6548;&#x679C;&#xFF0C;&#x6211;&#x4EEC;&#x8DDF;&#x7740;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x4E00;&#x6B65;&#x6B65;&#x8D70;&#xFF0C;&#x628A;&#x5C5E;&#x6027;&#x52A8;&#x753B;&#x7684;&#x4F7F;&#x7528;&#x641E;&#x6E05;&#x695A;&#x3002;</p>
<blockquote>
<p>The property animation system lets you define the following characteristics of an animation:</p>
<ul>
<li>Duration: You can specify the duration of an animation. The default length is 300 ms.</li>
<li>Time interpolation: You can specify how the values for the property are calculated as a function of the animation&#x2019;s current elapsed time.</li>
<li>Repeat count and behavior: You can specify whether or not to have an animation repeat when it reaches the end of a duration and how many times to repeat the animation. You can also specify whether you want the animation to play back in reverse. Setting it to reverse plays the animation forwards then backwards repeatedly, until the number of repeats is reached.</li>
<li>Animator sets: You can group animations into logical sets that play together or sequentially or after specified delays.</li>
<li>Frame refresh delay: You can specify how often to refresh frames of your animation. The default is set to refresh every 10 ms, but the speed in which your application can refresh frames is ultimately dependent on how busy the system is overall and how fast the system can service the underlying timer.</li>
</ul>
</blockquote>
<p>&#x5C5E;&#x6027;&#x52A8;&#x753B;&#x7CFB;&#x7EDF;&#x5141;&#x8BB8;&#x4F60;&#x5B9A;&#x4E49;&#x4E00;&#x4E0B;&#x51E0;&#x79CD;&#x52A8;&#x753B;&#x7684;&#x7279;&#x6027;&#x3002;</p>
<ul>
<li>Duration:&#x4F60;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x52A8;&#x753B;&#x7684;&#x5177;&#x4F53;&#x95F4;&#x9694;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x662F;300ms&#x3002;</li>
<li>Time interpolation:&#x4F60;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x5982;&#x4F55;&#x6839;&#x636E;&#x5C5E;&#x6027;&#x503C;&#x7684;&#x6765;&#x8BA1;&#x7B97;&#x5F53;&#x524D;&#x52A8;&#x753B;&#x7684;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x3002;</li>
<li>Repeat count and behavior&#xFF1A;&#x4F60;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x5F53;&#x52A8;&#x753B;&#x6309;&#x7167;duration&#x7ED3;&#x675F;&#x540E;&#x662F;&#x5426;&#x8BA9;&#x52A8;&#x753B;&#x91CD;&#x590D;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x662F;&#x5426;&#x8BA9;&#x52A8;&#x753B;&#x4ECE;&#x540E;&#x5411;&#x524D;&#x64AD;&#x653E;&#x3002;&#x8BBE;&#x7F6E;&#x5B83;&#x6765;&#x53CD;&#x5411;&#x64AD;&#x653E;&#x52A8;&#x753B;&#xFF0C;&#x5148;&#x6B63;&#x5E38;&#x64AD;&#x653E;&#x7136;&#x540E;&#x4ECE;&#x540E;&#x5411;&#x524D;&#x64AD;&#x653E;&#xFF0C;&#x91CD;&#x590D;&#x8FD9;&#x6837;&#x7684;&#x64CD;&#x4F5C;&#x76F4;&#x5230;&#x8FD0;&#x884C;&#x5230;&#x6307;&#x5B9A;&#x6B21;&#x6570;&#x3002;</li>
<li>Animator sets&#xFF1A;&#x4F60;&#x53EF;&#x4EE5;&#x628A;&#x591A;&#x4E2A;&#x52A8;&#x753B;&#x8BBE;&#x7F6E;&#x6210;&#x4E00;&#x7EC4;&#x653E;&#x7F6E;&#x5728;set&#x91CC;&#xFF0C;&#x5B83;&#x4EEC;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x64AD;&#x653E;&#x3001;&#x6309;&#x7167;&#x987A;&#x5E8F;&#x64AD;&#x653E;&#x3001;&#x5728;&#x6307;&#x5B9A;&#x5EF6;&#x8FDF;&#x540E;&#x64AD;&#x653E;&#x3002;</li>
<li>Frame refresh delay&#xFF1A;&#x4F60;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x591A;&#x4E45;&#x5237;&#x65B0;&#x4E00;&#x6B21;&#x52A8;&#x753B;&#x5E27;&#x3002;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x6BCF;10ms&#x5237;&#x65B0;&#x4E00;&#x6B21;&#xFF0C;&#x4F46;&#x662F;&#x5B9E;&#x9645;&#x4E0A;&#x5237;&#x65B0;&#x901F;&#x5EA6;&#x53D6;&#x51B3;&#x4E8E;&#x4F60;&#x7684;&#x7CFB;&#x7EDF;&#x6574;&#x4F53;&#x7684;&#x5FD9;&#x788C;&#x7A0B;&#x5E8F;&#x548C;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x3002;&#x8FD9;&#x4E2A;&#x610F;&#x601D;&#x5C31;&#x662F;&#x8BF4;&#x4F60;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x5237;&#x65B0;&#x9891;&#x7387;&#xFF0C;&#x4F46;&#x662F;&#x5B9E;&#x9645;&#x5237;&#x65B0;&#x9891;&#x7387;&#x6700;&#x7EC8;&#x53D6;&#x51B3;&#x4E8E;&#x5E95;&#x5C42;&#x7684;&#x4E00;&#x4E9B;&#x4E1C;&#x897F;&#xFF0C;&#x4F60;&#x7684;&#x9891;&#x7387;&#x4EC5;&#x4EC5;&#x662F;&#x4E00;&#x4E2A;&#x53C2;&#x8003;&#x503C;&#x3002;</li>
</ul>
<p>&#x63A5;&#x4E0B;&#x6765;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x8BF4;&#x660E;&#x4E86;&#x5C5E;&#x6027;&#x52A8;&#x753B;&#x662F;&#x5982;&#x4F55;&#x5DE5;&#x4F5C;&#x7684;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E00;&#x770B;&#x3002;</p>
<blockquote>
<p>First, let&#x2019;s go over how an animation works with a simple example. Figure 1 depicts a hypothetical object that is animated with its <code>x</code> property, which represents its horizontal location on a screen. The duration of the animation is set to 40 ms and the distance to travel is 40 pixels. Every 10 ms, which is the default frame refresh rate, the object moves horizontally by 10 pixels. At the end of 40ms, the animation stops, and the object ends at horizontal position 40. This is an example of an animation with linear interpolation, meaning the object moves at a constant speed.</p>
<p><img src="https://developer.android.com/images/animation/animation-linear.png" alt=""></p>
<p><strong>Figure 1.</strong> Example of a linear animation</p>
</blockquote>
<p>&#x9996;&#x5148;&#xFF0C;&#x6765;&#x770B;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;&#x9636;&#x6BB5;1&#x63CF;&#x8FF0;&#x4E00;&#x4E2A;&#x5047;&#x8BBE;&#x5BF9;&#x8C61;&#x5BF9;&#x5B83;&#x7684;x&#x5C5E;&#x6027;&#x503C;&#x8FDB;&#x884C;&#x52A8;&#x753B;&#x5904;&#x7406;&#xFF0C;x&#x4EE3;&#x8868;&#x5B83;&#x5728;&#x5C4F;&#x5E55;&#x4E0A;&#x7684;&#x6C34;&#x5E73;&#x4F4D;&#x7F6E;&#x3002;&#x52A8;&#x753B;&#x95F4;&#x9694;&#x8BBE;&#x7F6E;&#x4E3A;40ms&#xFF0C;&#x79FB;&#x52A8;&#x7684;&#x8DDD;&#x79BB;&#x4E3A;40px&#x3002;&#x6BCF;&#x9694;10ms&#xFF08;&#x9ED8;&#x8BA4;&#x7684;&#x5E27;&#x5237;&#x65B0;&#x65F6;&#x95F4;&#xFF09;&#xFF0C;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x5728;&#x6C34;&#x5E73;&#x65B9;&#x5411;&#x4E0A;&#x79FB;&#x52A8;10px&#x3002;&#x5728;40ms&#x7ED3;&#x675F;&#x540E;&#xFF0C;&#x8FD9;&#x4E2A;&#x52A8;&#x753B;&#x7ED3;&#x675F;&#xFF0C;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x5728;&#x6C34;&#x5E73;&#x65B9;&#x5411;40px&#x5904;&#x3002;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4F7F;&#x7528;&#x4E86;&#x7EBF;&#x6027;&#x63D2;&#x503C;&#x5668;&#xFF0C;&#x4EE3;&#x8868;&#x7740;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x4EE5;&#x5E38;&#x6570;&#x901F;&#x5EA6;&#x79FB;&#x52A8;&#x3002;</p>
<blockquote>
<p>You can also specify animations to have a non-linear interpolation. Figure 2 illustrates a hypothetical object that accelerates at the beginning of the animation, and decelerates at the end of the animation. The object still moves 40 pixels in 40 ms, but non-linearly. In the beginning, this animation accelerates up to the halfway point then decelerates from the halfway point until the end of the animation. As Figure 2 shows, the distance traveled at the beginning and end of the animation is less than in the middle.</p>
<p><img src="https://developer.android.com/images/animation/animation-nonlinear.png" alt=""></p>
<p><strong>Figure 2.</strong> Example of a non-linear animation</p>
</blockquote>
<p>&#x8FD9;&#x662F;&#x7B2C;&#x4E8C;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;&#x975E;&#x7EBF;&#x6027;&#x63D2;&#x503C;&#x5668;&#x7684;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x52A8;&#x753B;&#x4F7F;&#x7528;&#x975E;&#x7EBF;&#x6027;&#x63D2;&#x503C;&#x5668;&#x3002;&#x5728;&#x4F8B;&#x5B50;2&#x4E2D;&#x5047;&#x8BBE;&#x5BF9;&#x8C61;&#x5728;&#x52A8;&#x753B;&#x5F00;&#x59CB;&#x9636;&#x6BB5;&#x52A0;&#x901F;&#xFF0C;&#x5728;&#x7ED3;&#x675F;&#x9636;&#x6BB5;&#x51CF;&#x901F;&#x3002;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x4ECD;&#x7136;&#x79FB;&#x52A8;40px&#x548C;40ms&#xFF0C;&#x4F46;&#x662F;&#x4E0D;&#x662F;&#x7EBF;&#x6027;&#x7684;&#x3002;&#x8FD9;&#x4E2A;&#x52A8;&#x753B;&#x5728;&#x524D;&#x534A;&#x6BB5;&#x8DEF;&#x7A0B;&#x4E2D;&#x52A0;&#x901F;&#xFF0C;&#x5E76;&#x5728;&#x540E;&#x534A;&#x6BB5;&#x8DEF;&#x7A0B;&#x51CF;&#x901F;&#x3002;</p>
<p>&#x8FD9;&#x662F;&#x4F7F;&#x7528;&#x975E;&#x7EBF;&#x6027;&#x63D2;&#x503C;&#x5668;&#x7684;&#x52A8;&#x753B;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x52A8;&#x753B;&#x4E00;&#x5B9A;&#x7684;&#x901F;&#x5EA6;&#x53EF;&#x4EE5;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x56FA;&#x5B9A;&#x503C;&#x3002;</p>
<blockquote>
<p>Let&#x2019;s take a detailed look at how the important components of the property animation system would calculate animations like the ones illustrated above. Figure 3 depicts how the main classes work with one another.</p>
<p><img src="https://developer.android.com/images/animation/valueanimator.png" alt=""></p>
<p><strong>Figure 3.</strong> How animations are calculated</p>
</blockquote>
<p>&#x73B0;&#x5728;&#x6765;&#x4ED4;&#x7EC6;&#x770B;&#x4E00;&#x770B;&#x5C5E;&#x6027;&#x52A8;&#x753B;&#x7CFB;&#x7EDF;&#x91CC;&#x7684;&#x91CD;&#x8981;&#x7EC4;&#x4EF6;&#x662F;&#x600E;&#x6837;&#x8BA1;&#x7B97;&#x52A8;&#x753B;&#x7684;&#xFF0C;&#x56FE;&#x7247;&#x63CF;&#x8FF0;&#x4E86;&#x5B83;&#x7684;&#x4E3B;&#x8981;&#x7684;&#x7C7B;&#x76F8;&#x4E92;&#x5DE5;&#x4F5C;&#x7684;&#x65B9;&#x5F0F;&#x3002;</p>
<blockquote>
<p>The ValueAnimator object keeps track of your animation&#x2019;s timing, such as how long the animation has been running, and the current value of the property that it is animating.</p>
<p>The ValueAnimator encapsulates a TimeInterpolator, which defines animation interpolation, and a TypeEvaluator, which defines how to calculate values for the property being animated. For example, in Figure 2, the TimeInterpolator used would be AccelerateDecelerateInterpolator and the TypeEvaluator would be IntEvaluator.</p>
<p>To start an animation, create a ValueAnimator and give it the starting and ending values for the property that you want to animate, along with the duration of the animation. When you call start() the animation begins. During the whole animation, the ValueAnimator calculates an elapsed fraction between 0 and 1, based on the duration of the animation and how much time has elapsed. The elapsed fraction represents the percentage of time that the animation has completed, 0 meaning 0% and 1 meaning 100%. For example, in Figure 1, the elapsed fraction at t = 10 ms would be .25 because the total duration is t = 40 ms.</p>
<p>When the ValueAnimator is done calculating an elapsed fraction, it calls the TimeInterpolator that is currently set, to calculate an interpolated fraction. An interpolated fraction maps the elapsed fraction to a new fraction that takes into account the time interpolation that is set. For example, in Figure 2, because the animation slowly accelerates, the interpolated fraction, about .15, is less than the elapsed fraction, .25, at t = 10 ms. In Figure 1, the interpolated fraction is always the same as the elapsed fraction.</p>
<p>When the interpolated fraction is calculated, ValueAnimator calls the appropriate TypeEvaluator, to calculate the value of the property that you are animating, based on the interpolated fraction, the starting value, and the ending value of the animation. For example, in Figure 2, the interpolated fraction was .15 at t = 10 ms, so the value for the property at that time would be .15 X (40 - 0), or 6.</p>
<p>The com.example.android.apis.animation package in the API Demos sample project provides many examples on how to use the property animation system.</p>
</blockquote>
<p>ValueAnimator&#x5BF9;&#x8C61;&#x4FDD;&#x6301;&#x8FFD;&#x8E2A;&#x4F60;&#x7684;&#x52A8;&#x753B;&#x7684;timing&#xFF0C;&#x4F8B;&#x5982;&#x52A8;&#x753B;&#x8FD0;&#x884C;&#x4E86;&#x591A;&#x4E45;&#xFF0C;amimating&#x7684;&#x5C5E;&#x6027;&#x503C;&#x73B0;&#x5728;&#x662F;&#x591A;&#x5C11;&#x3002;</p>
<p>ValueAnimator&#x5C01;&#x88C5;&#x4E86;&#x4E00;&#x4E2A;TimeInterpolator&#x548C;&#x4E00;&#x4E2A;TypeEvaluator&#xFF0C;&#x524D;&#x8005;&#x5B9A;&#x4E49;&#x4E86;&#x52A8;&#x753B;&#x63D2;&#x503C;&#xFF0C;&#x540E;&#x8005;&#x5B9A;&#x4E49;&#x4E86;&#x5982;&#x4F55;&#x8BA1;&#x7B97;animate&#x7684;&#x5C5E;&#x6027;&#x7684;&#x503C;&#x3002;&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;&#xFF0C;&#x5728;&#x56FE;2&#x4E2D;&#xFF0C;TimeInterpolator&#x7684;&#x5B9E;&#x73B0;&#x662F;AccelerateDecelerateInterpolator&#xFF0C;TypeEvaluator&#x7684;&#x5B9E;&#x73B0;&#x662F;IntEvaluator&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x5F00;&#x59CB;&#x4E00;&#x4E2A;&#x52A8;&#x753B;&#xFF0C;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;ValueAnimator&#x5E76;&#x4E14;&#x7ED9;&#x5B83;&#x4F60;&#x8981;animate&#x7684;&#x5C5E;&#x6027;&#x7684;&#x521D;&#x59CB;&#x503C;&#x548C;&#x7ED3;&#x675F;&#x503C;&#x3002;&#x5F53;&#x4F60;&#x8C03;&#x7528;start&#x51FD;&#x6570;&#x65F6;&#xFF0C;&#x52A8;&#x753B;&#x5F00;&#x542F;&#xFF0C;&#x5728;&#x6574;&#x4E2A;&#x52A8;&#x753B;&#x671F;&#x95F4;&#xFF0C;&#x57FA;&#x4E8E;&#x52A8;&#x753B;&#x6301;&#x7EED;&#x65F6;&#x95F4;&#x548C;&#x5DF2;&#x7ECF;&#x8FD0;&#x884C;&#x7684;&#x65F6;&#x95F4;&#xFF0C;ValueAnimator&#x4ECE;0&#x5230;1&#x8BA1;&#x7B97;&#x8FD0;&#x884C;&#x65F6;&#x7684;&#x503C;&#x3002;&#x8FD9;&#x4E2A;&#x8FD0;&#x884C;&#x65F6;&#x7684;&#x503C;&#x4EE3;&#x8868;&#x52A8;&#x753B;&#x5DF2;&#x7ECF;&#x6267;&#x884C;&#x7684;&#x65F6;&#x95F4;&#x6240;&#x5360;&#x7684;&#x603B;&#x65F6;&#x95F4;&#x767E;&#x5206;&#x6BD4;&#x3002;</p>
<p>&#x5F53;ValueAnimator&#x8BA1;&#x7B97;&#x5B8C;&#x8FD0;&#x884C;&#x65F6;&#x503C;&#xFF0C;&#x5B83;&#x4F1A;&#x8C03;&#x7528;&#x5F53;&#x524D;&#x8BBE;&#x7F6E;&#x7684;TimeInterpolator&#x6765;&#x8BA1;&#x7B97;&#x63D2;&#x503C;&#xFF0C;&#x4E00;&#x4E2A;&#x63D2;&#x503C;&#x6620;&#x5C04;&#x5230;&#x8FD0;&#x884C;&#x503C;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x503C;&#x3002;&#x4F8B;&#x5982;&#x5728;&#x56FE;2&#x4E2D;&#xFF0C;&#x56E0;&#x4E3A;&#x52A8;&#x753B;&#x7F13;&#x6162;&#x7684;&#x52A0;&#x901F;&#xFF0C;&#x5728;10ms&#x65F6;&#xFF0C;&#x63D2;&#x503C;&#xFF0C;&#x5927;&#x6982;0.15&#xFF0C;&#x5C0F;&#x4E8E;&#x8FD0;&#x884C;&#x65F6;&#x503C;0.25&#x3002;&#x5728;&#x56FE;1&#x91CC;&#xFF0C;&#x63D2;&#x503C;&#x603B;&#x662F;&#x7B49;&#x4E8E;&#x8FD0;&#x884C;&#x65F6;&#x503C;&#x3002;</p>
<p>&#x5F53;&#x8BA1;&#x7B97;&#x63D2;&#x503C;&#x65F6;&#xFF0C;ValueAnimator&#x8C03;&#x7528;&#x5408;&#x9002;&#x7684;TypeEvaluator&#x3002;&#x5728;&#x56FE;2&#x4E2D;&#xFF0C;&#x63D2;&#x503C;&#x5728;10ms&#x65F6;&#x7B49;&#x4E8E;0.15&#xFF0C;&#x6240;&#x4EE5;&#x90A3;&#x65F6;&#x7684;&#x5C5E;&#x6027;&#x503C;&#x4E3A;0.15*&#xFF08;40-0&#xFF09;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;6&#x3002;</p>
<p>&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;&#x8BA1;&#x7B97;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#x5C5E;&#x6027;&#x503C;&#x7684;&#x8BA1;&#x7B97;&#x65B9;&#x6CD5;&#xFF0C;&#x5F53;&#x524D;&#x7684;&#x5C5E;&#x6027;&#x503C;=&#x63D2;&#x503C;*(end-begin)&#xFF0C;&#x8FD9;&#x4E2A;&#x516C;&#x5F0F;&#x4E0D;&#x6D89;&#x53CA;&#x5230;&#x8FD0;&#x884C;&#x65F6;&#x503C;&#x3002;</p>
<p>&#x7ED5;&#x4E86;&#x8FD9;&#x4E48;&#x4E00;&#x5927;&#x5806;&#xFF0C;&#x6211;&#x81EA;&#x5DF1;&#x90FD;&#x611F;&#x89C9;&#x4E00;&#x5934;&#x96FE;&#x6C34;&#xFF0C;&#x8FD9;&#x4E9B;&#x4E1C;&#x897F;&#x9700;&#x8981;&#x7B80;&#x660E;&#x7684;&#x53D9;&#x8FF0;&#x4E00;&#x904D;&#xFF1A;</p>
<blockquote>
<p>&#x9996;&#x5148;&#xFF0C;&#x4F7F;&#x7528;&#x5C5E;&#x6027;&#x52A8;&#x753B;&#x7684;&#x76F4;&#x63A5;&#x7C7B;&#x662F;ValueAnimator&#x548C;ObjectAnimator&#xFF08;&#x7EE7;&#x627F;&#x81EA;ValueAnimator&#xFF09;&#x3002;&#x800C;&#x5B83;&#x4EEC;&#x5185;&#x90E8;&#x7684;&#x5B9E;&#x73B0;&#x4F9D;&#x8D56;&#x4E8E;Interpolator&#xFF08;&#x8BA1;&#x7B97;&#x63D2;&#x503C;&#xFF09;&#x548C;TypeEvaluator&#xFF08;&#x8BA1;&#x7B97;&#x5C5E;&#x6027;&#x503C;&#xFF09;&#x3002;Interpolator&#x51B3;&#x5B9A;&#x4E86;&#x52A8;&#x753B;&#x7684;&#x6267;&#x884C;&#x8FDB;&#x5EA6;&#xFF0C;&#x5B83;&#x8F93;&#x51FA;&#x4E00;&#x4E2A;0&#x5230;1&#x4E4B;&#x95F4;&#x7684;&#x5C0F;&#x6570;&#xFF0C;&#x6BD4;&#x5982;0.5&#x5C31;&#x4EE3;&#x8868;&#x52A8;&#x753B;&#x5DF2;&#x7ECF;&#x6267;&#x884C;&#x4E86;&#x4E00;&#x534A;&#xFF0C;&#x800C;&#x5177;&#x4F53;&#x5230;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x8FD9;&#x4E2A;&#x7C7B;&#x5B9A;&#x4E49;&#x4EC0;&#x4E48;&#x662F;&#x52A8;&#x753B;&#x7684;&#x8FDB;&#x5EA6;&#x3001;&#x52A8;&#x753B;&#x7684;&#x8FDB;&#x5EA6;&#x600E;&#x4E48;&#x8BA1;&#x7B97;&#xFF0C;&#x6BD4;&#x5982;&#x5982;&#x679C;&#x662F;&#x4E00;&#x4E2A;&#x5E73;&#x79FB;&#xFF0C;&#x6211;&#x4EEC;&#x4EE5;&#x5E73;&#x79FB;&#x5BF9;&#x8C61;&#x7684;&#x79FB;&#x52A8;&#x8DDD;&#x79BB;&#x548C;&#x603B;&#x8DDD;&#x79BB;&#x6BD4;&#x6765;&#x51B3;&#x5B9A;&#x5F53;&#x524D;&#x52A8;&#x753B;&#x7684;&#x8FDB;&#x5EA6;&#x3002;&#x8FD9;&#x4E2A;&#x8FDB;&#x5EA6;&#x503C;&#x968F;&#x540E;&#x4F1A;&#x8F93;&#x51FA;&#x7ED9;TypeEvaluator&#xFF0C;TypeEvaluator&#x6839;&#x636E;&#x8FDB;&#x5EA6;&#x6765;&#x51B3;&#x5B9A;&#x5982;&#x4F55;&#x8BA1;&#x7B97;&#x5C5E;&#x6027;&#x503C;&#xFF0C;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x503C;&#x5C31;&#x662F;&#x52A8;&#x753B;&#x7684;key&#x503C;&#xFF0C;&#x6BD4;&#x5982;&#x4E00;&#x4E2A;&#x65CB;&#x8F6C;&#x52A8;&#x753B;&#x91CC;&#x8FD9;&#x4E2A;&#x503C;&#x662F;&#x65CB;&#x8F6C;&#x7684;&#x89D2;&#x5EA6;&#xFF0C;&#x6700;&#x540E;&#x8FD9;&#x4E2A;TypeEvaluator&#x7684;&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x5C31;&#x51B3;&#x5B9A;&#x4E86;&#x52A8;&#x753B;&#x7684;&#x6548;&#x679C;&#x3002;</p>
</blockquote>
<p>&#x4F7F;&#x7528;&#x5C5E;&#x6027;&#x52A8;&#x753B;&#x6700;&#x91CD;&#x8981;&#x7684;&#x5C31;&#x662F;&#x641E;&#x6E05;&#x695A;Interpolator&#x548C;TypeEvaluator&#x5230;&#x5E95;&#x662F;&#x5E72;&#x4EC0;&#x4E48;&#x7684;&#x3002;</p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x6765;&#x81EA;&#x5DF1;&#x5B8C;&#x6210;&#x7B80;&#x5355;&#x7684;demo&#x3002;</p>
<p>&#x9996;&#x5148;&#x662F;ValueAnimator&#xFF1A;</p>
<p>&#x5148;&#x6765;&#x770B;&#x770B;&#x6700;&#x540E;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x7ED8;&#x5236;&#x4E00;&#x4E2A;&#x77E9;&#x5F62;&#xFF0C;&#x5E76;&#x8BA9;&#x5B83;&#x4ECE;&#x5F00;&#x59CB;&#x4F4D;&#x7F6E;&#x79FB;&#x52A8;&#x5230;&#x7ED3;&#x675F;&#x4F4D;&#x7F6E;&#x3002;</p>
<p><img src="/2016/11/25/Android&#x52A8;&#x753B;&#x603B;&#x7ED3;/valueAnimation.gif" alt="valueAnimation"></p>
<p>&#x4E3A;&#x4E86;&#x793A;&#x610F;&#x81EA;&#x5B9A;&#x4E49;&#xFF0C;&#x6211;&#x6CA1;&#x6709;&#x4F7F;&#x7528;sdk&#x63D0;&#x4F9B;&#x7684;Rectangular&#x7C7B;&#xFF0C;&#x81EA;&#x5DF1;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#xFF0C;&#x5F88;&#x7B80;&#x5355;&#x3002;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zuliangwang.learnanimation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.graphics.Point;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * Created by zuliangwang on 16/11/26.</span><br><span class="line"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Rectangular</span> </span>{</span><br><span class="line"><span class="comment">//    Point left = new Point();</span></span><br><span class="line"><span class="comment">//    Point right = new Point();</span></span><br><span class="line"><span class="comment">//    Point</span></span><br><span class="line">    <span class="keyword">float</span> left;</span><br><span class="line">    <span class="keyword">float</span> right;</span><br><span class="line">    <span class="keyword">float</span> top;</span><br><span class="line">    <span class="keyword">float</span> bottom;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Rectangular</span><span class="params">(<span class="keyword">float</span> left, <span class="keyword">float</span> right, <span class="keyword">float</span> top, <span class="keyword">float</span> bottom)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.left = left;</span><br><span class="line">        <span class="keyword">this</span>.right = right;</span><br><span class="line">        <span class="keyword">this</span>.top = top;</span><br><span class="line">        <span class="keyword">this</span>.bottom = bottom;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getLeft</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> left;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLeft</span><span class="params">(<span class="keyword">float</span> left)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.left = left;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getRight</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> right;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRight</span><span class="params">(<span class="keyword">float</span> right)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.right = right;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getTop</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> top;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTop</span><span class="params">(<span class="keyword">float</span> top)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.top = top;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getBottom</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> bottom;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBottom</span><span class="params">(<span class="keyword">float</span> bottom)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.bottom = bottom;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x81EA;&#x5B9A;&#x4E49;TypeEvaluator&#xFF0C;&#x6839;&#x636E;&#x52A8;&#x753B;&#x8FDB;&#x5EA6;&#x6765;&#x51B3;&#x5B9A;&#x73B0;&#x5728;&#x77E9;&#x5F62;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zuliangwang.learnanimation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.animation.TypeEvaluator;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Point;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * Created by zuliangwang on 16/11/26.</span><br><span class="line"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestTypeEvaluator</span> <span class="keyword">implements</span> <span class="title">TypeEvaluator</span>&lt;<span class="title">Rectangular</span>&gt; </span>{</span><br><span class="line"></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Rectangular <span class="title">evaluate</span><span class="params">(<span class="keyword">float</span> fraction, Rectangular startValue, Rectangular endValue)</span> </span>{</span><br><span class="line">        <span class="keyword">float</span> top =startValue.top + fraction*(endValue.getTop()-startValue.getTop());</span><br><span class="line">        <span class="keyword">float</span> bottom = startValue.bottom + fraction*(endValue.getBottom()-startValue.getBottom());</span><br><span class="line">        <span class="keyword">float</span> left = startValue.left + fraction*(endValue.getLeft()-startValue.getLeft());</span><br><span class="line">        <span class="keyword">float</span> right = startValue.right + fraction*(endValue.getRight()-startValue.getRight());</span><br><span class="line"></span><br><span class="line">        Rectangular rectangular = <span class="keyword">new</span> Rectangular(left,right,top,bottom);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> rectangular;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x6700;&#x540E;&#x662F;&#x81EA;&#x5B9A;&#x4E49;&#x8FD9;&#x4E2A;&#x77E9;&#x5F62;view&#xFF1A;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zuliangwang.learnanimation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.animation.ValueAnimator;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Canvas;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Color;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Paint;</span><br><span class="line"><span class="keyword">import</span> android.util.AttributeSet;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * Created by zuliangwang on 16/11/26.</span><br><span class="line"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAnimObject</span> <span class="keyword">extends</span> <span class="title">View</span> </span>{</span><br><span class="line">    Rectangular mRectangular;</span><br><span class="line">    Rectangular beginRectangular;</span><br><span class="line">    Rectangular endRectangualar;</span><br><span class="line">    Paint mPaint;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyAnimObject</span><span class="params">(Context context)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>(context);</span><br><span class="line">        mPaint = <span class="keyword">new</span> Paint();</span><br><span class="line">        mPaint.setColor(Color.BLUE);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyAnimObject</span><span class="params">(Context context, AttributeSet attrs)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>(context, attrs);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyAnimObject</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>(context, attrs, defStyleAttr);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas canvas)</span> </span>{</span><br><span class="line">        canvas.drawRect(mRectangular.left,mRectangular.top,mRectangular.right,mRectangular.bottom,mPaint);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startAnimation</span><span class="params">()</span></span>{</span><br><span class="line">        beginRectangular = <span class="keyword">new</span> Rectangular(<span class="number">0</span>,<span class="number">300</span>,<span class="number">50</span>,<span class="number">350</span>);</span><br><span class="line">        endRectangualar = <span class="keyword">new</span> Rectangular(<span class="number">200</span>,<span class="number">500</span>,<span class="number">150</span>,<span class="number">450</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        ValueAnimator valueAnimator = ValueAnimator.ofObject(<span class="keyword">new</span> TestTypeEvaluator(),beginRectangular,endRectangualar);</span><br><span class="line">        valueAnimator.setRepeatCount(<span class="number">10</span>);</span><br><span class="line">        valueAnimator.addUpdateListener(<span class="keyword">new</span> ValueAnimator.AnimatorUpdateListener() {</span><br><span class="line">            <span class="annotation">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAnimationUpdate</span><span class="params">(ValueAnimator animation)</span> </span>{</span><br><span class="line">                mRectangular = (Rectangular) animation.getAnimatedValue();</span><br><span class="line">                invalidate();</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line"></span><br><span class="line">        valueAnimator.setDuration(<span class="number">3000</span>);</span><br><span class="line">        valueAnimator.start();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x91CD;&#x70B9;&#x662F;&#x8FD9;&#x91CC;&#x7684;UpdateListener&#xFF0C;&#x8FD9;&#x91CC;&#x662F;&#x5B9E;&#x73B0;&#x8FD9;&#x4E2A;&#x52A8;&#x753B;&#x7684;&#x5173;&#x952E;&#x3002;</p>
<p>&#x7B80;&#x8981;&#x8BF4;&#x660E;&#x4E00;&#x4E0B;&#x903B;&#x8F91;&#xFF1A;</p>
<blockquote>
<p>ValueAimator&#x5176;&#x5B9E;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x7B80;&#x5355;&#x7684;&#x6570;&#x636E;&#x8BA1;&#x7B97;&#x5DE5;&#x5177;&#xFF0C;&#x5B83;&#x4E0D;&#x50CF;ObjectAnimator&#x90A3;&#x6837;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5B9E;&#x73B0;&#x5BF9;view&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x56E0;&#x6B64;&#x5B9E;&#x9645;&#x4E0A;&#x6211;&#x4EEC;&#x4F7F;&#x7528;ValueAnimator&#x8981;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x7684;&#x5185;&#x5BB9;&#x4F1A;&#x66F4;&#x591A;&#xFF0C;&#x5728;&#x8FD9;&#x91CC;ValueAnimator&#x6BCF;&#x6B21;&#x8BA1;&#x7B97;&#x5B8C;&#x5F53;&#x524D;&#x5E27;&#x7684;&#x7ED3;&#x679C;&#x5C31;&#x4F1A;&#x56DE;&#x8C03;update&#x76D1;&#x542C;&#x5668;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x76D1;&#x542C;&#x5668;&#x91CC;&#x91CD;&#x65B0;&#x8BBE;&#x7F6E;&#x77E9;&#x5F62;&#x7684;&#x5750;&#x6807;&#x503C;&#x5E76;&#x624B;&#x52A8;&#x8C03;&#x7528;<code>invalidate</code>&#x91CD;&#x7ED8;&#x77E9;&#x5F62;&#x3002;</p>
<p>ObjectAnimator&#x76F8;&#x6BD4;ValueAnimator&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x628A;&#x624B;&#x52A8;&#x8BBE;&#x7F6E;Update&#x8FD9;&#x4E00;&#x6B65;&#x7701;&#x7565;&#x4E86;&#x800C;&#x5DF2;&#xFF0C;&#x4F60;&#x53EA;&#x8981;&#x8F93;&#x5165;&#x5C5E;&#x6027;&#x503C;&#xFF0C;&#x5B83;&#x4F1A;&#x81EA;&#x52A8;&#x53BB;&#x5B9E;&#x73B0;&#x7C7B;&#x4F3C;Update&#x8FD9;&#x79CD;&#x903B;&#x8F91;&#x3002;</p>
</blockquote>
<p>&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;&#x4E00;&#x4E2A;&#x66F4;&#x7B80;&#x5355;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;</p>
<figure class="highlight monkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">package com.zuliangwang.learnanimation;</span><br><span class="line"></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> android.animation.Animator;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> android.animation.ObjectAnimator;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> android.animation.ValueAnimator;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> android.graphics.drawable.AnimationDrawable;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> android.support.v7.app.AppCompatActivity;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> android.os.Bundle;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> android.util.Log;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> android.view.View;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> android.view.animation.Animation;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> android.view.animation.AnimationSet;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> android.view.animation.AnimationUtils;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> android.widget.Button;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> android.widget.ImageView;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> android.widget.LinearLayout;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> android.widget.TextView;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> {</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String TAG = <span class="string">&quot;Animation&quot;</span>;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) {</span><br><span class="line">        <span class="variable">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> TextView textView = (TextView) findViewById(R.id.test_text);</span><br><span class="line"></span><br><span class="line">        float begin=<span class="number">0</span>;</span><br><span class="line">        float <span class="keyword">end</span>=<span class="number">360</span>;</span><br><span class="line">        ValueAnimator valueAnimator = ValueAnimator.ofFloat(begin,<span class="keyword">end</span>);</span><br><span class="line">        valueAnimator.setDuration(<span class="number">3000</span>);</span><br><span class="line">        valueAnimator.addUpdateListener(<span class="keyword">new</span> ValueAnimator.AnimatorUpdateListener() {</span><br><span class="line">            @Override</span><br><span class="line">            <span class="keyword">public</span> void onAnimationUpdate(ValueAnimator animation) {</span><br><span class="line">                <span class="built_in">Log</span>.d(TAG,(Float)animation.getAnimatedValue()+<span class="string">&quot;&quot;</span>);</span><br><span class="line">                textView.setRotation((Float) animation.getAnimatedValue());</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line">        valueAnimator.start();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x91CC;&#x5C31;&#x662F;&#x65CB;&#x8F6C;&#x4E00;&#x4E2A;TextView&#xFF0C;&#x5728;&#x8FD9;&#x91CC;&#x5F88;&#x660E;&#x663E;&#x7684;&#x53EF;&#x4EE5;&#x770B;&#x5230;ValueAnimator&#x4EC5;&#x4EC5;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x8BA1;&#x7B97;&#x5DE5;&#x5177;&#xFF0C;&#x4F60;&#x53EF;&#x80FD;&#x4F1A;&#x95EE;&#x8FD9;&#x91CC;&#x4E3A;&#x4EC0;&#x4E48;&#x6CA1;&#x6709;&#x8C03;&#x7528;<code>invalidate()</code>&#xFF0C;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;sdk&#x91CC;&#x7684;view&#x548C;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x624B;&#x52A8;&#x5B9A;&#x4E49;&#x7684;view&#x4E0D;&#x540C;&#xFF0C;&#x5728;&#x8FD9;&#x4E2A;setRotation&#x65B9;&#x6CD5;&#x91CC;&#x5B83;&#x4F1A;&#x4E3B;&#x52A8;&#x53BB;&#x8C03;&#x7528;<code>invalidate()</code>&#x3002;</p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x6765;&#x770B;ObjectAnimator&#xFF1A;</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">package com.zuliangwang.learnanimation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.animation.Animator;</span><br><span class="line"><span class="keyword">import</span> android.animation.ObjectAnimator;</span><br><span class="line"><span class="keyword">import</span> android.animation.ValueAnimator;</span><br><span class="line"><span class="keyword">import</span> android.graphics.drawable.AnimationDrawable;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.animation.Animation;</span><br><span class="line"><span class="keyword">import</span> android.view.animation.AnimationSet;</span><br><span class="line"><span class="keyword">import</span> android.view.animation.AnimationUtils;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView;</span><br><span class="line"><span class="keyword">import</span> android.widget.LinearLayout;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>{</span><br><span class="line"></span><br><span class="line">    private <span class="built_in">String</span> TAG = <span class="string">&quot;Animation&quot;</span>;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected <span class="keyword">void</span> onCreate(Bundle savedInstanceState) {</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        final TextView textView = (TextView) findViewById(R.id.test_text);</span><br><span class="line"></span><br><span class="line">        float begin=<span class="number">0</span>;</span><br><span class="line">        float end=<span class="number">360</span>;</span><br><span class="line"><span class="comment">//        ValueAnimator valueAnimator = ValueAnimator.ofFloat(begin,end);</span></span><br><span class="line"><span class="comment">//        valueAnimator.setDuration(3000);</span></span><br><span class="line"><span class="comment">//        valueAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {</span></span><br><span class="line"><span class="comment">//            @Override</span></span><br><span class="line"><span class="comment">//            public void onAnimationUpdate(ValueAnimator animation) {</span></span><br><span class="line"><span class="comment">//                Log.d(TAG,(Float)animation.getAnimatedValue()+&quot;&quot;);</span></span><br><span class="line"><span class="comment">//                textView.setRotation((Float) animation.getAnimatedValue());</span></span><br><span class="line"><span class="comment">//                textView.invalidate();</span></span><br><span class="line"><span class="comment">//            }</span></span><br><span class="line"><span class="comment">//        });</span></span><br><span class="line"><span class="comment">//        valueAnimator.start();</span></span><br><span class="line"></span><br><span class="line">        ObjectAnimator objectAnimator = ObjectAnimator.ofFloat(textView,<span class="string">&quot;rotation&quot;</span>,begin,end);</span><br><span class="line">        objectAnimator.setDuration(<span class="number">3000</span>);</span><br><span class="line">        objectAnimator.start();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x770B;&#x5230;&#x4E86;&#x6CA1;&#x6709;&#xFF0C;&#x8FD9;&#x4E09;&#x884C;&#x4EE3;&#x7801;&#x548C;&#x4E0A;&#x9762;&#x7684;ValueAnimator&#x5B8C;&#x6210;&#x7684;&#x529F;&#x80FD;&#x662F;&#x5B8C;&#x5168;&#x76F8;&#x540C;&#x7684;&#x3002;ObjectAnimator&#x505A;&#x4E86;&#x4E00;&#x4E2A;&#x4EC0;&#x4E48;&#x5DE5;&#x4F5C;&#x5462;&#xFF1F;&#x5B83;&#x6839;&#x636E;&#x6211;&#x4EEC;&#x8F93;&#x5165;&#x7684;&#x5BF9;&#x8C61;&#x548C;&#x5C5E;&#x6027;&#x540D;&#x53BB;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x91CC;&#x627E;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#xFF0C;&#x7136;&#x540E;&#x6BCF;&#x6B21;&#x66F4;&#x65B0;&#x65F6;&#x53BB;&#x66F4;&#x65B0;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x503C;&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E0A;&#x9762;&#x7684;&#x90A3;&#x4E00;&#x56DE;&#x4E8B;&#x3002;</p>
<p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;ObjectAnimator&#x641C;&#x5BFB;&#x66F4;&#x65B0;&#x5C5E;&#x6027;&#x503C;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;&#x975E;&#x5E38;&#x7684;&#x7B80;&#x5355;&#x7C97;&#x66B4;&#xFF0C;&#x4F20;&#x5165;&#x5BF9;&#x8C61;.setXXX()&#x548C;&#x4F20;&#x5165;&#x5BF9;&#x8C61;.getXXX()&#xFF0C;&#x56E0;&#x6B64;&#x4F60;&#x5982;&#x679C;&#x8981;&#x4F7F;&#x7528;ObjectAnimator&#xFF0C;&#x4F60;&#x4F20;&#x5165;&#x7684;&#x5C5E;&#x6027;&#x503C;&#x5FC5;&#x987B;&#x6709;get&#x548C;set&#x65B9;&#x6CD5;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#xFF0C;&#x90A3;&#x4F60;&#x53EA;&#x80FD;&#x53E6;&#x60F3;&#x529E;&#x6CD5;&#x4E86;&#x3002;</p>
<p>Animator&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x5B50;&#x7C7B;AnimatorSet&#xFF0C;&#x8FD9;&#x4E2A;&#x7C7B;&#x6211;&#x4E0D;&#x60F3;&#x8BB2;&#x4E86;&#xFF0C;&#x5982;&#x679C;&#x641E;&#x61C2;&#x4E86;&#x524D;&#x9762;&#x7684;ValueAnimator&#x548C;ObjectAnimator&#xFF0C;&#x90A3;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x96C6;&#x5408;&#x662F;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x7684;&#x3002;</p>
<p>&#x52A8;&#x753B;&#x7684;&#x5206;&#x6790;&#x5230;&#x8FD9;&#x91CC;&#x5C31;&#x7ED3;&#x675F;&#x4E86;&#xFF0C;&#x5C5E;&#x6027;&#x52A8;&#x753B;&#x66F4;&#x6DF1;&#x5165;&#x7684;&#x7528;&#x6CD5;&#x8FD8;&#x662F;&#x5728;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E0A;&#x518D;&#x8BA8;&#x8BBA;&#x3002;</p>
<blockquote>
<p>&#x53C2;&#x8003;&#x7F51;&#x7AD9;&#xFF1A;</p>
<p>Android&#x5B98;&#x65B9;&#x7F51;&#x7AD9;</p>
<p><a href="https://developer.android.com/guide/topics/graphics/view-animation.html" target="_blank" rel="external">https://developer.android.com/guide/topics/graphics/view-animation.html</a></p>
<p>&#x535A;&#x5BA2;&#xFF1A;</p>
<p><a href="http://blog.csdn.net/yanbober/article/details/46481171" target="_blank" rel="external">http://blog.csdn.net/yanbober/article/details/46481171</a></p>
<p><a href="http://blog.csdn.net/sinyu890807/article/details/44171115" target="_blank" rel="external">http://blog.csdn.net/sinyu890807/article/details/44171115</a></p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-常用ADB命令总结" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/11/23/常用ADB命令总结/" class="article-date">
  	<time datetime="2016-11-23T14:49:32.000Z" itemprop="datePublished">2016-11-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/23/常用ADB命令总结/">常用ADB命令总结</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1.&#x8FDE;&#x63A5;&#x547D;&#x4EE4;</p>
<p>adb -d &#x76F4;&#x63A5;&#x5728;&#x552F;&#x4E00;&#x8FDE;&#x63A5;&#x7684;&#x5B9E;&#x4F53;&#x673A;&#x4E0A;&#x64CD;&#x4F5C;</p>
<p>adb -e &#x76F4;&#x63A5;&#x5728;&#x552F;&#x4E00;&#x8FDE;&#x63A5;&#x7684;&#x865A;&#x62DF;&#x673A;&#x4E0A;&#x64CD;&#x4F5C;</p>
<p>adb -s \<specific device=""> &#x5728;&#x6307;&#x5B9A;&#x8BBE;&#x5907;&#x53F7;&#x4E0A;&#x7684;&#x624B;&#x673A;&#x4E0A;&#x64CD;&#x4F5C;&#xFF08;&#x53EF;&#x4EE5;&#x662F;&#x865A;&#x62DF;&#x673A;&#x6216;&#x8005;&#x662F;&#x5B9E;&#x4F53;&#x673A;&#xFF09;</specific></p>
<p>adb -a &#x5728;&#x6240;&#x6709;&#x673A;&#x5668;&#x4E0A;&#x64CD;&#x4F5C;</p>
<p>adb devices &#x67E5;&#x770B;&#x5F53;&#x524D;&#x8FDE;&#x63A5;&#x7684;&#x6240;&#x6709;&#x8BBE;&#x5907;&#x7684;&#x8BBE;&#x5907;&#x53F7;</p>
<p>adb connect &#x4F7F;&#x7528;TCP/IP&#x534F;&#x8BAE;&#x8FDE;&#x63A5;&#x8BBE;&#x5907;</p>
<p>adb disconnect &#x65AD;&#x5F00;&#x8FDE;&#x63A5;</p>
<p>2.&#x8BBE;&#x5907;&#x547D;&#x4EE4;</p>
<p>adb push &#x590D;&#x5236;&#x6587;&#x4EF6;&#x6216;&#x662F;&#x76EE;&#x5F55;&#x5230;&#x8BBE;&#x5907;&#x4E0A;</p>
<p>adb pull &#x4ECE;&#x76EE;&#x6807;&#x8BBE;&#x5907;&#x4E0A;&#x590D;&#x5236;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#x5230;&#x672C;&#x673A;&#x4E0A;</p>
<p>adb sync &#xFF1F;&#xFF1F;&#xFF1F;</p>
<p>adb shell &#x6253;&#x5F00;&#x8BBE;&#x5907;&#x7684;shell</p>
<p>adb emu &#xFF1F;&#xFF1F;</p>
<p>adb logcat &#x67E5;&#x770B;&#x76EE;&#x6807;&#x8BBE;&#x5907;&#x7684;log</p>
<p>adb install &#x5B89;&#x88C5;apk</p>
<p>adb uninstall &#x5378;&#x8F7D;apk</p>
<p>&#x4F7F;&#x7528;&#x547D;&#x4EE4;&#x65F6;&#x8FDE;&#x63A5;&#x548C;&#x8BBE;&#x5907;&#x547D;&#x4EE4;&#x8981;&#x4E00;&#x8D77;&#x4F7F;&#x7528;</p>
<p>&#x5982;&#x5B89;&#x88C5;&#x4E00;&#x4E2A;&#x5F53;&#x524D;&#x76EE;&#x5F55;&#x4E0B;&#x7684;apk&#x5230;&#x76EE;&#x6807;&#x8BBE;&#x5907;&#x4E0B;</p>
<p>adb -s &#x8BBE;&#x5907;&#x53F7; install apkName.apk</p>
<p>&#x53E6;&#x8865;&#x5145;&#x4E00;&#x4E2A;&#x6BD4;&#x8F83;&#x5B9E;&#x7528;&#x7684;&#x547D;&#x4EE4;&#xFF1A;</p>
<p>&#x6709;&#x65F6;&#x5019;&#x5728;Android Studio&#x4E0A;&#x4F1A;&#x78B0;&#x5230;&#x627E;&#x4E0D;&#x5230;&#x8BBE;&#x5907;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x901A;&#x5E38;&#x901A;&#x8FC7;&#x91CD;&#x65B0;&#x542F;&#x52A8;ADB&#x5C31;&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x91CD;&#x542F;&#x7684;&#x547D;&#x4EE4;&#x662F;</p>
<p><code>adb kill-server</code>&#x548C;<code>adb start-server</code></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-View、Window、Activity的关系" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/11/23/View、Window、Activity的关系/" class="article-date">
  	<time datetime="2016-11-23T14:49:32.000Z" itemprop="datePublished">2016-11-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/23/View、Window、Activity的关系/">View、Window、Activity的关系</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#x4E00;&#x4E2A;Android&#x5E94;&#x7528;&#x7684;&#x89C6;&#x56FE;&#x662F;&#x5982;&#x4F55;&#x5448;&#x73B0;&#x51FA;&#x6765;&#x5462;&#xFF1F;</p>
<p>&#x65B0;&#x624B;&#x53EF;&#x80FD;&#x56E0;&#x4E3A;&#x6CA1;&#x6709;&#x63A5;&#x89E6;&#x8FC7;Window&#x800C;&#x8BA4;&#x4E3A;&#x662F;Activity&#x6216;&#x8005;&#x662F;View&#xFF0C;&#x6211;&#x5728;&#x521A;&#x5F00;&#x59CB;&#x5B66;&#x4E60;Android &#x7684;&#x65F6;&#x5019;&#x5C31;&#x8BA4;&#x4E3A;&#x4E00;&#x4E2A;Activity&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x753B;&#x677F;&#x4E00;&#x6837;&#x7684;&#x4E1C;&#x897F;&#xFF0C;&#x4F46;&#x662F;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x89C6;&#x56FE;&#x7684;&#x771F;&#x6B63;&#x4EE3;&#x8868;&#x7C7B;&#x662F;Window&#x3002;&#x6240;&#x8C13;&#x7684;&#x89C6;&#x56FE;&#x4EE3;&#x8868;&#x7C7B;&#x7684;&#x610F;&#x601D;&#x5C31;&#x662F;&#x6307;&#x771F;&#x6B63;&#x7684;&#x7ED8;&#x5236;&#x5DE5;&#x4F5C;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;Activity&#x672C;&#x8EAB;&#x4E0D;&#x8D1F;&#x8D23;&#x7ED8;&#x5236;UI&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x4E2D;&#x8F6C;&#x63A7;&#x5236;&#x7C7B;&#xFF0C;&#x6211;&#x4EEC;&#x628A;View&#x4EA4;&#x7ED9;&#x4ED6;&#xFF0C;&#x4ED6;&#x8D1F;&#x8D23;&#x8BA9;Window&#x53BB;&#x7ED8;&#x5236;&#x6211;&#x4EEC;&#x7ED9;&#x5B83;&#x7684;View&#xFF0C;&#x4ECE;&#x800C;&#x8BA9;Android&#x5448;&#x73B0;&#x51FA;&#x89C6;&#x56FE;&#xFF0C;&#x5982;&#x679C;&#x4E00;&#x4E2A;Activity&#x6CA1;&#x6709;Window&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x7684;&#x4F5C;&#x7528;&#x5C31;&#x548C;Service&#x7C7B;&#x4F3C;&#x4E86;&#x3002;</p>
<p>&#x6309;&#x7167;&#x8FD9;&#x4E2A;&#x601D;&#x8DEF;&#x6765;&#x60F3;&#xFF0C;&#x5F88;&#x663E;&#x7136;&#x7684;&#xFF0C;&#x4E00;&#x4E2A;Acitivity&#x5FC5;&#x7136;&#x6301;&#x6709;&#x4E00;&#x4E2A;Window&#x7684;&#x5F15;&#x7528;&#x4EE5;&#x53CA;&#x4E00;&#x5957;View&#x7684;&#x63A7;&#x5236;&#x673A;&#x5236;&#x3002;</p>
<p>Window&#x5177;&#x4F53;&#x7684;&#x5B9E;&#x73B0;&#x548C;&#x5185;&#x5BB9;&#x6211;&#x4EEC;&#x4E0D;&#x8C08;&#xFF0C;&#x8FD9;&#x4E9B;&#x4E1C;&#x897F;&#x6D89;&#x53CA;&#x5230;&#x5E95;&#x5C42;&#x7684;&#x771F;&#x6B63;&#x7684;&#x7ED8;&#x56FE;&#x7684;OpenGL&#x8FD9;&#x6837;&#x7684;&#x73A9;&#x610F;&#xFF0C;&#x5B83;&#x5FC5;&#x7136;&#x662F;&#x7531;C++&#x6765;&#x5B9E;&#x73B0;&#x7684;&#x3002;</p>
<p>&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x7684;&#x91CD;&#x70B9;&#x5C31;&#x662F;View&#x7684;&#x8FD9;&#x5957;&#x63A7;&#x5236;&#x673A;&#x5236;&#xFF0C;Activity&#x662F;&#x5982;&#x4F55;&#x63A7;&#x5236;&#x6211;&#x4EEC;&#x4EA4;&#x7ED9;&#x5B83;&#x7684;View&#x7684;&#xFF1F;&#x5F88;&#x591A;&#x4E66;&#x91CC;&#x90FD;&#x90FD;&#x4F1A;&#x8C08;&#x5230;ViewRoot&#x548C;DecorView&#x8FD9;&#x4E9B;&#x4E1C;&#x897F;&#xFF0C;&#x4F46;&#x662F;&#x4E0D;&#x660E;&#x786E;&#x521A;&#x624D;&#x8BF4;&#x7684;&#x524D;&#x63D0;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8BF4;&#x4E86;&#x534A;&#x5929;&#x4E5F;&#x4E0D;&#x77E5;&#x9053;&#x662F;&#x5728;&#x5E72;&#x4EC0;&#x4E48;&#x3002;</p>
<p>&#x5148;&#x7B80;&#x5355;&#x7684;&#x8BF4;&#x4E00;&#x4E0B;Window&#x548C;Activity&#xFF1A;</p>
<p>(1)&#x6BCF;&#x4E00;&#x4E2A;Activity&#x5B9E;&#x4F8B;&#x91CC;&#x90FD;&#x5B58;&#x5728;&#x4E00;&#x4E2A;Window&#x5B9E;&#x4F8B;&#xFF0C;&#x5728;Activity&#x88AB;ActivityThread&#x521B;&#x5EFA;&#x65F6;&#x8C03;&#x7528;Activity&#x7684;attch&#x65B9;&#x6CD5;&#x5C06;Window&#x5B9E;&#x4F8B;&#x4E0E;Activity&#x5B9E;&#x4F8B;&#x7ED1;&#x5B9A;&#x3002;</p>
<p>(2)Acitivity&#x8C03;&#x7528;setContentView&#x65B9;&#x6CD5;&#x5B9E;&#x9645;&#x4E0A;&#x8C03;&#x7528;&#x7684;&#x662F;Window&#x7684;setContentView&#x65B9;&#x6CD5;&#x3002;</p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x5F00;&#x59CB;View&#xFF1A;</p>
<p>&#x5148;&#x641E;&#x6E05;&#x695A;ViewRoot&#x548C;DecorView&#x4E24;&#x8005;&#x3002;</p>
<p>ViewRoot&#x51C6;&#x786E;&#x7684;&#x8BF4;&#x8FD9;&#x4E2A;&#x7C7B;&#x662F;ViewRootImpl&#xFF0C;&#x5B83;&#x662F;WindowManagerService&#x548C;DecorView&#x7684;&#x8FDE;&#x63A5;&#x8005;&#xFF0C;&#x4ECE;&#x8FD9;&#x4E2A;&#x89D2;&#x5EA6;&#x6765;&#x770B;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x8BF4;&#x662F;ViewRoot&#x7684;&#x66F4;&#x4E0A;&#x4E00;&#x5C42;&#xFF0C;&#x4F46;&#x662F;ViewRoot&#x672C;&#x8EAB;&#x6CA1;&#x6709;&#x7EE7;&#x627F;View&#xFF0C;&#x5B83;&#x4E0D;&#x5728;View&#x6811;&#x8FD9;&#x4E2A;&#x5C42;&#x6B21;&#x91CC;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x628A;ViewRoot&#x7406;&#x89E3;&#x4E3A;Activity&#x7BA1;&#x7406;View&#x6811;&#x7684;&#x4E2D;&#x4ECB;&#xFF0C;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x89E6;&#x6478;&#x4E8B;&#x4EF6;&#x3001;&#x5237;&#x65B0;&#x4E8B;&#x4EF6;&#x90FD;&#x662F;&#x901A;&#x8FC7;ViewRoot&#x4F20;&#x9012;&#x7ED9;View&#x6811;&#x3002;</p>
<p>&#x800C;DecorView&#x5C31;&#x662F;View&#x6811;&#x7684;&#x9876;&#x5C42;&#x4E86;&#xFF0C;&#x5B83;&#x7EE7;&#x627F;&#x81EA;FrameLayout&#xFF0C;&#x4E00;&#x4E2A;Acitivity&#x91CC;&#x7684;&#x6240;&#x6709;View&#x90FD;&#x5728;&#x8FD9;&#x4E2A;Decor&#x7684;&#x4E0B;&#x9762;&#xFF0C;DecorView&#x901A;&#x5E38;&#x5305;&#x542B;&#x4E00;&#x4E2A;LinearLayout&#xFF0C;&#x5B83;&#x7684;&#x5B50;view&#x662F;&#x4E0A;&#x4E0B;&#x4E24;&#x4E2A;&#x90E8;&#x5206;&#xFF08;&#x6839;&#x636E;&#x7248;&#x672C;&#x4E0D;&#x540C;&#x6709;&#x533A;&#x522B;&#xFF09;&#x3002;</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-Android Hook机制学习" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/11/23/Android Hook机制学习/" class="article-date">
  	<time datetime="2016-11-23T10:33:20.000Z" itemprop="datePublished">2016-11-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/23/Android Hook机制学习/">Android Hook机制学习</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1.What?</p>
<p>Hook&#x662F;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;</p>
<p>&#x7B80;&#x5355;&#x7684;&#x6765;&#x8BF4;&#xFF0C;&#x52AB;&#x6301;&#x3002;&#x800C;&#x52AB;&#x6301;&#x7A0B;&#x5E8F;&#x5C31;&#x662F;&#x66FF;&#x6362;&#x5B83;&#x539F;&#x672C;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x903B;&#x8F91;&#xFF0C;&#x800C;&#x8F6C;&#x8FC7;&#x6765;&#x6267;&#x884C;&#x6211;&#x4EEC;&#x63D2;&#x5165;&#x7684;&#x4EE3;&#x7801;&#x3002;</p>
<p>&#x6211;&#x76EE;&#x524D;&#x63A5;&#x89E6;&#x8FC7;&#x7684;Hook&#x6280;&#x672F;&#x6709;C&#x8BED;&#x8A00;&#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x6808;&#x6EA2;&#x51FA;&#x653B;&#x51FB;&#x3002;&#x800C;Android&#x4E2D;&#x7684;Hook&#x7684;&#x7ECF;&#x5178;&#x5B9E;&#x73B0;&#x662F;Xposed&#x6846;&#x67B6;&#x3002;&#x8FD9;&#x4E2A;&#x6846;&#x67B6;&#x7684;&#x57FA;&#x672C;&#x539F;&#x7406;&#x548C;&#x7F13;&#x51B2;&#x533A;&#x6EA2;&#x51FA;&#x653B;&#x51FB;&#x6709;&#x4E9B;&#x4E0D;&#x540C;&#xFF0C;&#x5B83;&#x5229;&#x7528;&#x7684;&#x662F;Android&#x672C;&#x8EAB;&#x8FD0;&#x884C;App&#x7684;&#x65B9;&#x5F0F;&#x3002;</p>
<p>&#x5728;Android&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x4E00;&#x4E2A;App&#x7684;&#x8FD0;&#x884C;&#x8981;&#x501F;&#x52A9;&#x4E8E;&#x865A;&#x62DF;&#x673A;&#x8FDB;&#x7A0B;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x90FD;&#x77E5;&#x9053;Android&#x7CFB;&#x7EDF;&#x7684;&#x5E95;&#x5C42;&#x5176;&#x5B9E;&#x662F;&#x7531;C++&#x7F16;&#x5199;&#x7684;Linux&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x6837;&#x7684;&#x7CFB;&#x7EDF;&#x5982;&#x4F55;&#x8FD0;&#x884C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;Java&#x7F16;&#x5199;&#x7684;&#x4E0A;&#x5C42;App&#x5462;&#xFF1F;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x4E3A;&#x6BCF;&#x4E00;&#x4E2A;App&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x673A;&#x8FDB;&#x7A0B;&#xFF0C;App&#x5728;&#x865A;&#x62DF;&#x673A;&#x4E2D;&#x8FD0;&#x884C;&#x5C31;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#x4E86;&#x3002;Android&#x4E2D;&#x6709;&#x4E00;&#x4E2A;&#x7279;&#x6B8A;&#x7684;&#x8FDB;&#x7A0B;&#x8D1F;&#x8D23;&#x521B;&#x5EFA;&#x8FD9;&#x4E9B;&#x865A;&#x62DF;&#x673A;&#x8FDB;&#x7A0B;&#xFF0C;&#x5B83;&#x5C31;&#x662F;Zygote&#x8FDB;&#x7A0B;&#xFF0C;Zygote&#x8FDB;&#x7A0B;&#x5728;&#x521B;&#x5EFA;&#x65F6;&#x3002;&#x6BCF;&#x4E00;&#x6B21;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x673A;&#x8FDB;&#x7A0B;&#x90FD;&#x662F;&#x4ECE;Zygote&#x8FDB;&#x7A0B;fork&#x51FA;&#x6765;&#xFF0C;&#x5B66;&#x8FC7;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x540C;&#x5B66;&#x90FD;&#x77E5;&#x9053;&#x6240;&#x8C13;&#x7684;fork&#x521B;&#x5EFA;&#x5C31;&#x662F;&#x53BB;&#x62F7;&#x8D1D;&#x4E00;&#x4EFD;&#x8FDB;&#x7A0B;&#x7684;&#x5907;&#x4EFD;&#xFF0C;&#x56E0;&#x6B64;&#x6BCF;&#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x673A;&#x8FDB;&#x7A0B;&#x90FD;&#x4F1A;&#x4EAB;&#x6709;&#x8FD9;&#x4E2A;Zygote&#x8FDB;&#x7A0B;&#x7684;&#x6240;&#x6709;&#x8D44;&#x6E90;&#xFF0C;&#x6BD4;&#x5982;&#x8FD0;&#x884C;&#x65F6;&#x5E93;&#xFF0C;&#x56E0;&#x6B64;&#x53EA;&#x8981;&#x80FD;&#x4FEE;&#x6539;Zygote&#x8FDB;&#x7A0B;&#xFF0C;&#x7406;&#x8BBA;&#x4E0A;&#x5C31;&#x80FD;&#x63A7;&#x5236;&#x6240;&#x6709;&#x5176;&#x4ED6;&#x5E94;&#x7528;&#x8FDB;&#x7A0B;&#xFF0C;Xposed&#x6B63;&#x662F;&#x901A;&#x8FC7;&#x4FEE;&#x6539;Zygote&#x8FDB;&#x7A0B;&#x6765;&#x5B8C;&#x6210;&#x52AB;&#x6301;&#x7684;&#x3002;</p>
<p>&#x6CE8;&#xFF1A;&#x8FD9;&#x91CC;&#x7684;&#x865A;&#x62DF;&#x673A;&#x8FDB;&#x7A0B;&#x6307;&#x7684;&#x662F;&#x8FD0;&#x884C;&#x4E86;&#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x673A;&#x5B9E;&#x4F8B;&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x800C;Java&#x7A0B;&#x5E8F;&#x5C31;&#x5728;&#x8FD9;&#x4E2A;&#x865A;&#x62DF;&#x673A;&#x5B9E;&#x4F8B;&#x4E2D;&#x8FD0;&#x884C;&#x3002;&#x6211;&#x7B80;&#x5355;&#x7684;&#x7406;&#x4E00;&#x4E0B;&#x8FD9;&#x4E2A;&#x5173;&#x7CFB;&#xFF1A;Zygote&#x8FDB;&#x7A0B;-&gt;&#x62F7;&#x8D1D;&#x4E00;&#x4EFD;&#x5E94;&#x7528;&#x8FDB;&#x7A0B;-&gt;&#x62E5;&#x6709;&#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x673A;&#x5B9E;&#x4F8B;-&gt;&#x8FD0;&#x884C;Java&#x7A0B;&#x5E8F;&#x3002;&#x901A;&#x8FC7;&#x8FD9;&#x6837;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;Android&#x7CFB;&#x7EDF;&#x53EA;&#x9700;&#x8981;&#x5BF9;&#x865A;&#x62DF;&#x673A;&#x521D;&#x59CB;&#x5316;&#x4E00;&#x6B21;&#xFF0C;&#x4EE5;&#x540E;&#x6BCF;&#x4E00;&#x6B21;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;&#x53EA;&#x7528;&#x62F7;&#x8D1D;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#xFF0C;&#x4E14;&#x5BF9;&#x4E8E;&#x9759;&#x6001;&#x5E93;&#xFF0C;&#x6240;&#x6709;&#x865A;&#x62DF;&#x673A;&#x4E0E;Zygote&#x8FDB;&#x7A0B;&#x5171;&#x4EAB;&#xFF0C;&#x8FD9;&#x4E5F;&#x53EF;&#x4EE5;&#x8282;&#x7701;&#x5185;&#x5B58;&#x3002;</p>
<p>Xposed&#x7684;&#x6700;&#x7EC8;&#x6548;&#x679C;&#x662F;&#x5B9E;&#x73B0;&#x5BF9;&#x65B9;&#x6CD5;&#x7684;&#x52AB;&#x6301;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5BF9;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x7684;&#x5185;&#x5BB9;&#x8FDB;&#x884C;&#x91CD;&#x5199;&#x3002;</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-AndroidHandler机制总结" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/11/20/AndroidHandler机制总结/" class="article-date">
  	<time datetime="2016-11-20T13:33:20.000Z" itemprop="datePublished">2016-11-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/20/AndroidHandler机制总结/">AndroidHandler机制总结</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1.What&#xFF1F;</p>
<p>Handler&#x673A;&#x5236;&#x662F;Android&#x4E2D;&#x7684;&#x7EBF;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#x65B9;&#x5F0F;&#x3002;&#x5728;Android&#x4E2D;&#x7531;&#x4E8E;&#x4E3B;&#x7EBF;&#x7A0B;&#x662F;&#x4E0D;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x6240;&#x6709;&#x6D89;&#x53CA;&#x5230;UI&#x7684;&#x64CD;&#x4F5C;&#x5FC5;&#x987B;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x6267;&#x884C;&#x3002;&#x8FD9;&#x5C31;&#x5BFC;&#x81F4;&#x7EBF;&#x7A0B;&#x95F4;&#x9891;&#x7E41;&#x7684;&#x901A;&#x8BAF;&#xFF0C;&#x6BD4;&#x5982;&#x6211;&#x4EEC;&#x5E38;&#x5E38;&#x9700;&#x8981;&#x4ECE;&#x7F51;&#x7EDC;&#x4E0A;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x518D;&#x52A0;&#x8F7D;&#x5230;UI&#x4E0A;&#x663E;&#x793A;&#xFF0C;&#x8FD9;&#x6837;&#x4E00;&#x4E2A;&#x8FC7;&#x7A0B;&#x5C31;&#x5FC5;&#x7136;&#x6D89;&#x53CA;&#x5230;&#x7EBF;&#x7A0B;&#x95F4;&#x7684;&#x901A;&#x8BAF;&#xFF1A;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x521B;&#x5EFA;&#x65B0;&#x7EBF;&#x7A0B;-&gt;&#x5728;&#x65B0;&#x7EBF;&#x7A0B;&#x4E2D;&#x53D1;&#x8D77;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;-&gt;&#x83B7;&#x5F97;&#x7F51;&#x7EDC;&#x6570;&#x636E;-&gt;&#x540E;&#x53F0;&#x5904;&#x7406;&#x540E;&#x56DE;&#x8C03;&#x901A;&#x77E5;UI&#x7EBF;&#x7A0B;&#xFF08;&#x7EBF;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#xFF09;&#x5E76;&#x628A;&#x6570;&#x636E;&#x53D1;&#x9001;&#x7ED9;UI&#x7EBF;&#x7A0B;-&gt;UI&#x7EBF;&#x7A0B;&#x4E2D;&#x8C03;&#x7528;UI&#x76F8;&#x5173;&#x65B9;&#x6CD5;&#xFF0C;&#x91CD;&#x65B0;&#x52A0;&#x8F7D;&#x6570;&#x636E;&#x5230;UI&#x4E0A;&#x3002;</p>
<p>&#x5728;&#x4EE5;&#x4E0A;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x6CA1;&#x6709;&#x4E00;&#x5957;&#x826F;&#x597D;&#x7684;&#x7EBF;&#x7A0B;&#x95F4;&#x901A;&#x8BAF;&#x65B9;&#x5F0F;&#x662F;&#x4E0D;&#x884C;&#x7684;&#xFF0C;Android&#x4E3A;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x4E86;Handler&#x6765;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x672C;&#x7BC7;&#x5C31;&#x6765;&#x603B;&#x7ED3;&#x56DE;&#x987E;Handler&#x76F8;&#x5173;&#x7684;&#x5185;&#x5BB9;&#x3002;</p>
<p>2.How&#xFF1F;</p>
<p>&#x5148;&#x6765;&#x770B;&#x4E00;&#x770B;Handler&#x7684;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#xFF1A;</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LooperThread</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">Thread</span> {</span>  </span><br><span class="line">      public <span class="type">Handler</span> mHandler;  </span><br><span class="line">  </span><br><span class="line">      public void run() {  </span><br><span class="line">          <span class="type">Looper</span>.prepare();  </span><br><span class="line">  </span><br><span class="line">          mHandler = <span class="keyword">new</span> <span class="type">Handler</span>() {  </span><br><span class="line">              public void handleMessage(<span class="type">Message</span> msg) {  </span><br><span class="line">                  <span class="comment">// process incoming messages here  </span></span><br><span class="line">              }  </span><br><span class="line">          };  </span><br><span class="line">  </span><br><span class="line">          <span class="type">Looper</span>.loop();  </span><br><span class="line">      }  </span><br><span class="line">  }</span><br></pre></td></tr></table></figure>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x4E2D;&#x6301;&#x6709;&#x4E00;&#x4E2A;Handler&#xFF0C;&#x5728;run&#x65B9;&#x6CD5;&#x4E2D;&#x9996;&#x5148;&#x8981;&#x521D;&#x59CB;&#x5316;Looper&#xFF0C;&#x8C03;&#x7528;&#x5B83;&#x7684;prepare&#xFF08;&#xFF09;&#x65B9;&#x6CD5;&#xFF0C;&#x5E76;&#x5728;&#x4E0B;&#x9762;&#x5F00;&#x59CB;Looper&#x7684;&#x5FAA;&#x73AF;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x4F7F;&#x7528;Looper&#x3001;Looper&#x548C;Handler&#x6709;&#x4EC0;&#x4E48;&#x5173;&#x7CFB;&#xFF0C;&#x8FD9;&#x5728;&#x63A5;&#x4E0B;&#x6765;&#x8BB2;&#x3002;</p>
<p>3.Why&#xFF1F;</p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x5206;&#x6790;Handler&#x5185;&#x90E8;&#x7684;&#x5B9E;&#x73B0;&#x673A;&#x5236;&#x3002;</p>
<p>&#x5728;&#x5F00;&#x59CB;&#x4E4B;&#x524D;&#xFF0C;&#x9996;&#x5148;&#x8BA9;&#x6211;&#x4EEC;&#x641E;&#x6E05;&#x695A;Handler&#x6D89;&#x53CA;&#x5230;&#x54EA;&#x4E9B;&#x7C7B;&#x3002;</p>
<p><img src="/2016/11/20/AndroidHandler&#x673A;&#x5236;&#x603B;&#x7ED3;/Handler&#x7C7B;&#x56FE;" alt="Handler&#x7C7B;&#x56FE;"></p>
<p>Handler&#x3001;Looper&#x3001;MessageQueue&#x3001;Message&#x3001;Thread&#xFF0C;&#x8FD9;&#x5C31;&#x662F;Handler&#x673A;&#x5236;&#x4E2D;&#x7684;&#x4E3B;&#x8981;&#x7C7B;&#x3002;</p>
<p>Thread&#x4F4D;&#x4E8E;&#x6700;&#x5E95;&#x5C42;&#xFF0C;&#x5B83;&#x6301;&#x6709;&#x4E00;&#x4E2A;Looper&#x5BF9;&#x8C61;&#x548C;&#x4E00;&#x4E2A;MessageQueue&#x5BF9;&#x8C61;&#xFF0C;Looper&#x4EE5;&#x53CA;MessageQueue&#x4E3A;&#x4E0A;&#x5C42;&#x7684;Handler&#x5E95;&#x5C42;&#x5B9E;&#x73B0;&#xFF0C;&#x5BF9;&#x4E8E;&#x4E00;&#x822C;&#x5F00;&#x53D1;&#xFF0C;&#x6211;&#x4EEC;&#x4EC5;&#x4EC5;&#x9700;&#x8981;&#x4F7F;&#x7528;Handler&#x5C31;&#x5DF2;&#x7ECF;&#x8DB3;&#x591F;&#x3002;</p>
<p>&#x8FD9;&#x51E0;&#x4E2A;&#x73A9;&#x610F;&#x90FD;&#x662F;&#x5E72;&#x4EC0;&#x4E48;&#x7684;&#xFF1F;</p>
<p>&#x8BA9;&#x6211;&#x4EEC;&#x5148;&#x6765;&#x770B;&#x770B;&#x6BCF;&#x4E2A;&#x7C7B;&#x7684;&#x6CE8;&#x91CA;&#xFF1A;</p>
<p>Handler</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * A Handler allows you <span class="keyword">to</span> send <span class="keyword">and</span> process {@link Message} <span class="keyword">and</span> Runnable</span><br><span class="line"> * objects associated <span class="keyword">with</span> a thread&apos;s {@link MessageQueue}.  Each Handler</span><br><span class="line"> * instance <span class="keyword">is</span> associated <span class="keyword">with</span> a single thread <span class="keyword">and</span> <span class="keyword">that</span> thread&apos;s message</span><br><span class="line"> * queue.  When you create a new Handler, <span class="keyword">it</span> <span class="keyword">is</span> bound <span class="keyword">to</span> <span class="keyword">the</span> thread /</span><br><span class="line"> * message queue <span class="keyword">of</span> <span class="keyword">the</span> thread <span class="keyword">that</span> <span class="keyword">is</span> creating <span class="keyword">it</span> <span class="comment">-- from that point on,</span></span><br><span class="line"> * <span class="keyword">it</span> will deliver messages <span class="keyword">and</span> runnables <span class="keyword">to</span> <span class="keyword">that</span> message queue <span class="keyword">and</span> execute</span><br><span class="line"> * them <span class="keyword">as</span> they come <span class="keyword">out of</span> <span class="keyword">the</span> message queue.</span><br><span class="line"> * </span><br><span class="line"> * &lt;p&gt;There are two main uses <span class="keyword">for</span> a Handler: (<span class="number">1</span>) <span class="keyword">to</span> schedule messages <span class="keyword">and</span></span><br><span class="line"> * runnables <span class="keyword">to</span> be executed <span class="keyword">as</span> <span class="keyword">some</span> point <span class="keyword">in</span> <span class="keyword">the</span> future; <span class="keyword">and</span> (<span class="number">2</span>) <span class="keyword">to</span> enqueue</span><br><span class="line"> * an action <span class="keyword">to</span> be performed <span class="function_start"><span class="keyword">on</span></span> a different thread than your own.</span><br><span class="line"> * </span><br><span class="line"> * &lt;p&gt;Scheduling messages <span class="keyword">is</span> accomplished <span class="keyword">with</span> <span class="keyword">the</span></span><br><span class="line"> * {@link <span class="comment">#post}, {@link #postAtTime(Runnable, long)},</span></span><br><span class="line"> * {@link <span class="comment">#postDelayed}, {@link #sendEmptyMessage},</span></span><br><span class="line"> * {@link <span class="comment">#sendMessage}, {@link #sendMessageAtTime}, and</span></span><br><span class="line"> * {@link <span class="comment">#sendMessageDelayed} methods.  The &lt;em&gt;post&lt;/em&gt; versions allow</span></span><br><span class="line"> * you <span class="keyword">to</span> enqueue Runnable objects <span class="keyword">to</span> be called <span class="keyword">by</span> <span class="keyword">the</span> message queue when</span><br><span class="line"> * they are received; <span class="keyword">the</span> &lt;em&gt;sendMessage&lt;/em&gt; versions allow you <span class="keyword">to</span> enqueue</span><br><span class="line"> * a {@link Message} object containing a bundle <span class="keyword">of</span> data <span class="keyword">that</span> will be</span><br><span class="line"> * processed <span class="keyword">by</span> <span class="keyword">the</span> Handler&apos;s {@link <span class="comment">#handleMessage} method (requiring that</span></span><br><span class="line"> * you implement a subclass <span class="keyword">of</span> Handler).</span><br><span class="line"> * </span><br><span class="line"> * &lt;p&gt;When posting <span class="keyword">or</span> sending <span class="keyword">to</span> a Handler, you can either</span><br><span class="line"> * allow <span class="keyword">the</span> <span class="property">item</span> <span class="keyword">to</span> be processed <span class="keyword">as</span> soon <span class="keyword">as</span> <span class="keyword">the</span> message queue <span class="keyword">is</span> ready</span><br><span class="line"> * <span class="keyword">to</span> do so, <span class="keyword">or</span> specify a <span class="command">delay</span> <span class="keyword">before</span> <span class="keyword">it</span> gets processed <span class="keyword">or</span> absolute <span class="property">time</span> <span class="keyword">for</span></span><br><span class="line"> * <span class="keyword">it</span> <span class="keyword">to</span> be processed.  The latter two allow you <span class="keyword">to</span> implement timeouts,</span><br><span class="line"> * ticks, <span class="keyword">and</span> other timing-based behavior.</span><br><span class="line"> * </span><br><span class="line"> * &lt;p&gt;When a</span><br><span class="line"> * process <span class="keyword">is</span> created <span class="keyword">for</span> your <span class="type">application</span>, <span class="keyword">its</span> main thread <span class="keyword">is</span> dedicated <span class="keyword">to</span></span><br><span class="line"> * <span class="property">running</span> a message queue <span class="keyword">that</span> takes care <span class="keyword">of</span> managing <span class="keyword">the</span> top-level</span><br><span class="line"> * <span class="type">application</span> objects (activities, broadcast receivers, etc) <span class="keyword">and</span> any windows</span><br><span class="line"> * they create.  You can create your own threads, <span class="keyword">and</span> communicate <span class="keyword">back</span> <span class="keyword">with</span></span><br><span class="line"> * <span class="keyword">the</span> main <span class="type">application</span> thread <span class="keyword">through</span> a Handler.  This <span class="keyword">is</span> done <span class="keyword">by</span> calling</span><br><span class="line"> * <span class="keyword">the</span> same &lt;em&gt;post&lt;/em&gt; <span class="keyword">or</span> &lt;em&gt;sendMessage&lt;/em&gt; methods <span class="keyword">as</span> <span class="keyword">before</span>, <span class="keyword">but</span> <span class="keyword">from</span></span><br><span class="line"> * your new thread.  The <span class="keyword">given</span> Runnable <span class="keyword">or</span> Message will <span class="keyword">then</span> be scheduled</span><br><span class="line"> * <span class="keyword">in</span> <span class="keyword">the</span> Handler&apos;s message queue <span class="keyword">and</span> processed when appropriate.</span><br><span class="line"> */</span><br></pre></td></tr></table></figure>
<p>&#x8BA9;&#x6211;&#x5148;&#x6765;&#x7FFB;&#x8BD1;&#x4E00;&#x904D;&#xFF1A;</p>
<p>Handler&#x5141;&#x8BB8;&#x4F60;&#x53D1;&#x9001;&#x548C;&#x5904;&#x7406;Message&#x4E0E;&#x5728;MessageQueue&#x4E2D;&#x5B9E;&#x73B0;&#x4E86;Runnable&#x63A5;&#x53E3;&#x7684;&#x5BF9;&#x8C61;&#xFF08;&#x4EE5;&#x4E0B;&#x7B80;&#x79F0;Runnable&#x5BF9;&#x8C61;&#xFF09;&#x3002;</p>
<p>&#x6BCF;&#x4E00;&#x4E2A;Handler&#x5B9E;&#x4F8B;&#x4E0E;&#x4E00;&#x4E2A;Thread&#x548C;Thread&#x5185;&#x5305;&#x542B;&#x7684;message queue&#x76F8;&#x5173;&#x8054;&#x3002;</p>
<p>&#x5F53;&#x4F60;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;Handler&#x5B9E;&#x4F8B;&#xFF0C;&#x5B83;&#x4F1A;&#x88AB;&#x7ED1;&#x5B9A;&#x5230;&#x5B83;&#x6240;&#x5728;&#x7684;Thread&#x4EE5;&#x53CA;&#x5176;message queue&#x3002;&#x4ECE;&#x521B;&#x5EFA;&#x4EE5;&#x540E;&#xFF0C;Handler&#x5B9E;&#x4F8B;&#x4F1A;&#x628A;message&#x548C;Runnable&#x5BF9;&#x8C61;&#x53D1;&#x9001;&#x5230;message queue&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x5B83;&#x4EEC;&#x4ECE;message queue&#x4E2D;&#x51FA;&#x961F;&#x540E;&#x6267;&#x884C;&#x5B83;&#x4EEC;&#x3002;</p>
<p>Handler&#x6709;&#x4E24;&#x4E2A;&#x4E3B;&#x8981;&#x7684;&#x529F;&#x80FD;&#xFF1A;&#xFF08;1&#xFF09;&#x8C03;&#x5EA6;message&#x548C;Runnable&#x5BF9;&#x8C61;&#x4F7F;&#x5B83;&#x4EEC;&#x5728;&#x672A;&#x6765;&#x88AB;&#x6267;&#x884C;&#x3002;&#xFF08;&#x5F3A;&#x8C03;&#x65F6;&#x95F4;&#xFF0C;&#x5982;&#x5EF6;&#x65F6;&#x53D1;&#x9001;&#x4FE1;&#x606F;&#xFF09;&#xFF08;2&#xFF09;&#x5C06;&#x4E00;&#x4E2A;&#x52A8;&#x4F5C;&#x9001;&#x5165;&#x961F;&#x5217;&#xFF0C;&#x4F7F;&#x5B83;&#x80FD;&#x591F;&#x5728;&#x5176;&#x5B83;&#x7EBF;&#x7A0B;&#x88AB;&#x6267;&#x884C;&#x3002;&#xFF08;&#x5F3A;&#x8C03;&#x7EBF;&#x7A0B;&#xFF09;</p>
<p>Handler&#x7684;&#x6D88;&#x606F;&#x8C03;&#x5EA6;&#x529F;&#x80FD;&#x5728;post&#x65B9;&#x6CD5;&#x3001;postAtTime&#x65B9;&#x6CD5;&#x3001;postDelayed&#x65B9;&#x6CD5;&#x3001;sendEmptyMessage&#x65B9;&#x6CD5;&#x3001;sendMessage&#x65B9;&#x6CD5;&#x3001;sendMessageAtTime&#x65B9;&#x6CD5;&#x3001;sendMessageDelayed&#x65B9;&#x6CD5;&#x4E2D;&#x5B8C;&#x6210;&#x3002;post&#x5F00;&#x5934;&#x7684;&#x4E00;&#x7C7B;&#x65B9;&#x6CD5;&#x4E2D;&#x8C03;&#x5EA6;&#x7684;Runable&#x5BF9;&#x8C61;&#x4F1A;&#x5728;message queue&#x51C6;&#x5907;&#x597D;&#x540E;&#x9A6C;&#x4E0A;&#x6267;&#x884C;&#xFF0C;sendMessage&#x5F00;&#x5934;&#x7684;&#x4E00;&#x7C7B;&#x65B9;&#x6CD5;&#x5141;&#x8BB8;&#x4F60;&#x4F20;&#x9012;&#x4E00;&#x4E2A;&#x5E26;&#x6709;bundle&#xFF08;&#x989D;&#x5916;&#x6570;&#x636E;&#xFF09;&#x7684;message&#xFF0C;&#x8FD9;&#x4E2A;bundle&#x5728;Handler&#x7684;handleMessage&#x4E2D;&#x88AB;&#x56DE;&#x8C03;&#x5904;&#x7406;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x91CD;&#x5199;&#x8FD9;&#x4E2A;handleMessage&#x3002;</p>
<p>&#x5F53;&#x53D1;&#x9001;&#x7ED9;Handler&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x51B3;&#x5B9A;&#x5F53;message queue&#x51C6;&#x5907;&#x597D;&#x5C31;&#x9A6C;&#x4E0A;&#x6267;&#x884C;&#xFF0C;&#x6216;&#x8005;&#x662F;&#x5EF6;&#x8FDF;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x518D;&#x6267;&#x884C;&#x3002;&#x540E;&#x7F00;&#x4E3A;Delayed&#x7684;&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x8FD9;&#x6837;&#x4F7F;&#x7528;&#x7684;&#x3002;</p>
<p>&#x5F53;&#x4F60;&#x7684;app&#x4E2D;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x521B;&#x5EFA;&#x65F6;&#xFF0C;&#x8FD9;&#x4E2A;&#x8FDB;&#x7A0B;&#x4E2D;&#x7684;&#x4E3B;&#x7EBF;&#x7A0B;&#x4F1A;&#x62E5;&#x6709;&#x4E00;&#x4E2A;&#x4E13;&#x7528;&#x7684;message queue&#xFF0C;&#x4E3B;&#x7EBF;&#x7A0B;&#x5173;&#x6CE8;&#x7BA1;&#x7406;&#x9876;&#x5C42;&#x5BF9;&#x8C61;&#xFF08;activity&#x3001;broadcast receiver&#x7B49;&#xFF09;&#x548C;&#x5B83;&#x4EEC;&#x521B;&#x5EFA;&#x7684;&#x6240;&#x6709;windows&#x3002;&#xFF08;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x4E3B;&#x7EBF;&#x7A0B;&#x9ED8;&#x8BA4;&#x6709;&#x4E00;&#x4E2A;message queue&#xFF0C;&#x53E6;&#x4E00;&#x5C42;&#x610F;&#x601D;&#x5C31;&#x662F;&#x5176;&#x5B83;&#x7EBF;&#x7A0B;&#x9ED8;&#x8BA4;&#x662F;&#x6CA1;&#x6709;message queue&#x7684;&#xFF0C;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x3002;&#xFF09;&#x4F60;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x81EA;&#x5DF1;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x5E76;&#x901A;&#x8FC7;Handler&#x548C;&#x4E3B;&#x7EBF;&#x7A0B;&#x4EA4;&#x4E92;&#xFF0C;&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x4E4B;&#x524D;&#x63D0;&#x5230;&#x7684;post&#x3001;sendMessage&#x7B49;&#x65B9;&#x6CD5;&#x6765;&#x5B9E;&#x73B0;&#x3002;&#x53D1;&#x9001;&#x7ED9;&#x4E3B;&#x7EBF;&#x7A0B;&#x7684;message&#x548C;Runnable&#x5BF9;&#x8C61;&#x5C06;&#x4F1A;&#x5728;&#x5408;&#x9002;&#x7684;&#x65F6;&#x5019;&#x88AB;&#x5904;&#x7406;&#x3002;</p>
<p>&#x901A;&#x8FC7;&#x8FD9;&#x4E00;&#x6BB5;&#x6CE8;&#x91CA;&#xFF0C;&#x6211;&#x4EEC;&#x5BF9;Handler&#x7684;&#x4F5C;&#x7528;&#x5DF2;&#x7ECF;&#x6709;&#x4E86;&#x5927;&#x81F4;&#x7684;&#x5370;&#x8C61;&#x3002;Handler&#x628A;Message&#x6216;&#x8005;Runnable&#x5BF9;&#x8C61;&#x53D1;&#x9001;&#x5230;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;Message Queue&#x4E2D;&#xFF0C;Message&#x53EF;&#x4EE5;&#x643A;&#x5E26;&#x6570;&#x636E;&#x3001;Runnable&#x5BF9;&#x8C61;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x51B3;&#x5B9A;&#x6267;&#x884C;&#x5185;&#x5BB9;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x51B3;&#x5B9A;&#x662F;&#x5373;&#x523B;&#x8C03;&#x7528;&#x8FD8;&#x662F;&#x5EF6;&#x8FDF;&#x8C03;&#x7528;&#xFF0C;Message Queue&#x4E2D;&#x542B;&#x6709;&#x5927;&#x91CF;&#x7684;&#x6D88;&#x606F;&#xFF0C;&#x5B83;&#x4EEC;&#x5728;&#x5408;&#x9002;&#x65F6;&#x5019;&#x5C31;&#x4F1A;&#x51FA;&#x961F;&#x5217;&#x5E76;&#x88AB;&#x6267;&#x884C;&#x3002;</p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x662F;MessageQueue</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/<span class="keyword">*</span><span class="keyword">*</span></span><br><span class="line"> <span class="keyword">*</span> Low-level class holding the list of messages to be dispatched by a</span><br><span class="line"> <span class="keyword">*</span> {<span class="comment">@link Looper}.  Messages are not added directly to a MessageQueue,</span></span><br><span class="line"> <span class="keyword">*</span> but rather through {<span class="comment">@link Handler} objects associated with the Looper.</span></span><br><span class="line"> <span class="keyword">*</span> </span><br><span class="line"> <span class="keyword">*</span> <span class="variable">&lt;p&gt;</span>You can retrieve the MessageQueue for the current thread with</span><br><span class="line"> <span class="keyword">*</span> {<span class="comment">@link Looper#myQueue() Looper.myQueue()}.</span></span><br><span class="line"> <span class="keyword">*</span>/</span><br><span class="line">public final class MessageQueue {</span><br></pre></td></tr></table></figure>
<p>MessageQueue&#x662F;&#x4E00;&#x4E2A;&#x6301;&#x6709;&#x5C06;&#x88AB;Looper&#x5206;&#x53D1;&#x7684;message&#x7684;list&#x7684;&#x5E95;&#x5C42;&#x7C7B;&#x3002;Message&#x4E0D;&#x80FD;&#x88AB;&#x76F4;&#x63A5;&#x6DFB;&#x52A0;&#x5230;MessageQueue&#x4E2D;&#xFF0C;&#x800C;&#x662F;&#x901A;&#x8FC7;&#x4E0E;MessageQueue&#x5BF9;&#x5E94;&#x7684;Looper&#x6240;&#x7ED1;&#x5B9A;&#x7684;Handler&#x3002;</p>
<p>&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;Looper.myQueue&#x65B9;&#x6CD5;&#x6765;&#x5F97;&#x5230;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x7684;MessageQueue&#x3002;</p>
<p>&#x6700;&#x540E;&#x662F;Looper</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">/<span class="keyword">*</span><span class="keyword">*</span></span><br><span class="line">  <span class="keyword">*</span> Class used to run a message loop for a thread.  Threads by default do</span><br><span class="line">  <span class="keyword">*</span> not have a message loop associated with them; to create one, call</span><br><span class="line">  <span class="keyword">*</span> {<span class="comment">@link #prepare} in the thread that is to run the loop, and then</span></span><br><span class="line">  <span class="keyword">*</span> {<span class="comment">@link #loop} to have it process messages until the loop is stopped.</span></span><br><span class="line">  <span class="keyword">*</span></span><br><span class="line">  <span class="keyword">*</span> <span class="variable">&lt;p&gt;</span>Most interaction with a message loop is through the</span><br><span class="line">  <span class="keyword">*</span> {<span class="comment">@link Handler} class.</span></span><br><span class="line">  <span class="keyword">*</span></span><br><span class="line">  <span class="keyword">*</span> <span class="variable">&lt;p&gt;</span>This is a typical example of the implementation of a Looper thread,</span><br><span class="line">  <span class="keyword">*</span> using the separation of {<span class="comment">@link #prepare} and {@link #loop} to create an</span></span><br><span class="line">  <span class="keyword">*</span> initial Handler to communicate with the Looper.</span><br><span class="line">  <span class="keyword">*</span></span><br><span class="line">  <span class="keyword">*</span> <span class="variable">&lt;pre&gt;</span></span><br><span class="line">  <span class="keyword">*</span>  class LooperThread extends Thread {</span><br><span class="line">  <span class="keyword">*</span>      public Handler mHandler;</span><br><span class="line">  <span class="keyword">*</span></span><br><span class="line">  <span class="keyword">*</span>      public void run() {</span><br><span class="line">  <span class="keyword">*</span>          Looper.prepare();</span><br><span class="line">  <span class="keyword">*</span></span><br><span class="line">  <span class="keyword">*</span>          mHandler = new Handler() {</span><br><span class="line">  <span class="keyword">*</span>              public void handleMessage(Message msg) {</span><br><span class="line">  <span class="keyword">*</span>                  // process incoming messages here</span><br><span class="line">  <span class="keyword">*</span>              }</span><br><span class="line">  <span class="keyword">*</span>          };</span><br><span class="line">  <span class="keyword">*</span></span><br><span class="line">  <span class="keyword">*</span>          Looper.loop();</span><br><span class="line">  <span class="keyword">*</span>      }</span><br><span class="line">  <span class="keyword">*</span>  }<span class="variable">&lt;/pre&gt;</span></span><br><span class="line">  <span class="keyword">*</span>/</span><br><span class="line">public final class Looper {</span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x4E2A;&#x7C7B;&#x7528;&#x4E8E;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x8FD0;&#x884C;message&#x7684;&#x5FAA;&#x73AF;&#x3002;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5728;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x6CA1;&#x6709;&#x4E0E;&#x5B83;&#x4EEC;&#x7ED1;&#x5B9A;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x8981;&#x5FAA;&#x73AF;&#x7684;&#x7EBF;&#x7A0B;&#x4E2D;&#x4F7F;&#x7528;Looper.prepare&#x65B9;&#x6CD5;&#xFF0C;&#x5E76;&#x4F7F;&#x7528;Looper.loop&#x65B9;&#x6CD5;&#x6765;&#x5904;&#x7406;message&#x76F4;&#x5230;&#x5FAA;&#x73AF;&#x7ED3;&#x675F;&#x3002;</p>
<p>Looper&#x548C;message loop&#x7684;&#x76F8;&#x4E92;&#x4F5C;&#x7528;&#x5927;&#x90E8;&#x5206;&#x901A;&#x8FC7;Handler&#x6765;&#x5B8C;&#x6210;&#x3002;</p>
<p>&#x4EE5;&#x4E0A;&#x51E0;&#x4E2A;&#x7C7B;&#x7684;&#x57FA;&#x672C;&#x6CE8;&#x91CA;&#x90FD;&#x7FFB;&#x8BD1;&#x5B8C;&#x4E86;&#xFF0C;&#x770B;&#x5B8C;&#x8FD9;&#x51E0;&#x7C7B;&#x7684;&#x6CE8;&#x91CA;&#xFF0C;&#x6211;&#x89C9;&#x5F97;&#x5176;&#x5B9E;&#x5DF2;&#x7ECF;&#x6BD4;&#x8F83;&#x6E05;&#x695A;&#x4E86;&#x3002;</p>
<p>&#x8BA9;&#x6211;&#x6765;&#x7B80;&#x5355;&#x7684;&#x603B;&#x7ED3;&#x4E00;&#x4E0B;</p>
<blockquote>
<p>Handler&#x673A;&#x5236;&#x8981;&#x5B9E;&#x73B0;&#x7684;&#x65E0;&#x975E;&#x5C31;&#x662F;&#x7EBF;&#x7A0B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#xFF0C;&#x90A3;&#x4E48;&#x4EE5;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#x597D;&#x5462;&#xFF1F;</p>
<p>&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x6301;&#x6709;&#x4E00;&#x4E2A;MessageQueue&#xFF0C;&#x5728;&#x7EBF;&#x7A0B;&#x5185;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;Looper&#x5BF9;&#x8C61;&#x6765;&#x8BA9;MessageQueue&#x91CC;&#x7684;Message&#x6D41;&#x52A8;&#x8D77;&#x6765;&#x3002;Looper&#x548C;MessageQueue&#x672C;&#x8EAB;&#x90FD;&#x4E0D;&#x80FD;&#x8DE8;&#x8D8A;&#x7EBF;&#x7A0B;&#xFF0C;Handler&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x8054;&#x7CFB;&#x4E0D;&#x540C;&#x7EBF;&#x7A0B;&#x4E2D;&#x7684;MessageQueue&#x548C;Looper&#x7684;&#x4E2D;&#x4ECB;&#x3002;Handler&#x672C;&#x8EAB;&#x53EF;&#x4EE5;&#x8BF4;&#x662F;&#x4E00;&#x4E2A;&#x8DE8;&#x7EBF;&#x7A0B;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x8FD9;&#x6837;&#x8BF4;&#x5462;&#xFF1F;&#x56E0;&#x4E3A;Handler&#x53EF;&#x4EE5;&#x53D1;&#x9001;&#x548C;&#x63A5;&#x53D7;&#x5904;&#x7406;Message&#xFF0C;&#x800C;&#x4E14;&#x53D1;&#x9001;&#x548C;&#x63A5;&#x53D7;&#x6240;&#x5728;&#x7684;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x4E0D;&#x540C;&#xFF01;Handler&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x5728;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x4F7F;&#x7528;&#x65F6;&#xFF0C;&#x53D1;&#x9001;Message&#x5230;&#x521B;&#x5EFA;&#x5B83;&#x7684;&#x7EBF;&#x7A0B;&#x4E2D;&#x7684;MessageQueue&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x7ECF;&#x7531;Looper&#x5BF9;MessageQueue&#x7684;&#x5904;&#x7406;&#xFF0C;&#x5728;&#x5408;&#x9002;&#x7684;&#x65F6;&#x673A;&#x53D6;&#x51FA;MessageQueue&#xFF0C;&#x4F20;&#x9012;&#x7ED9;Handler&#x5904;&#x7406;&#x3002;</p>
<p>&#x4E00;&#x53E5;&#x8BDD;&#xFF1A;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x4F7F;&#x7528;Handler&#xFF0C;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x90FD;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Handler&#x53D1;&#x9001;Message&#x5230;&#x521B;&#x5EFA;&#x5B83;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x8FD9;&#x4E2A;Message&#x4E5F;&#x53EA;&#x80FD;&#x88AB;&#x521B;&#x5EFA;Handler&#x7684;&#x7EBF;&#x7A0B;&#x5904;&#x7406;&#x3002;</p>
</blockquote>
<p>Handler&#x673A;&#x5236;&#x7684;&#x57FA;&#x672C;&#x539F;&#x7406;&#x5C31;&#x662F;&#x8FD9;&#x6837;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;Demo&#x3002;</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zuliangwang.learnhandler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.<span class="type">Handler</span>;</span><br><span class="line"><span class="keyword">import</span> android.os.<span class="type">Message</span>;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.app.<span class="type">AppCompatActivity</span>;</span><br><span class="line"><span class="keyword">import</span> android.os.<span class="type">Bundle</span>;</span><br><span class="line"><span class="keyword">import</span> android.util.<span class="type">Log</span>;</span><br><span class="line"></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">AppCompatActivity</span> {</span></span><br><span class="line"></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void onCreate(<span class="type">Bundle</span> savedInstanceState) {</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(<span class="type">R</span>.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        <span class="type">Handler</span> handler = <span class="keyword">new</span> <span class="type">Handler</span>(){</span><br><span class="line">            <span class="annotation">@Override</span></span><br><span class="line">            public void handleMessage(<span class="type">Message</span> msg) {</span><br><span class="line">                <span class="type">Log</span>.d(<span class="string">&quot;TestActivity&quot;</span>,<span class="string">&quot;receive&quot;</span>);</span><br><span class="line">            }</span><br><span class="line">        };</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="type">TestThread</span>().start();</span><br><span class="line">        <span class="keyword">new</span> <span class="type">TestThread2</span>(handler).start();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x6211;&#x5728;&#x4E00;&#x4E2A;Activity&#xFF08;&#x4E3B;&#x7EBF;&#x7A0B;&#xFF09;&#x91CC;&#x521B;&#x5EFA;&#x4E86;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x5E76;&#x542F;&#x52A8;&#x5B83;&#x4EEC;&#xFF0C;&#x540C;&#x65F6;&#x6211;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x91CC;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;Handler&#xFF0C;&#x56E0;&#x6B64;&#x8FD9;&#x4E2A;Handler&#x4F9D;&#x9644;&#x4E8E;&#x4E3B;&#x7EBF;&#x7A0B;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x5728;&#x53E6;&#x5916;&#x7684;&#x7EBF;&#x7A0B;&#x91CC;&#x53D1;&#x9001;Message&#xFF0C;&#x5904;&#x7406;&#x5B83;&#x7684;&#x4E5F;&#x5E94;&#x8BE5;&#x662F;&#x4E3B;&#x7EBF;&#x7A0B;&#xFF0C;OK&#xFF0C;&#x4E0B;&#x9762;&#x8BA9;&#x6211;&#x4EEC;&#x6765;&#x9A8C;&#x8BC1;&#x3002;</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zuliangwang.learnhandler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.util.<span class="type">Log</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * Created by zuliangwang on 16/11/22.</span><br><span class="line"> */</span></span><br><span class="line"></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">TestThread</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">Thread</span>{</span></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    public void run() {</span><br><span class="line">        <span class="type">Log</span>.d(<span class="string">&quot;TestThread&quot;</span>,<span class="string">&quot;begin&quot;</span>);</span><br><span class="line">        <span class="type">Log</span>.d(<span class="string">&quot;TestThread&quot;</span>,<span class="string">&quot;end&quot;</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x4E2A;TestThread&#x662F;&#x4E00;&#x4E2A;&#x7A7A;&#x7684;Thread&#xFF0C;&#x6211;&#x521B;&#x5EFA;&#x8FD9;&#x4E2A;Thread&#x662F;&#x4E3A;&#x4E86;&#x9A8C;&#x8BC1;Looper&#x7684;&#x4F5C;&#x7528;&#xFF01;&#x4E0B;&#x9762;&#x6211;&#x4F1A;&#x7EE7;&#x7EED;&#x8BF4;&#x3002;</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zuliangwang.learnhandler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Handler;</span><br><span class="line"><span class="keyword">import</span> android.os.Looper;</span><br><span class="line"><span class="keyword">import</span> android.os.Message;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * Created by zuliangwang on 16/11/22.</span><br><span class="line"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestThread2</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TestThread2</span><span class="params">(Handler <span class="keyword">handler</span>)</span> </span>{</span><br><span class="line">        mHandler = <span class="keyword">handler</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    Handler mHandler;</span><br><span class="line"></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">        Log.d(<span class="string">&quot;TestThread2&quot;</span>,<span class="string">&quot;id = &quot;</span>+getId());</span><br><span class="line">        Log.d(<span class="string">&quot;TestThread2&quot;</span>,<span class="string">&quot;begin&quot;</span>);</span><br><span class="line">        Looper.prepare();</span><br><span class="line">        Log.d(<span class="string">&quot;TestThread2&quot;</span>,<span class="string">&quot;loop&quot;</span>);</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">        mHandler.post(<span class="keyword">new</span> Runnable() {</span><br><span class="line">            <span class="annotation">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">           Log.d(<span class="string">&quot;TestThread2&quot;</span>,<span class="string">&quot;run&quot;</span>+Thread.currentThread().getId());;</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line">        mHandler.sendEmptyMessage(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//&#x6B7B;&#x5FAA;&#x73AF;&#x65B9;&#x6CD5;</span></span><br><span class="line">        Looper.loop();</span><br><span class="line">        Log.d(<span class="string">&quot;TestThread2&quot;</span>,<span class="string">&quot;end&quot;</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x6211;&#x5728;TestThread2&#x4E2D;&#x4F7F;&#x7528;&#x4E3B;&#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x7684;Handler&#x53D1;&#x9001;&#x4E86;&#x4E00;&#x4E2A;Runnable&#x5BF9;&#x8C61;&#x548C;&#x4E00;&#x4E2A;&#x7A7A;&#x7684;Message&#x3002;</p>
<p><img src="/2016/11/20/AndroidHandler&#x673A;&#x5236;&#x603B;&#x7ED3;/result.png" alt="result">&#x8F93;&#x51FA;&#x7684;&#x7ED3;&#x679C;&#x5982;&#x56FE;&#xFF0C;&#x6211;&#x6765;&#x4E00;&#x70B9;&#x70B9;&#x5206;&#x6790;&#x3002;</p>
<p>1.TestThread&#x4E2D;&#x8F93;&#x51FA;&#x4E86;begin&#x548C;end&#xFF0C;&#x8BC1;&#x660E;run&#x65B9;&#x6CD5;&#x8DD1;&#x5B8C;&#x4E86;&#x3002;</p>
<p>2.TestThread2&#x4E2D;&#x8F93;&#x51FA;&#x4E86;TestThread2&#x7684;ID&#x4E3A;135&#xFF0C;&#x800C;&#x4E0B;&#x9762;run&#x7684;&#x5374;&#x662F;1&#xFF0C;&#x770B;&#x5230;&#x4E86;&#x5417;&#xFF1F;&#x4E24;&#x8005;&#x7EBF;&#x7A0B;ID&#x4E0D;&#x540C;&#xFF01;&#x8FD9;&#x8BF4;&#x660E;&#x4EC0;&#x4E48;&#xFF0C;handler&#x8C03;&#x7528;post&#x65B9;&#x6CD5;&#x53D1;&#x9001;&#x7684;Runnable&#x5BF9;&#x8C61;&#x5728;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x4E2D;&#x8FD0;&#x884C;&#xFF0C;&#x800C;ID&#x4E3A;1&#x7684;&#x7EBF;&#x7A0B;&#x662F;&#x8C01;&#xFF1F;&#x6211;&#x4E0D;&#x8BF4;&#x5927;&#x5BB6;&#x90FD;&#x5E94;&#x8BE5;&#x731C;&#x5F97;&#x5230;&#xFF0C;&#x5C31;&#x662F;&#x4E3B;&#x7EBF;&#x7A0B;&#xFF01;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x8FD9;&#x4E2A;Handler&#x53D1;&#x9001;&#x7684;Runnable&#x6700;&#x540E;&#x8FDB;&#x5165;&#x4E86;&#x4E3B;&#x7EBF;&#x7A0B;&#x7684;MessageQueue&#x5E76;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x8FD0;&#x884C;&#xFF0C;&#x8FD9;&#x548C;&#x4E4B;&#x524D;&#x8BF4;&#x660E;&#x7684;&#x539F;&#x7406;&#x662F;&#x543B;&#x5408;&#x7684;&#x3002;</p>
<p>3.&#x7136;&#x540E;&#x518D;&#x6765;&#x770B;&#x770B;TestThread&#x8F93;&#x51FA;&#x7684;begin&#x548C;loop&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x5B83;&#x6700;&#x540E;&#x6CA1;&#x6709;&#x8F93;&#x51FA;end&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;run&#x65B9;&#x6CD5;&#x6CA1;&#x6709;&#x6B63;&#x5E38;&#x8FD0;&#x884C;&#x7ED3;&#x675F;&#xFF0C;&#x8FD9;&#x662F;&#x4E3A;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x56E0;&#x4E3A;Looper&#xFF01;</p>
<p>4.&#x6700;&#x540E;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5728;Activity&#x4E2D;&#x6536;&#x5230;&#x4E86;TestThread2&#x53D1;&#x9001;&#x7684;Message&#x3002;</p>
<p>&#x4EE5;&#x4E0A;&#x548C;&#x6211;&#x4EEC;&#x4E4B;&#x524D;&#x7684;&#x5206;&#x6790;&#x5B8C;&#x5168;&#x543B;&#x5408;&#xFF0C;Handler&#x7684;&#x539F;&#x7406;&#x5230;&#x8FD9;&#x91CC;&#x5C31;&#x641E;&#x6E05;&#x695A;&#x4E86;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x8BA9;&#x6211;&#x4EEC;&#x770B;&#x770B;&#x4E00;&#x76F4;&#x8BF4;&#x7684;Looper&#x662F;&#x600E;&#x4E48;&#x56DE;&#x4E8B;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;TestThread2&#x7684;run&#x65B9;&#x6CD5;&#x6CA1;&#x6709;&#x6B63;&#x5E38;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#x3002;</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Run the message queue in this thread. Be sure to call</span><br><span class="line"> * {<span class="doctag">@link</span> #quit()} to end the loop.</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">final</span> Looper me = myLooper();</span><br><span class="line">    <span class="keyword">if</span> (me == <span class="keyword">null</span>) {</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;No Looper; Looper.prepare() wasn&apos;t called on this thread.&quot;</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">final</span> MessageQueue queue = me.mQueue;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Make sure the identity of this thread is that of the local process,</span></span><br><span class="line">    <span class="comment">// and keep track of what that identity token actually is.</span></span><br><span class="line">    Binder.clearCallingIdentity();</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">long</span> ident = Binder.clearCallingIdentity();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (;;) {</span><br><span class="line">        Message msg = queue.next(); <span class="comment">// might block</span></span><br><span class="line">        <span class="keyword">if</span> (msg == <span class="keyword">null</span>) {</span><br><span class="line">            <span class="comment">// No message indicates that the message queue is quitting.</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">// This must be in a local variable, in case a UI event sets the logger</span></span><br><span class="line">        <span class="keyword">final</span> Printer logging = me.mLogging;</span><br><span class="line">        <span class="keyword">if</span> (logging != <span class="keyword">null</span>) {</span><br><span class="line">            logging.println(<span class="string">&quot;&gt;&gt;&gt;&gt;&gt; Dispatching to &quot;</span> + msg.<span class="keyword">target</span> + <span class="string">&quot; &quot;</span> +</span><br><span class="line">                    msg.callback + <span class="string">&quot;: &quot;</span> + msg.what);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">long</span> traceTag = me.mTraceTag;</span><br><span class="line">        <span class="keyword">if</span> (traceTag != <span class="number">0</span>) {</span><br><span class="line">            Trace.traceBegin(traceTag, msg.<span class="keyword">target</span>.getTraceName(msg));</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            msg.<span class="keyword">target</span>.dispatchMessage(msg);</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">            <span class="keyword">if</span> (traceTag != <span class="number">0</span>) {</span><br><span class="line">                Trace.traceEnd(traceTag);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (logging != <span class="keyword">null</span>) {</span><br><span class="line">            logging.println(<span class="string">&quot;&lt;&lt;&lt;&lt;&lt; Finished to &quot;</span> + msg.<span class="keyword">target</span> + <span class="string">&quot; &quot;</span> + msg.callback);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Make sure that during the course of dispatching the</span></span><br><span class="line">        <span class="comment">// identity of the thread wasn&apos;t corrupted.</span></span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">long</span> newIdent = Binder.clearCallingIdentity();</span><br><span class="line">        <span class="keyword">if</span> (ident != newIdent) {</span><br><span class="line">            Log.wtf(TAG, <span class="string">&quot;Thread identity changed from 0x&quot;</span></span><br><span class="line">                    + Long.toHexString(ident) + <span class="string">&quot; to 0x&quot;</span></span><br><span class="line">                    + Long.toHexString(newIdent) + <span class="string">&quot; while dispatching to &quot;</span></span><br><span class="line">                    + msg.<span class="keyword">target</span>.getClass().getName() + <span class="string">&quot; &quot;</span></span><br><span class="line">                    + msg.callback + <span class="string">&quot; what=&quot;</span> + msg.what);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        msg.recycleUnchecked();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x770B;&#x5230;&#x4E86;&#x8FD9;&#x884C;&#x5417;&#xFF1F;   for (;;) Looper&#x5185;&#x7684;loop&#x65B9;&#x6CD5;&#x662F;&#x4E00;&#x4E2A;&#x6B7B;&#x5FAA;&#x73AF;&#xFF0C;&#x8FD9;&#x662F;&#x4E3A;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x60F3;&#x4E00;&#x60F3;&#x4E00;&#x4E2A;&#x6B63;&#x5E38;&#x7684;&#x7EBF;&#x7A0B;&#x5E94;&#x8BE5;&#x662F;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#xFF1F;&#x4ECE;&#x88AB;&#x521B;&#x5EFA;&#x5230;&#x8FD0;&#x884C;&#x5B8C;run&#x65B9;&#x6CD5;&#x91CC;&#x9762;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x7136;&#x540E;&#x6B63;&#x5E38;&#x9000;&#x51FA;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x600E;&#x4E48;&#x6837;&#x5728;&#x7EBF;&#x7A0B;&#x4E2D;&#x6784;&#x5EFA;&#x51FA;UI&#x754C;&#x9762;&#x8FD9;&#x79CD;&#x6C38;&#x4E0D;&#x7ED3;&#x675F;&#x7684;&#x6548;&#x679C;&#x5462;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;Android&#x7684;UI&#x53EF;&#x4EE5;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x4E00;&#x76F4;&#x5B58;&#x5728;&#xFF1F;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x56E0;&#x4E3A;&#x4E3B;&#x7EBF;&#x7A0B;&#x9ED8;&#x8BA4;&#x8C03;&#x7528;&#x4E86;Looper&#x7684;loop&#x65B9;&#x6CD5;&#xFF0C;&#x6C38;&#x4E0D;&#x7ED3;&#x675F;&#x7684;&#x4ECE;MessageQueue&#x91CC;&#x53D6;&#x51FA;Message&#x5904;&#x7406;&#xFF0C;&#x800C;&#x6211;&#x4EEC;&#x5237;&#x65B0;UI&#x4E5F;&#x5C31;&#x662F;&#x5411;&#x8FD9;&#x4E2A;MessageQueue&#x53D1;&#x9001;&#x4E86;&#x4E00;&#x6761;Message&#x3002;</p>
<p>&#x5230;&#x8FD9;&#x91CC;Handler&#x673A;&#x5236;&#x5C31;&#x5206;&#x6790;&#x5B8C;&#x4E86;&#xFF0C;&#x5177;&#x4F53;&#x7684;&#x4EE3;&#x7801;&#x7EC6;&#x8282;&#x4E5F;&#x4E0D;&#x8BF4;&#x4E86;&#xFF0C;&#x5927;&#x6982;&#x7684;&#x6D41;&#x7A0B;&#x548C;&#x903B;&#x8F91;&#x73B0;&#x5728;&#x5E94;&#x8BE5;&#x5F88;&#x6E05;&#x695A;&#x4E86;&#x3002;</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-Java线程锁总结" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/11/20/Java线程锁总结/" class="article-date">
  	<time datetime="2016-11-20T06:38:32.000Z" itemprop="datePublished">2016-11-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/20/Java线程锁总结/">Java线程锁总结</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#x4ECA;&#x5929;&#x590D;&#x4E60;Java&#x7684;&#x591A;&#x7EBF;&#x7A0B;&#x57FA;&#x672C;&#x77E5;&#x8BC6;&#xFF0C;&#x603B;&#x7ED3;&#x4E00;&#x4E0B;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x65B9;&#x9762;&#x7684;&#x5185;&#x5BB9;&#x3002;<br>&#x9996;&#x5148;&#x6765;&#x770B;&#x4E00;&#x6BB5;&#x7A0B;&#x5E8F;&#xFF1A;<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Created by zuliangwang on 16/11/20.</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TicketDemo</span> {</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String args[]</span>)</span>{</span><br><span class="line">        Ticket ticket = <span class="keyword">new</span> Ticket();</span><br><span class="line"></span><br><span class="line">        Thread thread1 = <span class="keyword">new</span> Thread(ticket);</span><br><span class="line">        Thread thread2 = <span class="keyword">new</span> Thread(ticket);</span><br><span class="line">        Thread thread3 = <span class="keyword">new</span> Thread(ticket);</span><br><span class="line">        Thread thread4 = <span class="keyword">new</span> Thread(ticket);</span><br><span class="line"></span><br><span class="line">        thread1.start();</span><br><span class="line">        thread2.start();</span><br><span class="line">        thread3.start();</span><br><span class="line">        thread4.start();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> Ticket implements Runnable {</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> num = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Ticket</span><span class="params">()</span> </span>{</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>) {</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">this</span>.num &gt; <span class="number">0</span>) {</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    Thread.sleep(<span class="number">10L</span>);</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">&quot;.....sale...&quot;</span> + <span class="keyword">this</span>.num--);</span><br><span class="line">                } <span class="keyword">catch</span> (InterruptedException var5) {</span><br><span class="line">                    Thread.currentThread().interrupt();</span><br><span class="line">                } </span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x6A21;&#x62DF;&#x5356;&#x7968;&#x7684;&#x591A;&#x7EBF;&#x7A0B;&#x7A0B;&#x5E8F;&#xFF0C;&#x662F;&#x5B66;&#x4E60;&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x4E00;&#x4E2A;&#x7ECF;&#x5178;&#x95EE;&#x9898;&#x3002;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x6CA1;&#x6709;&#x5BF9;&#x591A;&#x7EBF;&#x7A0B;&#x505A;&#x4EFB;&#x4F55;&#x5B89;&#x5168;&#x4FDD;&#x969C;&#xFF0C;&#x56E0;&#x4E3A;&#x56DB;&#x4E2A;&#x7EBF;&#x7A0B;&#x540C;&#x65F6;&#x8BBF;&#x95EE;&#x4E00;&#x4E2A;Ticket&#x5BF9;&#x8C61;&#xFF0C;&#x6240;&#x4EE5;&#x4F1A;&#x53D1;&#x751F;&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x6570;&#x636E;&#x5F02;&#x5E38;&#x3002;<br>&#x5148;&#x6765;&#x770B;&#x770B;&#x6700;&#x540E;&#x7684;&#x7ED3;&#x679C;&#xFF1A;<br><img src="/2016/11/20/Java&#x7EBF;&#x7A0B;&#x9501;&#x603B;&#x7ED3;/result1.png" alt="result1"></p>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x7EBF;&#x7A0B;0&#x548C;1&#x8BBF;&#x95EE;Ticket&#x5BF9;&#x8C61;&#xFF0C;&#x51FA;&#x73B0;&#x4E86;&#x4E24;&#x6B21;&#x4E3A;100&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x8FD9;&#x663E;&#x7136;&#x662F;&#x6709;&#x95EE;&#x9898;&#x7684;&#x3002;</p>
<p>&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x51FA;&#x73B0;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x5462;&#xFF1F;&#x56E0;&#x4E3A;&#x7EBF;&#x7A0B;0&#x548C;&#x7EBF;&#x7A0B;1&#x540C;&#x65F6;&#x8BBF;&#x95EE;&#x540C;&#x4E00;&#x4E2A;Ticket&#x5BF9;&#x8C61;&#xFF0C;&#x5F53;&#x7EBF;&#x7A0B;0&#x9996;&#x5148;&#x6267;&#x884C;&#x540E;&#x8FD8;&#x6CA1;&#x6709;&#x6267;&#x884C;&#x5230;num&#x2013;&#x65F6;&#x7EBF;&#x7A0B;1&#x5C31;&#x5DF2;&#x7ECF;&#x5F00;&#x59CB;&#x6267;&#x884C;&#x4E86;run&#x5185;&#x4EE3;&#x7801;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x7531;&#x4E8E;num&#x53D8;&#x91CF;&#x7684;&#x503C;&#x6CA1;&#x6709;&#x66F4;&#x65B0;&#xFF0C;&#x6240;&#x4EE5;&#x7EBF;&#x7A0B;0&#x548C;&#x7EBF;&#x7A0B;1&#x540C;&#x65F6;&#x62E5;&#x6709;&#x4E00;&#x4EFD;&#x503C;&#x4E3A;100&#x7684;num&#x7684;&#x62F7;&#x8D1D;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x5BFC;&#x81F4;&#x540E;&#x9762;&#x7684;&#x903B;&#x8F91;&#x5168;&#x90E8;&#x51FA;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x5C31;&#x662F;&#x5178;&#x578B;&#x7684;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x5904;&#x7406;&#x4E0D;&#x5F53;&#x5BFC;&#x81F4;&#x7684;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x90A3;&#x4E48;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x5462;&#xFF1F;</p>
<p>Java&#x4E2D;&#x9488;&#x5BF9;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x6709;&#x4EE5;&#x4E0B;&#x51E0;&#x79CD;&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#xFF1A;</p>
<p>&#xFF08;1&#xFF09;Synchronized&#x5173;&#x952E;&#x5B57;&#x3002;</p>
<p>Java&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x5BF9;&#x8C61;&#x90FD;&#x5185;&#x7F6E;&#x4E86;&#x4E00;&#x4E2A;&#x9501;&#x3002;&#x5F53;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x524D;&#x52A0;&#x4E0A;Synchronized&#x5173;&#x952E;&#x5B57;&#x540E;&#x5B83;&#x5728;&#x540C;&#x4E00;&#x65F6;&#x95F4;&#x5C31;&#x53EA;&#x80FD;&#x88AB;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x3002;</p>
<p>&#x4F8B;&#x5982;:</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Synchronized <span class="function"><span class="keyword">function</span><span class="params">()</span></span>{</span><br><span class="line">  a++;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lock();</span><br><span class="line"><span class="function"><span class="keyword">function</span><span class="params">()</span><span class="comment">{</span><br><span class="line">  a++;</span><br><span class="line">}</span></span><br><span class="line"><span class="title">unlock</span><span class="params">()</span>;</span></span><br></pre></td></tr></table></figure>
<p>&#x524D;&#x8005;&#x5C06;&#x4F1A;&#x88AB;&#x7F16;&#x8BD1;&#x5668;&#x7F16;&#x8BD1;&#x6210;&#x7C7B;&#x4F3C;&#x540E;&#x8005;&#x7684;&#x6837;&#x5B50;&#x3002;</p>
<p>&#x8FD9;&#x6837;&#x4E0A;&#x9501;&#x540E;&#x5BF9;&#x8C61;&#x5C06;&#x4FDD;&#x62A4;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x5F53;&#x4E0A;&#x9501;&#x540E;&#x89E3;&#x9501;&#x524D;&#x4EFB;&#x4F55;&#x5BF9;&#x8C61;&#x90FD;&#x4E0D;&#x80FD;&#x518D;&#x6267;&#x884C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x3002;</p>
<p>&#x540C;&#x65F6;&#xFF0C;Synchronized&#x4E5F;&#x53EF;&#x4EE5;&#x5BF9;&#x4EE3;&#x7801;&#x5757;&#x4E0A;&#x9501;&#x3002;</p>
<p>&#x7528;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Object</span> obj = <span class="keyword">new</span> <span class="keyword">Object</span>();</span><br><span class="line"><span class="keyword">synchronized</span>(obj){</span><br><span class="line">  <span class="comment">//&#x9700;&#x8981;&#x540C;&#x6B65;&#x7684;&#x4EE3;&#x7801;</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x91CC;&#x7684;&#x5BF9;&#x8C61;&#x53EF;&#x4EE5;&#x662F;&#x4EFB;&#x4F55;&#x5BF9;&#x8C61;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x521A;&#x624D;&#x63D0;&#x5230;&#x4E86;synchronized&#x5B9E;&#x9645;&#x662F;&#x4F7F;&#x7528;&#x5BF9;&#x8C61;&#x7684;&#x5185;&#x90E8;&#x9501;&#xFF0C;&#x8FD9;&#x4E2A;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x9501;&#x3002;</p>
<p>&#xFF08;2&#xFF09;volatile&#xFF08;&#x9519;&#x8BEF;&#x65B9;&#x6CD5;&#xFF09;</p>
<p>&#x5728;&#x4EE5;&#x524D;&#x6211;&#x4E00;&#x76F4;&#x4EE5;&#x4E3A;volatile&#x662F;&#x5BF9;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;&#x503C;&#x4E0A;&#x9501;&#xFF0C;&#x4ECA;&#x5929;&#x81EA;&#x5DF1;&#x52A8;&#x624B;&#x8BD5;&#x4E86;&#x4E00;&#x4E0B;&#xFF0C;&#x5C45;&#x7136;&#x4E0D;&#x5BF9;&#xFF01;&#x679C;&#x7136;&#x8FD8;&#x662F;&#x5B9E;&#x8DF5;&#x51FA;&#x771F;&#x77E5;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x5148;&#x6765;&#x770B;&#x770B;&#x7ED3;&#x679C;&#xFF1A;</p>
<p>&#x6211;&#x9996;&#x5148;&#x4FEE;&#x6539;<code>private volatile num=100;</code>&#x628A;num&#x53D8;&#x91CF;&#x8BBE;&#x7F6E;&#x4E3A;volatile&#x53D8;&#x91CF;&#x3002;</p>
<p><img src="/2016/11/20/Java&#x7EBF;&#x7A0B;&#x9501;&#x603B;&#x7ED3;/result2.png" alt="result2"></p>
<p>&#x8FD9;&#x662F;&#x7ED3;&#x679C;&#xFF0C;&#x53EF;&#x4EE5;&#x5F88;&#x660E;&#x663E;&#x7684;&#x770B;&#x5230;&#x4E24;&#x4E2A;88&#x3002;&#x8FD9;&#x662F;&#x4EC0;&#x4E48;&#x539F;&#x56E0;&#x5462;&#xFF1F;&#x6211;&#x67E5;&#x4E86;&#x4E00;&#x4E9B;&#x8D44;&#x6599;&#xFF1A;</p>
<blockquote>
<p>volatile <code>Java</code>&#x8BED;&#x8A00;&#x89C4;&#x8303;&#x4E2D;&#x6307;&#x51FA;&#xFF1A;&#x4E3A;&#x4E86;&#x83B7;&#x5F97;&#x6700;&#x4F73;&#x901F;&#x5EA6;&#xFF0C;&#x5141;&#x8BB8;&#x7EBF;&#x7A0B;&#x4FDD;&#x5B58;&#x5171;&#x4EAB;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x7684;&#x79C1;&#x6709;&#x62F7;&#x8D1D;&#xFF0C;&#x800C;&#x4E14;&#x53EA;&#x5F53;&#x7EBF;&#x7A0B;&#x8FDB;&#x5165;&#x6216;&#x8005;&#x79BB;&#x5F00;&#x540C;&#x6B65;&#x4EE3;&#x7801;&#x5757;&#x65F6;&#x624D;&#x4E0E;&#x5171;&#x4EAB;&#x6210;&#x5458;&#x53D8;&#x91CF; &#x7684;&#x539F;&#x59CB;&#x503C;&#x5BF9;&#x6BD4;&#x3002;&#x8FD9;&#x6837;&#x5F53;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x540C;&#x65F6;&#x4E0E;&#x67D0;&#x4E2A;&#x5BF9;&#x8C61;&#x4EA4;&#x4E92;&#x65F6;&#xFF0C;&#x5C31;&#x5FC5;&#x987B;&#x8981;&#x6CE8;&#x610F;&#x5230;&#x8981;&#x8BA9;&#x7EBF;&#x7A0B;&#x53CA;&#x65F6;&#x7684;&#x5F97;&#x5230;&#x5171;&#x4EAB;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x7684;&#x53D8;&#x5316;&#x3002;&#x800C;<code>volatile</code>&#x5173;&#x952E;&#x5B57;&#x5C31;&#x662F;&#x63D0;&#x793A;<code>JVM</code>&#xFF1A;&#x5BF9;&#x4E8E;&#x8FD9;&#x4E2A;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x4E0D;&#x80FD;&#x4FDD;&#x5B58;&#x5B83;&#x7684;&#x79C1;&#x6709;&#x62F7;&#x8D1D;&#xFF0C;&#x800C;&#x5E94;&#x76F4;&#x63A5;&#x4E0E;&#x5171;&#x4EAB;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x4EA4;&#x4E92;&#x3002; &#x4F7F;&#x7528;&#x5EFA;&#x8BAE;&#xFF1A;&#x5728;&#x4E24;&#x4E2A;&#x6216;&#x8005;&#x66F4;&#x591A;&#x7684;&#x7EBF;&#x7A0B;&#x8BBF;&#x95EE;&#x7684;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x4E0A;&#x4F7F;&#x7528;<code>volatile</code>&#x3002;&#x5F53;&#x8981;&#x8BBF;&#x95EE;&#x7684;&#x53D8;&#x91CF;&#x5DF2;&#x5728;<code>synchronized</code>&#x4EE3;&#x7801;&#x5757;&#x4E2D;&#xFF0C;&#x6216;&#x8005;&#x4E3A;&#x5E38;&#x91CF;&#x65F6;&#xFF0C;&#x4E0D;&#x5FC5;&#x4F7F;&#x7528;&#x3002; &#x7531;&#x4E8E;&#x4F7F;&#x7528;<code>volatile</code>&#x5C4F;&#x853D;&#x6389;&#x4E86;<code>JVM</code>&#x4E2D;&#x5FC5;&#x8981;&#x7684;&#x4EE3;&#x7801;&#x4F18;&#x5316;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x6548;&#x7387;&#x4E0A;&#x6BD4;&#x8F83;&#x4F4E;&#xFF0C;&#x56E0;&#x6B64;&#x4E00;&#x5B9A;&#x5728;&#x5FC5;&#x8981;&#x65F6;&#x624D;&#x4F7F;&#x7528;&#x6B64;&#x5173;&#x952E;&#x5B57;&#x3002; &#x5C31;&#x8DDF;<code>C</code>&#x4E2D;&#x7684;&#x4E00;&#x6837; &#x7981;&#x6B62;&#x7F16;&#x8BD1;&#x5668;&#x8FDB;&#x884C;&#x4F18;&#x5316;.</p>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x5982;&#x679C;&#x7ED9;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;&#x52A0;&#x4E0A;volatile&#x4FEE;&#x9970;&#x7B26;&#xFF0C;&#x5C31;&#x76F8;&#x5F53;&#x4E8E;&#xFF1A;&#x6BCF;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x4E2D;&#x4E00;&#x65E6;&#x8FD9;&#x4E2A;&#x503C;&#x53D1;&#x751F;&#x4E86;&#x53D8;&#x5316;&#x5C31;&#x9A6C;&#x4E0A;&#x5237;&#x65B0;&#x56DE;&#x4E3B;&#x5B58;&#xFF0C;&#x4F7F;&#x5F97;&#x5404;&#x4E2A;&#x7EBF;&#x7A0B;&#x53D6;&#x51FA;&#x7684;&#x503C;&#x76F8;&#x540C;&#x3002;&#x7F16;&#x8BD1;&#x5668;&#x4E0D;&#x8981;&#x5BF9;&#x8FD9;&#x4E2A;&#x53D8;&#x91CF;&#x7684;&#x8BFB;&#x3001;&#x5199;&#x64CD;&#x4F5C;&#x505A;&#x4F18;&#x5316;&#x3002;&#x4F46;&#x662F;&#x503C;&#x5F97;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x9664;&#x4E86;&#x5BF9;<code>long</code>&#x548C;<code>double</code>&#x7684;&#x7B80;&#x5355;&#x64CD;&#x4F5C;&#x4E4B;&#x5916;&#xFF0C;<code>volatile</code>&#x5E76;&#x4E0D;&#x80FD;&#x63D0;&#x4F9B;&#x539F;&#x5B50;&#x6027;&#x3002; &#x6240;&#x4EE5;&#xFF0C;&#x5C31;&#x7B97;&#x4F60;&#x5C06;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;&#x4FEE;&#x9970;&#x4E3A;<code>volatile</code>&#xFF0C;&#x4F46;&#x662F;&#x5BF9;&#x8FD9;&#x4E2A;&#x53D8;&#x91CF;&#x7684;&#x64CD;&#x4F5C;&#x5E76;&#x4E0D;&#x662F;&#x539F;&#x5B50;&#x7684;&#xFF0C;&#x5728;&#x5E76;&#x53D1;&#x73AF;&#x5883;&#x4E0B;&#xFF0C;&#x8FD8;&#x662F;&#x4E0D;&#x80FD;&#x907F;&#x514D;&#x9519;&#x8BEF;&#x7684;&#x53D1;&#x751F;&#x3002;</p>
</blockquote>
<p>volatile&#x5E76;&#x4E0D;&#x662F;&#x771F;&#x6B63;&#x7684;&#x9501;&#x4F4F;&#x4E86;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;&#xFF0C;&#x5B83;&#x5F3A;&#x5236;&#x8981;&#x6C42;&#x7EBF;&#x7A0B;&#x4F7F;&#x7528;&#x5BF9;&#x8C61;&#x7684;&#x53D8;&#x91CF;&#x65F6;&#x4E0D;&#x8FDB;&#x884C;&#x62F7;&#x8D1D;&#xFF0C;&#x800C;&#x662F;&#x76F4;&#x63A5;&#x4FEE;&#x6539;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x53D8;&#x91CF;&#x503C;&#xFF0C;&#x4F46;&#x662F;&#x56E0;&#x4E3A;&#x4FEE;&#x6539;&#x53D8;&#x91CF;&#x503C;&#x8FD9;&#x4E2A;&#x64CD;&#x4F5C;&#x672C;&#x8EAB;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x539F;&#x5B50;&#x64CD;&#x4F5C;&#xFF0C;&#x6240;&#x4EE5;&#x4ECD;&#x7136;&#x4F1A;&#x51FA;&#x73B0;&#x95EE;&#x9898;&#xFF01;</p>
<p>&#x5B9E;&#x8DF5;&#x51FA;&#x771F;&#x77E5;&#x3002;</p>
<p>&#xFF08;3&#xFF09;&#x4F7F;&#x7528;Lock&#x3002;</p>
<p>Java&#x5728;&#x65E9;&#x671F;&#x52A0;&#x9501;&#x64CD;&#x4F5C;&#x53EA;&#x6709;synchronized&#x5173;&#x952E;&#x5B57;&#xFF0C;&#x4F46;&#x662F;&#x540E;&#x6765;&#x53C8;&#x52A0;&#x5165;&#x4E86;&#x4F7F;&#x7528;Lock&#x5BF9;&#x8C61;&#x65B9;&#x6CD5;&#x3002;</p>
<p>Lock&#x662F;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x5B83;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#x6709;&#x4EE5;&#x4E0B;&#x51E0;&#x79CD;&#xFF1A;</p>
<p><img src="/2016/11/20/Java&#x7EBF;&#x7A0B;&#x9501;&#x603B;&#x7ED3;/hier.png" alt="hier"></p>
<p>&#x591A;&#x7684;&#x4E0D;&#x8BF4;&#x4E86;&#xFF0C;&#x6211;&#x73B0;&#x5728;&#x4E5F;&#x53EA;&#x4E86;&#x89E3;&#x4E00;&#x4E2A;&#x5B9E;&#x73B0;&#x7C7B;RentrantLoock&#x3002;</p>
<p>&#x7B80;&#x5355;&#x770B;&#x4E00;&#x4E0B;&#x7528;&#x6CD5;&#xFF1A;</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Created by zuliangwang on 16/11/20.</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Ticket</span> <span class="title">implements</span> <span class="title">Runnable</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Lock ticketLock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">int</span> num = <span class="number">100</span>;</span><br><span class="line">    @<span class="function">Override</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span>(<span class="params"></span>) </span>{</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>){</span><br><span class="line">            ticketLock.<span class="keyword">lock</span>();</span><br><span class="line">            <span class="keyword">if</span> (num&gt;<span class="number">0</span>){</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    Thread.sleep(<span class="number">10</span>);</span><br><span class="line">                    System.<span class="keyword">out</span>.println(Thread.currentThread().getName()+<span class="string">&quot;.....sale...&quot;</span>+num--);</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">catch</span> (InterruptedException e){</span><br><span class="line">                    Thread.currentThread().interrupt();</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">finally</span> {</span><br><span class="line">                    ticketLock.unlock();</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x4FEE;&#x6539;&#x4E86;Ticket&#x4E2D;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x5BF9;&#x91CC;&#x9762;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x4EE3;&#x7801;&#x4E0A;&#x9501;&#x3002;</p>
<p>Lock&#x7684;&#x539F;&#x7406;&#x548C;synchronized&#x5DEE;&#x4E0D;&#x591A;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x624B;&#x52A8;&#x4E0A;&#x9501;&#x89E3;&#x9501;&#xFF0C;&#x56E0;&#x6B64;&#x7075;&#x6D3B;&#x5EA6;&#x66F4;&#x9AD8;&#xFF0C;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#x5408;&#x7406;&#x4F7F;&#x7528;&#xFF0C;&#x907F;&#x514D;&#x6B7B;&#x9501;&#x3002;</p>
<p>&#x57FA;&#x672C;&#x5185;&#x5BB9;&#x5C31;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x66F4;&#x6DF1;&#x5165;&#x7684;&#x7B49;&#x4EE5;&#x540E;&#x78B0;&#x4E0A;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x518D;&#x8BF4;&#x3002;</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-Android Studio Instant Run总结" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/11/19/Android Studio Instant Run总结/" class="article-date">
  	<time datetime="2016-11-19T15:53:33.000Z" itemprop="datePublished">2016-11-19</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/19/Android Studio Instant Run总结/">Android Studio Instant Run总结</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Android Studio&#x5728;2.0&#x4EE5;&#x540E;&#x52A0;&#x5165;&#x4E86;&#x4E00;&#x4E2A;&#x5F88;&#x5B9E;&#x7528;&#x7684;&#x529F;&#x80FD;&#xFF1A;Instant Run<br>&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#x53EF;&#x4EE5;&#x52A0;&#x901F;&#x6211;&#x4EEC;App&#x7684;&#x7F16;&#x8BD1;&#xFF0C;&#x5728;&#x9879;&#x76EE;&#x505A;&#x5927;&#x4E86;&#x4EE5;&#x540E;&#xFF0C;&#x80FD;&#x7701;&#x53BB;&#x5F88;&#x591A;&#x65F6;&#x95F4;&#x3002;&#x65E9;&#x671F;&#x7248;&#x672C;&#x6709;&#x5F88;&#x591A;Bug&#xFF0C;&#x4F46;&#x662F;&#x73B0;&#x5728;&#x5DF2;&#x7ECF;&#x597D;&#x591A;&#x4E86;&#x3002;&#x4ECA;&#x5929;&#x5927;&#x6982;&#x603B;&#x7ED3;&#x4E00;&#x4E0B;Instant Run&#x7684;&#x51E0;&#x4E2A;&#x7C7B;&#x578B;&#x3002;<br>Instant Run&#x7684;&#x539F;&#x7406;&#x65E0;&#x975E;&#x5C31;&#x662F;&#x589E;&#x91CF;&#x7F16;&#x8BD1;&#xFF0C;&#x6BCF;&#x6B21;&#x7F16;&#x8BD1;&#x6839;&#x636E;&#x4FEE;&#x6539;&#x7684;&#x4EE3;&#x7801;&#x51B3;&#x5B9A;&#x53BB;&#x91CD;&#x65B0;&#x7F16;&#x8BD1;&#x54EA;&#x4E9B;&#x6587;&#x4EF6;&#xFF0C;&#x907F;&#x514D;&#x6BCF;&#x6B21;&#x90FD;&#x4ECE;&#x5934;&#x5230;&#x5C3E;&#x5F00;&#x59CB;&#x7F16;&#x8BD1;&#x3002;<br>&#x90A3;&#x4E48;Instant Run&#x7684;&#x7C7B;&#x578B;&#x4E5F;&#x5C31;&#x548C;&#x7F16;&#x8BD1;&#x54EA;&#x4E9B;&#x6587;&#x4EF6;&#x6709;&#x5173;&#x3002;<br>1.Hot Swap<br>&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x662F;&#x51E0;&#x79CD;&#x7C7B;&#x578B;&#x4E2D;&#x6700;&#x5FEB;&#x7684;&#x4E00;&#x79CD;&#x3002;&#x4F7F;&#x7528;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x7F16;&#x8BD1;&#xFF0C;App&#x751A;&#x81F3;&#x4E0D;&#x7528;&#x91CD;&#x65B0;&#x542F;&#x52A8;&#x3002;&#x5F53;&#x6211;&#x4EEC;&#x4EC5;&#x4EC5;&#x4FEE;&#x6539;&#x4E86;&#x65B9;&#x6CD5;&#x5185;&#x90E8;&#x7684;&#x4EE3;&#x7801;&#x540E;&#x5C31;&#x4F1A;&#x4EE5;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x91CD;&#x65B0;&#x7F16;&#x8BD1;&#x3002;<br>2.Warm Swap<br>&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x7684;&#x901F;&#x5EA6;&#x6B21;&#x4E8E;Hot Swap&#xFF0C;&#x7F16;&#x8BD1;&#x5B8C;&#x6210;&#x540E;App&#x4E0D;&#x7528;&#x91CD;&#x65B0;&#x5B89;&#x88C5;&#x548C;&#x91CD;&#x65B0;&#x542F;&#x52A8;&#xFF0C;&#x4F46;&#x662F;&#x9700;&#x8981;&#x542F;&#x52A8;&#x5F53;&#x524D;&#x7684;Activity&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x4F1A;&#x770B;&#x5230;&#x5C4F;&#x5E55;&#x95EA;&#x4E86;&#x4E00;&#x4E0B;&#x3002;&#x5F53;&#x6211;&#x4EEC;&#x4EC5;&#x4EC5;&#x4FEE;&#x6539;&#x6216;&#x8005;&#x5220;&#x9664;&#x4E86;&#x4E00;&#x4E2A;&#x73B0;&#x6709;&#x7684;&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x65F6;&#x5C31;&#x4F1A;&#x4EE5;&#x8FD9;&#x79CD;&#x5F62;&#x5F0F;&#x7F16;&#x8BD1;&#x3002;<br>3.Cold Swap<br>&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x7684;&#x901F;&#x5EA6;&#x53C8;&#x6B21;&#x4E8E;Warm Swap&#xFF0C;&#x7F16;&#x8BD1;&#x5B8C;&#x6210;&#x540E;&#x4E0D;&#x4F1A;&#x751F;&#x6210;&#x65B0;&#x7684;apk&#xFF0C;&#x800C;&#x4EC5;&#x4EC5;&#x53EA;&#x751F;&#x6210;&#x4E00;&#x4E2A;dex&#x6587;&#x4EF6;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x5B89;&#x88C5;&#xFF0C;&#x4F46;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x542F;&#x52A8;&#xFF0C;&#x56E0;&#x4E3A;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x52A0;&#x8F7D;&#x8FD9;&#x4E2A;dex&#x6587;&#x4EF6;&#xFF0C;&#x7531;&#x4E8E;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x57FA;&#x4E8E;multidex&#x673A;&#x5236;&#x5B9E;&#x73B0;&#xFF0C;&#x800C;Android&#x5728;5.0&#x4EE5;&#x4E0A;&#x624D;&#x4F7F;&#x7528;multidex&#xFF0C;&#x56E0;&#x6B64;&#x5F53;&#x76EE;&#x6807;&#x673A;&#x662F;5.0&#x4EE5;&#x4E0B;&#x65F6;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x5C31;&#x4E0D;&#x80FD;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#x3002;<br>&#x4EE5;&#x4E0B;&#x662F;&#x4F7F;&#x7528;Cold Swap&#x7684;&#x60C5;&#x51B5;&#x3002;</p>
<blockquote>
<p>&#x6DFB;&#x52A0;&#x3001;&#x5220;&#x9664;&#x6216;&#x4FEE;&#x6539;&#x4E00;&#x4E2A;&#x6CE8;&#x89E3;<br>&#x6DFB;&#x52A0;&#x3001;&#x5220;&#x9664;&#x6216;&#x4FEE;&#x6539;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;<br>&#x6DFB;&#x52A0;&#x3001;&#x5220;&#x9664;&#x6216;&#x4FEE;&#x6539;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;<br>&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x7C7B;<br>&#x4FEE;&#x6539;&#x4E00;&#x4E2A;&#x7C7B;&#x7684;&#x7EE7;&#x627F;&#x7ED3;&#x6784;<br>&#x4FEE;&#x6539;&#x4E00;&#x4E2A;&#x7C7B;&#x7684;&#x63A5;&#x53E3;&#x5B9E;&#x73B0;<br>&#x4FEE;&#x6539;&#x4E00;&#x4E2A;&#x7C7B;&#x7684;static&#x4FEE;&#x9970;&#x7B26;<br>&#x6D89;&#x53CA;&#x8D44;&#x6E90;&#x6587;&#x4EF6;id&#x7684;&#x6539;&#x52A8;</p>
</blockquote>
<p>4.Full Swap<br>&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x5C31;&#x4E0D;&#x7528;&#x591A;&#x8BF4;&#x4E86;&#xFF0C;&#x91CD;&#x65B0;&#x7F16;&#x8BD1;&#x6574;&#x4E2A;Apk&#xFF0C;&#x7136;&#x540E;&#x5B89;&#x88C5;&#x3002;&#x5F53;&#x4EE5;&#x4E0A;&#x6240;&#x6709;&#x65B9;&#x5F0F;&#x90FD;&#x4E0D;&#x6EE1;&#x8DB3;&#x65F6;&#x5C31;&#x5230;&#x4E86;&#x8FD9;&#x4E00;&#x6B65;&#x3002;</p>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF0C;&#x56E0;&#x4E3A;Instant Run&#x672C;&#x8EAB;&#x7684;&#x5C40;&#x9650;&#x6027;&#xFF0C;&#x5176;&#x4E2D;&#x4E00;&#x4E9B;&#x65B9;&#x5F0F;&#x4E0D;&#x4F1A;&#x91CD;&#x65B0;&#x542F;&#x52A8;App&#xFF0C;&#x56E0;&#x6B64;&#x6709;&#x4E9B;&#x521D;&#x59CB;&#x5316;&#x4EE3;&#x7801;&#x53EF;&#x80FD;&#x4E0D;&#x4F1A;&#x88AB;&#x6267;&#x884C;&#xFF0C;&#x8FD9;&#x53EF;&#x80FD;&#x4F1A;&#x5F15;&#x8D77;&#x5F88;&#x591A;&#x95EE;&#x9898;&#x3002;<br>&#x6211;&#x4E0D;&#x6E05;&#x695A;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x73B0;&#x5728;&#x89E3;&#x51B3;&#x4E86;&#x6CA1;&#x6709;&#x3002;</p>
</blockquote>
<p>&#x4EE5;&#x4E0A;&#x603B;&#x7ED3;&#x6765;&#x81EA;<a href="http://blog.csdn.net/sinyu890807/article/details/51271369" target="_blank" rel="external"> Android Studio&#x65B0;&#x529F;&#x80FD;&#x89E3;&#x6790;&#xFF0C;&#x4F60;&#x771F;&#x7684;&#x4E86;&#x89E3;Instant Run&#x5417;&#xFF1F;&#x2013;&#x90ED;&#x9716;</a><br>&#x611F;&#x8C22;&#x539F;&#x4F5C;&#x8005;&#x90ED;&#x795E;&#xFF01;</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-Android namespace总结" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/11/17/Android namespace总结/" class="article-date">
  	<time datetime="2016-11-17T10:25:00.000Z" itemprop="datePublished">2016-11-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/17/Android namespace总结/">Android namespace总结</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#x5728;Android&#x5DE5;&#x7A0B;&#x4E2D;&#x4EE5;xml&#x4E3A;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x65B9;&#x4FBF;&#x5FEB;&#x901F;&#x8FDB;&#x884C;&#x5E03;&#x5C40;&#x7684;&#x521B;&#x5EFA;&#xFF0C;namespace&#x5728;xml&#x4E2D;&#x662F;&#x4E0D;&#x53EF;&#x6216;&#x7F3A;&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x4E2A;&#x73A9;&#x610F;&#x5230;&#x5E95;&#x662F;&#x4EC0;&#x4E48;&#x610F;&#x601D;&#xFF1F;<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">RelativeLayout</span> <span class="attribute">xmlns:android</span>=<span class="value">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">  <span class="attribute">xmlns:tools</span>=<span class="value">&quot;http://schemas.android.com/tools&quot;</span></span><br><span class="line">  <span class="attribute">android:layout_width</span>=<span class="value">&quot;match_parent&quot;</span></span><br><span class="line">  <span class="attribute">android:layout_height</span>=<span class="value">&quot;match_parent&quot;</span></span><br><span class="line">  <span class="attribute">tools:context</span>=<span class="value">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">TextView</span></span><br><span class="line">    <span class="attribute">android:layout_width</span>=<span class="value">&quot;wrap_content&quot;</span></span><br><span class="line">    <span class="attribute">android:layout_height</span>=<span class="value">&quot;wrap_content&quot;</span></span><br><span class="line">    <span class="attribute">android:text</span>=<span class="value">&quot;@string/hello_world&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>&#x9996;&#x5148;&#x6765;&#x770B;&#x4E00;&#x4E2A;&#x6700;&#x7B80;&#x5355;&#x7684;&#x4F8B;&#x5B50;&#xFF0C;&#x5728;RekativeLayout&#x4E2D;&#x58F0;&#x660E;&#x4E86;namespace&#xFF1A;android&#x3002;<br>&#x5B83;&#x7684;&#x683C;&#x5F0F;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;<br><code>xmlns:xxx=&quot;http://schemas.android.com/apk/yyy&quot;</code><br>xmlns&#xFF08;xml namespace&#xFF09;&#x8868;&#x793A;xml&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x3002;&#x540E;&#x9762;&#x7684;xxx&#x662F;&#x8FD9;&#x4E2A;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x7684;&#x4E00;&#x4E2A;&#x4EE3;&#x53F7;&#xFF0C;&#x65B9;&#x4FBF;&#x540E;&#x9762;&#x4F7F;&#x7528;&#xFF0C;&#x5728;=&#x540E;&#x9762;&#x662F;&#x4E00;&#x4E2A;URI&#xFF0C;&#x5B83;&#x4EE3;&#x8868;&#x8FD9;&#x4E2A;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x7684;&#x5177;&#x4F53;&#x4F4D;&#x7F6E;&#x3002;<br><code>xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</code><br>&#x8FD9;&#x53E5;&#x58F0;&#x660E;&#x5C31;&#x8868;&#x793A;&#x6211;&#x8981;&#x4F7F;&#x7528;URI&#x4E3A;<code>http://schemas.android.com/apk/res/android</code>&#x7684;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#xFF0C;&#x8FD9;&#x91CC;&#x9762;<code>http://schemas.android.com/</code>&#x662F;Android&#x4E2D;&#x56FA;&#x5B9A;&#x7684;&#x5199;&#x6CD5;&#xFF0C;&#x8868;&#x793A;Android&#x547D;&#x540D;&#x7A7A;&#x95F4;&#xFF0C;&#x540E;&#x9762;&#x7684;<code>/apk/res/android</code>&#x8868;&#x793A;&#x6211;&#x8981;&#x4F7F;&#x7528;android&#x9ED8;&#x8BA4;&#x7684;&#x5C5E;&#x6027;&#x503C;&#x3002;<br>&#x901A;&#x8FC7;namespace&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x591A;&#x4E2A;&#x540C;&#x540D;attribute&#x7684;&#x51B2;&#x7A81;&#x3002;<br>&#x5E38;&#x7528;&#x7684;&#x51E0;&#x4E2A;namespace&#x6709;&#x4EE5;&#x4E0B;&#x4E09;&#x4E2A;&#xFF1A;<br>&#xFF08;1&#xFF09;<code>xmlns:android=&quot;http://schemas.android.com/apk/res/android</code><br>&#x8FD9;&#x4E2A;&#x4E0D;&#x7528;&#x591A;&#x8BF4;&#xFF0C;&#x53EA;&#x8981;&#x505A;&#x8FC7;Android&#x5F00;&#x53D1;&#x7684;&#x90FD;&#x77E5;&#x9053;&#x3002;<br>&#xFF08;2&#xFF09;<code>xmlns:tools=&#x201D;http://schemas.android.com/tools</code><br>&#x53EF;&#x80FD;&#x5927;&#x5BB6;&#x5BF9;&#x8FD9;&#x4E2A;tools&#x4E0D;&#x592A;&#x719F;&#x6089;&#x3002;&#x8FD9;&#x4E2A;namespace&#x91CC;&#x9762;&#x7684;&#x4E1C;&#x897F;&#x5728;&#x6211;&#x4EEC;&#x6253;&#x5305;&#x751F;&#x6210;apk&#x65F6;&#x4E0D;&#x4F1A;&#x88AB;&#x52A0;&#x5165;&#x5305;&#x4E2D;&#xFF0C;&#x6B63;&#x5982;&#x5B83;&#x7684;&#x540D;&#x5B57;&#x6240;&#x793A;&#xFF0C;&#x5B83;&#x4EC5;&#x4EC5;&#x662F;Android Studio&#x63D0;&#x4F9B;&#x7ED9;&#x6211;&#x4EEC;&#x8C03;&#x8BD5;&#x4F7F;&#x7528;&#x7684;tools&#xFF0C;&#x901A;&#x8FC7;&#x5B83;&#x8BBE;&#x7F6E;&#x4E00;&#x4E9B;attr&#x53EF;&#x4EE5;&#x5F88;&#x65B9;&#x4FBF;&#x7684;&#x5728;android studio&#x4E2D;&#x7684;ui&#x9884;&#x89C8;&#x754C;&#x9762;&#x8C03;&#x8BD5;&#x3002;<br>&#xFF08;3&#xFF09;<code>xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</code><br>&#x5173;&#x4E8E;&#x8FD9;&#x4E2A;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#xFF0C;&#x6211;&#x67E5;&#x4E86;&#x4E00;&#x4E9B;&#x8D44;&#x6599;&#x3002;</p>
<blockquote>
<p>The app namespace is not specific to a library, but it is used for all attributes defined in your app, whether by your code or by libraries you import, effectively making a single global namespace for custom attributes - i.e., attributes not defined by the android system.<br>In this case, the appcompat-v7 library uses custom attributes mirroring the android: namespace ones to support prior versions of android (for example: android:showAsAction was only added in API11, but app:showAsAction (being provided as part of your application) works on all API levels your app does) - obviously using the android:showAsAction wouldn&#x2019;t work on API levels where that attribute is not defined.</p>
</blockquote>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8FD9;&#x4E2A;namespace&#x662F;&#x63D0;&#x4F9B;&#x7ED9;&#x6211;&#x4EEC;&#x65B9;&#x4FBF;&#x7684;&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x5C5E;&#x6027;&#x800C;&#x8BBE;&#x7F6E;&#x7684;&#xFF0C;&#x5B83;&#x4E0D;&#x9488;&#x5BF9;&#x67D0;&#x4E00;&#x4E2A;lib&#xFF0C;&#x800C;&#x662F;&#x63D0;&#x4F9B;&#x7ED9;&#x6240;&#x6709;&#x81EA;&#x5B9A;&#x4E49;&#x5C5E;&#x6027;&#x4F7F;&#x7528;&#xFF0C;&#x4EFB;&#x4F55;&#x6765;&#x81EA;lib&#x6216;&#x662F;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x5C5E;&#x6027;&#x90FD;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;namespace&#x5FEB;&#x901F;&#x5F15;&#x7528;&#xFF0C;&#x7701;&#x53BB;&#x518D;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;namespace&#x3002;</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-OpenGL入门学习" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/11/14/OpenGL入门学习/" class="article-date">
  	<time datetime="2016-11-14T15:30:12.000Z" itemprop="datePublished">2016-11-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/14/OpenGL入门学习/">OpenGL入门学习</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#x4ECA;&#x5929;&#x5FC3;&#x8840;&#x6765;&#x6F6E;&#x7A81;&#x7136;&#x60F3;&#x5B66;&#x4E60;&#x4E00;&#x4E0B;&#x56FE;&#x5F62;&#x76F8;&#x5173;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x6211;&#x542C;&#x8BF4;&#x8FC7;&#x7684;&#x8FD9;&#x65B9;&#x9762;&#x7684;&#x4E1C;&#x897F;&#x5C31;&#x53EA;&#x6709;OpenGL&#x548C;OpenCV&#x4E86;&#x3002;&#x6070;&#x597D;Android&#x4E0A;&#x7684;VR&#x6D89;&#x53CA;&#x5230;&#x4E86;OpenGL&#x7684;&#x4E00;&#x4E9B;&#x5185;&#x5BB9;&#xFF0C;&#x4ECA;&#x5929;&#x5C31;&#x5F00;&#x59CB;&#x8BB0;&#x5F55;&#x6211;&#x7684;OpenGL&#x5B66;&#x4E60;&#x5185;&#x5BB9;&#x3002;<br>1.&#x4EC0;&#x4E48;&#x662F;OpenGL<br>OpenGL&#x662F;&#x4E00;&#x5957;&#x5F00;&#x6E90;&#x7684;&#x3001;&#x8DE8;&#x5E73;&#x53F0;&#x7684;&#x7ED8;&#x56FE;API&#x3002;&#x5728;&#x5E94;&#x7528;&#x4E0A;&#xFF0C;OpenGL&#x5E38;&#x7528;&#x4E8E;CAD&#x3001;&#x865A;&#x62DF;&#x5B9E;&#x5883;&#x3001;&#x79D1;&#x5B66;&#x53EF;&#x89C6;&#x5316;&#x7A0B;&#x5E8F;&#x548C;&#x7535;&#x5B50;&#x6E38;&#x620F;&#x5F00;&#x53D1;&#x3002;&#x5B83;&#x53EF;&#x4EE5;&#x7ED8;&#x5236;2D&#x53CA;3D&#x56FE;&#x5F62;&#x3002;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;OpenGL&#x901A;&#x5E38;&#x8981;&#x642D;&#x914D;&#x7A97;&#x53E3;&#x5E93;&#xFF0C;&#x5982;QT&#xFF0C;&#x56E0;&#x4E3A;OpenGL&#x672C;&#x8EAB;&#x4E0D;&#x5904;&#x7406;&#x7A97;&#x53E3;&#x7684;&#x521B;&#x5EFA;&#x548C;&#x9F20;&#x6807;&#x952E;&#x76D8;&#x8F93;&#x5165;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x52A8;&#x624B;&#x6765;&#x5904;&#x7406;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#x3002;<br>2.OpenGL&#x7684;&#x7248;&#x672C;&#x53D8;&#x8FC1;<br>OpenGL&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x7248;&#x672C;&#xFF1A;<br>OpenGL 1.0<br>&#x53D1;&#x5E03;&#x65F6;&#x95F4;&#xFF1A; 1992&#x5E74;1&#x6708;<br>&#x4EE5;&#x4E0B;&#x622A;&#x53D6;&#x81EA;&#x67D0;&#x535A;&#x5BA2;&#xFF1A;<br>OpenGL 1.0~OpenGL 1.5&#x662F;&#x7ECF;&#x5178;&#x7684;&#x56FA;&#x5B9A;&#x7BA1;&#x7EBF;&#x65F6;&#x4EE3;&#xFF1B;OpenGL 2.0~OpenGL 2.1&#x662F;&#x56FA;&#x5B9A;&#x7BA1;&#x7EBF;&#x548C;&#x53EF;&#x7F16;&#x7A0B;&#x7BA1;&#x7EBF;&#x5E76;&#x5B58;&#x7684;&#x65F6;&#x4EE3;&#xFF1B;OpenGL 3.0~OpenGL 4.x&#x5F00;&#x59CB;&#x662F;&#x53EF;&#x7F16;&#x7A0B;&#x7BA1;&#x7EBF;&#x5D1B;&#x8D77;&#x7684;&#x65F6;&#x4EE3;&#x3002;&#x5728;&#x51FA;&#x73B0;&#x53EF;&#x7F16;&#x7A0B;&#x7BA1;&#x7EBF;&#x7684;&#x90A3;&#x4E2A;&#x65F6;&#x4EE3;&#x3002;<br>&#x5C31;&#x6211;&#x73B0;&#x5728;&#x63A5;&#x89E6;&#x5230;&#x7684;&#x7684;&#x8D44;&#x6599;&#x6765;&#x770B;&#xFF0C;&#x73B0;&#x4EE3;&#x4F7F;&#x7528;&#x7684;OpenGL&#x7248;&#x672C;&#x81F3;&#x5C11;&#x5728;3.0&#x4EE5;&#x4E0A;&#x3002;<br>OpenGL&#x5404;&#x4E2A;&#x7248;&#x672C;&#x5F88;&#x6DF7;&#x4E71;&#xFF0C;&#x5728;&#x5404;&#x4E2A;&#x7248;&#x672C;&#x4E2D;&#x4F1A;&#x51FA;&#x73B0;&#x4E25;&#x91CD;&#x7684;&#x65AD;&#x5C42;&#x3002;<br>&#x672C;&#x6B21;&#x6211;&#x5B66;&#x4E60;&#x4F7F;&#x7528;&#x7684;OpenGL&#x4E3A;3.2&#x3002;<br>&#x6CE8;&#xFF1A;Android&#x4E2D;&#x4F7F;&#x7528;&#x7684;OpenGL&#x4E3A;OpenGL ES&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x5957;&#x4E13;&#x95E8;&#x4E3A;&#x5D4C;&#x5165;&#x5F0F;&#x8BBE;&#x5907;&#x51C6;&#x5907;&#x7684;API,&#x5B83;&#x662F;OpenGL&#x7684;&#x5B50;&#x96C6;&#x3002;<br><a href="https://developer.android.com/guide/topics/graphics/opengl.html" target="_blank" rel="external">&#x5B98;&#x7F51;&#x4F20;&#x9001;&#x95E8;</a><br>&#x5B83;&#x7684;&#x4F7F;&#x7528;&#x548C;&#x4E00;&#x822C;&#x7684;OpenGL&#x4F7F;&#x7528;&#x662F;&#x6709;&#x6BD4;&#x8F83;&#x5927;&#x7684;&#x533A;&#x522B;&#x7684;&#x3002;&#x8FD9;&#x4E9B;&#x5185;&#x5BB9;&#x7559;&#x7F6E;&#x6211;&#x4EE5;&#x540E;&#x6574;&#x7406;&#x3002;<br>3.&#x73AF;&#x5883;&#x914D;&#x7F6E;<br>&#x7531;&#x4E8E;Mac&#x7684;Xcode&#x5185;&#x7F6E;&#x4E86;OpenGL&#x7684;&#x5E93;&#xFF0C;&#x6211;&#x6CA1;&#x6709;&#x7279;&#x610F;&#x53BB;&#x914D;&#x7F6E;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#xFF0C;&#x4ECE;&#x5176;&#x4ED6;&#x5730;&#x65B9;&#x627E;&#x6765;&#x7684;example&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x7F16;&#x8BD1;&#x5E76;&#x8FD0;&#x884C;&#x3002;<br>4.&#x5B66;&#x4E60;&#x4E4B;&#x524D;&#x8981;&#x5148;&#x4E86;&#x89E3;Shader&#x662F;&#x4EC0;&#x4E48;&#x3002;<br>Wiki:</p>
<blockquote>
<p>&#x7740;&#x8272;&#x5668;&#xFF08;&#x82F1;&#x8BED;&#xFF1A;shader&#xFF09;&#x5E94;&#x7528;&#x4E8E;&#x8BA1;&#x7B97;&#x673A;&#x56FE;&#x5F62;&#x5B66;&#x9886;&#x57DF;&#xFF0C;&#x6307;&#x4E00;&#x7EC4;&#x4F9B;&#x8BA1;&#x7B97;&#x673A;&#x56FE;&#x5F62;&#x8D44;&#x6E90;&#x5728;&#x6267;&#x884C;&#x6E32;&#x67D3;&#x4EFB;&#x52A1;&#x65F6;&#x4F7F;&#x7528;&#x7684;&#x6307;&#x4EE4;&#xFF0C;&#x7528;&#x4E8E;&#x8BA1;&#x7B97;&#x56FE;&#x50CF;&#x7684;&#x989C;&#x8272;&#x6216;&#x660E;&#x6697;&#x3002;&#x4F46;&#x8FDB;&#x6765;&#xFF0C;&#x5B83;&#x4E5F;&#x80FD;&#x7528;&#x4E8E;&#x5904;&#x7406;&#x4E00;&#x4E9B;&#x7279;&#x6B8A;&#x6548;&#x679C;&#xFF0C;&#x6216;&#x8005;&#x89C6;&#x9891;&#x540E;&#x5904;&#x7406;&#x3002;&#x901A;&#x4FD7;&#x5730;&#x8BF4;&#xFF0C;&#x7740;&#x8272;&#x5668;&#x544A;&#x8BC9;&#x7535;&#x8111;&#x5982;&#x4F55;&#x7528;&#x7279;&#x6709;&#x7684;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x53BB;&#x7ED8;&#x5236;&#x7269;&#x4F53;&#x3002;<br>&#x7A0B;&#x5E8F;&#x5458;&#x5C06;&#x7740;&#x8272;&#x5668;&#x5E94;&#x7528;&#x4E8E;&#x56FE;&#x5F62;&#x5904;&#x7406;&#x5668;&#xFF08;GPU&#xFF09;&#x7684;&#x53EF;&#x7F16;&#x7A0B;&#x6D41;&#x6C34;&#x7EBF;&#xFF0C;&#x6765;&#x5B9E;&#x73B0;&#x4E09;&#x7EF4;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x56FE;&#x5F62;&#x5904;&#x7406;&#x5668;&#x6709;&#x522B;&#x4E8E;&#x4F20;&#x7EDF;&#x7684;&#x56FA;&#x5B9A;&#x6D41;&#x6C34;&#x7EBF;&#x5904;&#x7406;&#x5668;&#xFF0C;&#x4E3A;GPU&#x7F16;&#x7A0B;&#x5E26;&#x6765;&#x66F4;&#x9AD8;&#x7684;&#x7075;&#x6D3B;&#x6027;&#x548C;&#x9002;&#x5E94;&#x6027;&#x3002;&#x4EE5;&#x524D;&#x56FA;&#x6709;&#x7684;&#x6D41;&#x6C34;&#x7EBF;&#x53EA;&#x80FD;&#x8FDB;&#x884C;&#x4E00;&#x4E9B;&#x51E0;&#x4F55;&#x53D8;&#x6362;&#x548C;&#x50CF;&#x7D20;&#x7070;&#x5EA6;&#x8BA1;&#x7B97;&#x3002;&#x73B0;&#x5728;&#x53EF;&#x7F16;&#x7A0B;&#x6D41;&#x6C34;&#x7EBF;&#x8FD8;&#x80FD;&#x5904;&#x7406;&#x6240;&#x6709;&#x50CF;&#x7D20;&#x3001;&#x9876;&#x70B9;&#x3001;&#x7EB9;&#x7406;&#x7684;&#x4F4D;&#x7F6E;&#x3001;&#x8272;&#x8C03;&#x3001;&#x9971;&#x548C;&#x5EA6;&#x3001;&#x660E;&#x5EA6;&#x3001;&#x5BF9;&#x6BD4;&#x5EA6;&#x5E76;&#x5B9E;&#x65F6;&#x5730;&#x7ED8;&#x5236;&#x56FE;&#x50CF;&#x3002;&#x7740;&#x8272;&#x5668;&#x8FD8;&#x80FD;&#x4EA7;&#x751F;&#x5982;&#x6A21;&#x7CCA;&#x3001;&#x9AD8;&#x5149;&#x3001;&#x6709;&#x4F53;&#x79EF;&#x5149;&#x6E90;&#x3001;&#x5931;&#x7126;&#x3001;&#x5361;&#x901A;&#x6E32;&#x67D3;&#x3001;&#x8272;&#x8C03;&#x5206;&#x79BB;&#x3001;&#x7578;&#x53D8;&#x3001;&#x51F9;&#x51F8;&#x8D34;&#x56FE;&#x3001;&#x8FB9;&#x7F18;&#x68C0;&#x6D4B;&#x3001;&#x8FD0;&#x52A8;&#x68C0;&#x6D4B;&#x7B49;&#x6548;&#x679C;</p>
</blockquote>
<p>&#x4ECE;&#x7A0B;&#x5E8F;&#x5F00;&#x53D1;&#x8005;&#x7684;&#x89D2;&#x5EA6;&#x6765;&#x770B;&#xFF1A;<br>Shader&#x662F;&#x4F7F;&#x7528;GLSL&#xFF08;OpenGL Shading Language&#xFF09;&#x6216;HLSL&#xFF08;High Level Shader Language&#xFF09;&#x7F16;&#x5199;&#x7684;&#x7A0B;&#x5E8F;&#xFF0C;&#x5B83;&#x8FD0;&#x884C;&#x4E8E;GPU&#x4E0A;&#xFF0C;&#x4E13;&#x6CE8;&#x4E8E;&#x5BF9;&#x56FE;&#x50CF;&#x76F8;&#x5173;&#x7684;&#x6570;&#x636E;&#x8BA1;&#x7B97;&#x7684;&#x5904;&#x7406;&#x3002;Shader&#x662F;&#x4E00;&#x4E2A;&#x901A;&#x7528;&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x5B83;&#x4E0D;&#x53D7;&#x9650;&#x4E8E;&#x67D0;&#x4E2A;&#x6846;&#x67B6;&#x3002;</p>
<p>&#x7F16;&#x5199;OpenGL&#x7A0B;&#x5E8F;&#x65F6;&#x9700;&#x8981;&#x540C;&#x65F6;&#x7F16;&#x5199;OpenGL&#x4E3B;&#x7A0B;&#x5E8F;&#x548C;Shader&#x7A0B;&#x5E8F;&#x3002;&#x65E9;&#x671F;&#x7684;OpenGL&#x4F7F;&#x7528;&#x65F6;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x6709;&#x6CA1;&#x6709;Shader&#xFF0C;&#x4F46;&#x662F;&#x73B0;&#x5728;&#x66F4;&#x9AD8;&#x7248;&#x672C;&#x7684;OpenGL&#x5DF2;&#x7ECF;&#x662F;&#x5FC5;&#x987B;&#x4F7F;&#x7528;Shader&#x4E86;&#x3002;</p>
<p>&#x5728;OpenGL&#x4E2D;Shader&#x5206;&#x4E3A;&#x4EE5;&#x4E0B;&#x51E0;&#x79CD;&#xFF08;&#x5305;&#x62EC;&#x4F46;&#x4E0D;&#x9650;&#x4E8E;&#xFF09;&#x3002;<br>&#xFF08;1&#xFF09;Fragment Shader<br>Fragment Shader&#x7528;&#x4E8E;&#x8BA1;&#x7B97;&#x6BCF;&#x4E2A;&#x9700;&#x8981;&#x7ED8;&#x5236;&#x7684;&#x50CF;&#x7D20;&#x70B9;&#x7684;&#x989C;&#x8272;&#x3002;<br>&#xFF08;2&#xFF09;Geometry Shader<br>Geometry Shader&#x7528;&#x4E8E;&#x5904;&#x7406;&#x70B9;&#x3001;&#x7EBF;&#x3001;&#x9762;&#x7684;&#x51E0;&#x4F55;&#x5750;&#x6807;&#x53D8;&#x6362;&#x3002;<br>&#xFF08;3&#xFF09;Vertex Shader<br>Vertex Shader&#x7528;&#x4E8E;&#x8BA1;&#x7B97;&#x5C06;&#x76EE;&#x6807;&#x70B9;&#x5750;&#x6807;&#x53D8;&#x6362;&#x4E3A;&#x5B9E;&#x9645;&#x5C4F;&#x5E55;&#x4E0A;&#x663E;&#x793A;&#x7684;&#x4E8C;&#x7EF4;&#x5750;&#x6807;&#x3002;<br>&#x4E0B;&#x9762;&#x5C31;&#x6B63;&#x5F0F;&#x5F00;&#x59CB;&#x5B66;&#x4E60;OpenGL&#x5427;&#xFF01;</p>
<p>4.Hello Triangle&#xFF01;<br>&#x4ECE;&#x4E00;&#x4E2A;&#x6700;&#x7B80;&#x5355;&#x7684;&#x7ED8;&#x5236;&#x4E09;&#x89D2;&#x5F62;&#x7684;example&#x5F00;&#x59CB;&#xFF0C;&#x521D;&#x6B65;&#x4E86;&#x89E3;&#x4F7F;&#x7528;OpenGL&#x7684;&#x6D41;&#x7A0B;&#x3002;<br><figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// initialise GLFW</span></span><br><span class="line">glfwSetErrorCallback<span class="params">(OnError)</span>;</span><br><span class="line"><span class="keyword">if</span><span class="params">(!glfwInit<span class="params">()</span>)</span></span><br><span class="line">    throw std::runtime_error<span class="params">(<span class="string">&quot;glfwInit failed&quot;</span>)</span>;</span><br></pre></td></tr></table></figure></p>
<p>&#x521D;&#x59CB;&#x5316;GLFW&#x3002;GLFW&#x662F;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x5F00;&#x59CB;&#x63D0;&#x5230;OpenGL&#x7684;&#x4F7F;&#x7528;&#x5FC5;&#x987B;&#x642D;&#x914D;&#x7A97;&#x53E3;&#x56FE;&#x5F62;&#x5E93;&#xFF0C;GLFW&#x662F;&#x4E00;&#x4E2A;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x8DE8;&#x5E73;&#x53F0;&#x7684;&#x4E3A;OpenGL&#x8BBE;&#x8BA1;&#x7684;&#x7A97;&#x53E3;&#x5E93;&#x3002;<br>&#x5728;&#x4F7F;&#x7528;OpenGL&#x524D;&#xFF0C;&#x9996;&#x5148;&#x8981;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7A97;&#x53E3;&#x3002;&#x8FD9;&#x91CC;&#x521D;&#x59CB;&#x5316;GLFW&#x3002;<br><figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// open a window with GLFW</span></span><br><span class="line">glfwWindowHint<span class="params">(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE)</span>;</span><br><span class="line">glfwWindowHint<span class="params">(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE)</span>;</span><br><span class="line">glfwWindowHint<span class="params">(GLFW_CONTEXT_VERSION_MAJOR, <span class="number">3</span>)</span>;</span><br><span class="line">glfwWindowHint<span class="params">(GLFW_CONTEXT_VERSION_MINOR, <span class="number">2</span>)</span>;</span><br><span class="line">glfwWindowHint<span class="params">(GLFW_RESIZABLE, GL_FALSE)</span>;</span><br><span class="line">gWindow = glfwCreateWindow<span class="params">(<span class="params">(int)</span>SCREEN_SIZE.x, <span class="params">(int)</span>SCREEN_SIZE.y, <span class="string">&quot;OpenGL Tutorial&quot;</span>, NULL, NULL)</span>;</span><br><span class="line"><span class="keyword">if</span><span class="params">(!gWindow)</span></span><br><span class="line">    throw std::runtime_error<span class="params">(<span class="string">&quot;glfwCreateWindow failed. Can your hardware handle OpenGL 3.2?&quot;</span>)</span>;</span><br></pre></td></tr></table></figure></p>
<p>&#x5728;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;GLFW&#x6253;&#x5F00;&#x4E00;&#x4E2A;&#x7A97;&#x53E3;&#x3002;<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// GLFW settings</span><br><span class="line">glfwMakeContextCurrent<span class="list">(<span class="keyword">gWindow</span>)</span><span class="comment">;</span></span><br></pre></td></tr></table></figure></p>
<p>&#x4E3A;&#x5F53;&#x524D;&#x7A97;&#x53E3;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;OpenGL&#x4E0A;&#x4E0B;&#x6587;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E;Android&#x4E2D;&#x7684;Context&#x3002;<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// initialise GLEW</span></span><br><span class="line">glewExperimental = GL_TRUE; <span class="comment">//stops glew crashing on OSX :-/</span></span><br><span class="line"><span class="keyword">if</span>(glewInit() != GLEW_OK)</span><br><span class="line">    <span class="keyword">throw</span> <span class="built_in">std</span>::runtime_error(<span class="string">&quot;glewInit failed&quot;</span>);</span><br></pre></td></tr></table></figure></p>
<p>&#x8FD9;&#x91CC;&#x521D;&#x59CB;&#x5316;GLEW&#x3002;&#x4EC0;&#x4E48;&#x662F;GLEW&#xFF1F;&#x5728;&#x73B0;&#x4EE3;OpenGL&#x7248;&#x672C;&#x91CC;&#xFF0C;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x4F7F;&#x7528;#include&lt; &#x2026; &gt;&#x8FD9;&#x6837;&#x7684;&#x9759;&#x6001;&#x94FE;&#x63A5;&#x7684;&#x65B9;&#x5F0F;&#x8C03;&#x7528;OpenGL&#x7684;API&#xFF0C;&#x5B83;&#x7684;API&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x52A8;&#x6001;&#x8C03;&#x7528;&#x3002;GLEW&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x52A8;&#x6001;&#x8C03;&#x7528;OpenGL&#x7684;&#x5165;&#x53E3;&#x3002;</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// loads the vertex shader and fragment shader, and links them to make the global gProgram</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">LoadShaders</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;tdogl::Shader&gt; shaders;</span><br><span class="line">    shaders.push_back(tdogl::Shader::shaderFromFile(ResourcePath(<span class="string">&quot;vertex-shader.txt&quot;</span>), GL_VERTEX_SHADER));</span><br><span class="line">    shaders.push_back(tdogl::Shader::shaderFromFile(ResourcePath(<span class="string">&quot;fragment-shader.txt&quot;</span>), GL_FRAGMENT_SHADER));</span><br><span class="line">    gProgram = <span class="keyword">new</span> tdogl::Program(shaders);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;LoadShaders&#x65B9;&#x6CD5;&#x6765;&#x521D;&#x59CB;&#x5316;shader&#x3002;<br>&#x5728;&#x4E4B;&#x524D;&#x63D0;&#x8FC7;&#x7684;&#xFF0C;shader&#x4EE5;GLSL&#x4E66;&#x5199;&#xFF0C;&#x8FD9;&#x91CC;shader&#x7684;&#x5177;&#x4F53;&#x4EE3;&#x7801;&#x5B58;&#x5728;&#x4E00;&#x4E2A;txt&#x6587;&#x4EF6;&#x91CC;&#xFF0C;&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x6765;&#x52A0;&#x8F7D;shader&#x6587;&#x4EF6;&#x91CC;&#x7684;&#x4EE3;&#x7801;&#x3002;<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// loads a triangle into the VAO global</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">LoadTriangle</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="comment">// make and bind the VAO</span></span><br><span class="line">    glGenVertexArrays(<span class="number">1</span>, &amp;gVAO);</span><br><span class="line">    glBindVertexArray(gVAO);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// make and bind the VBO</span></span><br><span class="line">    glGenBuffers(<span class="number">1</span>, &amp;gVBO);</span><br><span class="line">    glBindBuffer(GL_ARRAY_BUFFER, gVBO);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Put the three triangle verticies into the VBO</span></span><br><span class="line">    GLfloat vertexData[] = {</span><br><span class="line">        <span class="comment">//  X     Y     Z</span></span><br><span class="line">         <span class="number">0.0f</span>, <span class="number">0.8f</span>, <span class="number">0.0f</span>,</span><br><span class="line">        -<span class="number">0.8f</span>,-<span class="number">0.8f</span>, <span class="number">0.0f</span>,</span><br><span class="line">         <span class="number">0.8f</span>,-<span class="number">0.8f</span>, <span class="number">0.0f</span>,</span><br><span class="line">    };</span><br><span class="line">    glBufferData(GL_ARRAY_BUFFER, <span class="keyword">sizeof</span>(vertexData), vertexData, GL_STATIC_DRAW);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// connect the xyz to the &quot;vert&quot; attribute of the vertex shader</span></span><br><span class="line">    glEnableVertexAttribArray(gProgram-&gt;attrib(<span class="string">&quot;vert&quot;</span>));</span><br><span class="line">    glVertexAttribPointer(gProgram-&gt;attrib(<span class="string">&quot;vert&quot;</span>), <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">0</span>, <span class="literal">NULL</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// unbind the VBO and VAO</span></span><br><span class="line">    glBindBuffer(GL_ARRAY_BUFFER, <span class="number">0</span>);</span><br><span class="line">    glBindVertexArray(<span class="number">0</span>);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x8FD9;&#x91CC;&#x662F;&#x771F;&#x6B63;&#x7ED8;&#x5236;&#x4E09;&#x89D2;&#x5F62;&#x7684;&#x4EE3;&#x7801;&#x3002;<br>&#x4E00;&#x70B9;&#x70B9;&#x770B;&#x3002;<br><code>// make and bind the VBO
glGenBuffers(1, &amp;gVBO);
glBindBuffer(GL_ARRAY_BUFFER, gVBO);</code><br><code>// make and bind the VAO
    glGenVertexArrays(1, &amp;gVAO);
    glBindVertexArray(gVAO);</code><br>&#x8FD9;&#x91CC;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;VBO&#x5BF9;&#x8C61;&#x548C;VAO&#x5BF9;&#x8C61;&#xFF0C;&#x5E76;&#x628A;&#x5B83;&#x548C;OpenGL&#x7ED1;&#x5B9A;<br>VBO&#x548C;VAO&#x662F;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;<br>VAO&#xFF08;Vertex Array Object&#xFF09;&#x548C;VBO&#xFF08;Vertex Buffer Object&#xFF09;&#x662F;C++&#x7A0B;&#x5E8F;&#x548C;Shader&#x7A0B;&#x5E8F;&#x4F20;&#x9012;&#x6570;&#x636E;&#x4F7F;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#x3002;<br>VBO&#x5B58;&#x50A8;&#x8981;&#x4F20;&#x9012;&#x7ED9;Shader&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x91CC;&#x7684;&#x6570;&#x636E;&#x6CA1;&#x6709;&#x7C7B;&#x578B;&#x3002;VAO&#x5BF9;VBO&#x548C;Shader&#x8FDB;&#x884C;&#x8FDE;&#x63A5;&#xFF0C;&#x5B83;&#x63CF;&#x8FF0;&#x4E86;VBO&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x4EE5;&#x53CA;&#x8BE5;&#x4F20;&#x9012;&#x4E2A;Shader&#x7684;&#x6570;&#x636E;&#x3002;</p>
<p><code>// Put the three triangle verticies into the VBO
    GLfloat vertexData[] = {
        //  X     Y     Z
         0.0f, 0.8f, 0.0f,
        -0.8f,-0.8f, 0.0f,
         0.8f,-0.8f, 0.0f,
    };
    glBufferData(GL_ARRAY_BUFFER, sizeof(vertexData),vertexData, GL_STATIC_DRAW);</code><br>&#x8FD9;&#x91CC;&#x5411;VBO&#x6DFB;&#x52A0;&#x6570;&#x636E;&#xFF0C;&#x56E0;&#x4E3A;&#x8981;&#x7ED8;&#x5236;&#x4E09;&#x89D2;&#x5F62;&#xFF0C;&#x6240;&#x4EE5;&#x7ED9;VBO&#x6DFB;&#x52A0;&#x4E09;&#x4E2A;&#x70B9;&#x7684;&#x5750;&#x6807;&#x503C;&#x3002;<br><code>// connect the xyz to the &quot;vert&quot; attribute of the vertex shader
    glEnableVertexAttribArray(gProgram-&gt;attrib(&quot;vert&quot;));
    glVertexAttribPointer(gProgram-&gt;attrib(&quot;vert&quot;), 3, GL_FLOAT, GL_FALSE, 0, NULL);</code><br>&#x8C03;&#x7528;VAO&#x914D;&#x7F6E;&#x6570;&#x636E;&#x3002;&#x8FD9;&#x91CC;&#x8BBE;&#x7F6E;&#x53D8;&#x91CF;&#x7684;&#x7C7B;&#x578B;&#x4E3A;vert&#x3002;</p>
<p><code>// unbind the VBO and VAO
    glBindBuffer(GL_ARRAY_BUFFER, 0);
    glBindVertexArray(0);</code><br>&#x6700;&#x540E;&#x5BF9;VBO&#x548C;VAO&#x89E3;&#x9664;&#x7ED1;&#x5B9A;&#xFF0C;&#x56E0;&#x4E3A;&#x4EE5;&#x540E;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x5B83;&#x4EEC;&#x4E86;&#xFF0C;&#x8FD9;&#x6837;&#x4E5F;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x5BF9;&#x6570;&#x636E;&#x8BEF;&#x64CD;&#x4F5C;&#x3002;</p>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// run while the window is open</span></span><br><span class="line">while<span class="params">(!glfwWindowShouldClose<span class="params">(gWindow)</span>)</span>{</span><br><span class="line">    <span class="comment">// process pending events</span></span><br><span class="line">    glfwPollEvents<span class="params">()</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// draw one frame</span></span><br><span class="line">    Render<span class="params">()</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x6570;&#x636E;&#x8BBE;&#x5B9A;&#x5B8C;&#x540E;&#x8C03;&#x7528;Render&#x51FD;&#x6570;&#x5F00;&#x59CB;&#x6E32;&#x67D3;&#x7ED8;&#x56FE;&#x3002;<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// draws a single frame</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Render</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="comment">// clear everything</span></span><br><span class="line">    glClearColor(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>); <span class="comment">// black</span></span><br><span class="line">    glClear(GL_COLOR_BUFFER_BIT);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// bind the program (the shaders)</span></span><br><span class="line">    glUseProgram(gProgram-&gt;object());</span><br><span class="line">        </span><br><span class="line">    <span class="comment">// bind the VAO (the triangle)</span></span><br><span class="line">    glBindVertexArray(gVAO);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// draw the VAO</span></span><br><span class="line">    glDrawArrays(GL_TRIANGLES, <span class="number">0</span>, <span class="number">3</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// unbind the VAO</span></span><br><span class="line">    glBindVertexArray(<span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// unbind the program</span></span><br><span class="line">    glUseProgram(<span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// swap the display buffers (displays what was just drawn)</span></span><br><span class="line">    glfwSwapBuffers(gWindow);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p><code>glClearColor(0, 0, 0, 1); // black
glClear(GL_COLOR_BUFFER_BIT);</code><br>&#x6E05;&#x7A7A;&#x5C4F;&#x5E55;&#xFF0C;&#x8BA9;&#x7A97;&#x53E3;&#x80CC;&#x666F;&#x53D8;&#x6210;&#x9ED1;&#x8272;&#x3002;<br>``<br>    // bind the program (the shaders)<br>    glUseProgram(gProgram-&gt;object());</p>
<pre><code>// bind the VAO <span class="list">(<span class="keyword">the</span> triangle)</span>
glBindVertexArray<span class="list">(<span class="keyword">gVAO</span>)</span><span class="comment">;</span>
</code></pre><p>``<br>&#x901A;&#x77E5;OpenGL&#x4F7F;&#x7528;VAO&#x548C;shader&#x3002;</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 王祖亮
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>